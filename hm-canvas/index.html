<!DOCTYPE html>
<html lang="z">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    
    <title>HarmonyOS - 使用画布绘制自定义图形 (Canvas) | 跃迁引擎</title>
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="iOS Research &amp; Development">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="HarmonyOS - 使用画布绘制自定义图形 (Canvas) | 跃迁引擎">
    <meta name="twitter:description" content="iOS Research &amp; Development">

    <meta property="og:type" content="article">
    <meta property="og:title" content="HarmonyOS - 使用画布绘制自定义图形 (Canvas) | 跃迁引擎">
    <meta property="og:description" content="iOS Research &amp; Development">

    
    <meta name="author" content="ShevaKuilin">
    
    
<link rel="stylesheet" href="/css/vno.css">

    
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">


    
    <link rel="icon" href="/images/favicon.png">
    

    <meta name="generator" content="hexo"/>
    

    <link rel="canonical" href="http://shevakuilin.com/hm-canvas/"/>

                 
</head>

<body class="home-template no-js">
    
<script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>

    
<script src="/js/main.js"></script>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>

    
<header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/background.jpg)">
  <div class="panel-main">
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/" title="前往 跃迁引擎 的主页"><img src="/images/avatar.jpeg" width="80" alt="跃迁引擎 logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage for 跃迁引擎">跃迁引擎</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">空気を読んだ雨降らないでよ</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">iOS Research & Development</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />

        <div class="navigation-wrapper">
          <div>
          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="访问博客" class="blog-button">主页</a></li>
            
              <li class="navigation__item"><a href="/archives">所有文章</a></li>
            
              <li class="navigation__item"><a href="/tags/算法/">算法</a></li>
            
              <li class="navigation__item"><a href="/tags/iOS/">iOS</a></li>
            
              <li class="navigation__item"><a href="/tags/AI/">AI</a></li>
            
              <li class="navigation__item"><a href="/tags/HarmonyOS/">HarmonyOS</a></li>
            
              <li class="navigation__item"><a href="/tags/Rust/">Rust</a></li>
            
              <li class="navigation__item"><a href="/tags/札记/">札记</a></li>
            
              <li class="navigation__item"><a href="/tags/随笔/">随笔</a></li>
            
              <li class="navigation__item"><a href="/tags/折腾日记/">折腾日记</a></li>
            
            </ul>
          </nav>
          </div>
          <div>
          <nav class="cover-navigation navigation--social">
  <ul class="navigation">

  <!-- Weibo-->
  

  <!-- Github -->
  
  <li class="navigation__item">
    <a href="https://github.com/shevakuilin" title="查看我的GitHub主页" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>


<!-- Stack Overflow -->
        

  <!-- Google Plus -->
  

<!-- Facebook -->

  
<!-- Twitter -->

  



  </ul>
</nav>

          </div>
        </div>

      </div>

    </div>

    <div class="panel-cover--overlay cover-disabled"></div>
  </div> 
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single">

  <header class="post-header">
    <div class="post-meta">
      <time datetime="2024-06-22T10:57:04.000Z" class="post-list__meta--date date">2024-06-22</time> &#8226; <span class="post-meta__tags tags">于 
  <a class="-none-link" href="/tags/Canvas/" rel="tag">Canvas</a>, <a class="-none-link" href="/tags/HarmonyOS/" rel="tag">HarmonyOS</a>, <a class="-none-link" href="/tags/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/" rel="tag">使用教程</a>, <a class="-none-link" href="/tags/%E9%B8%BF%E8%92%99/" rel="tag">鸿蒙</a>
 </span>
      <span class="page-pv">
       阅读 <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span>
      </span> 
   
    </div>
    <h1 class="post-title">HarmonyOS - 使用画布绘制自定义图形 (Canvas)</h1>
  </header>

  <section class="post">
    <img src= "https://github.com/shevakuilin/GhostPostsImages/raw/master/hm-canvas.png">

<p>Canvas提供画布组件，用于自定义绘制图形，开发者使用CanvasRenderingContext2D对象和OffscreenCanvasRenderingContext2D对象在Canvas组件上进行绘制，绘制对象可以是基础形状、文本、图片等。</p>
<h2 id="使用画布组件绘制自定义图形"><a href="#使用画布组件绘制自定义图形" class="headerlink" title="使用画布组件绘制自定义图形"></a>使用画布组件绘制自定义图形</h2><p>可以由以下三种形式在画布绘制自定义图形：</p>
<ul>
<li><p>使用<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14">CanvasRenderingContext2D</a>对象在Canvas画布上绘制。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CanvasExample1</span> &#123;</span><br><span class="line">  <span class="comment">//用来配置CanvasRenderingContext2D对象的参数，包括是否开启抗锯齿，true表明开启抗锯齿。</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="comment">//用来创建CanvasRenderingContext2D对象，通过在canvas中调用CanvasRenderingContext2D对象来绘制。</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="comment">//在canvas中调用CanvasRenderingContext2D对象。</span></span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#F5DC62&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">//可以在这里绘制内容。</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">strokeRect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">200</span>, <span class="number">150</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MTAyODkxOWU5NGQ3Zjc1YThlMDRhMmVjYTEwOWU2ZjBfN2dQSUhUQzV5enhXV0QxdE5CdjZFeDVIbHQ2cjc3dHZfVG9rZW46UGl3bGJMcjM2b3Yya0d4OU5GNWM3bzFobkxnXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<ul>
<li><p>离屏绘制是指将需要绘制的内容先绘制在缓存区，再将其转换成图片，一次性绘制到Canvas上，加快了绘制速度。过程为：</p>
<ul>
<li>通过transferToImageBitmap方法将离屏画布最近渲染的图像创建为一个ImageBitmap对象。</li>
<li>通过CanvasRenderingContext2D对象的transferFromImageBitmap方法显示给定的ImageBitmap对象。</li>
</ul>
</li>
<li><p>具体使用参考<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-offscreencanvasrenderingcontext2d-V14">OffscreenCanvasRenderingContext2D</a>对象。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CanvasExample2</span> &#123;</span><br><span class="line">  <span class="comment">//用来配置CanvasRenderingContext2D对象和OffscreenCanvasRenderingContext2D对象的参数，包括是否开启抗锯齿。true表明开启抗锯齿</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  <span class="comment">//用来创建OffscreenCanvas对象，width为离屏画布的宽度，height为离屏画布的高度。通过在canvas中调用OffscreenCanvasRenderingContext2D对象来绘制。</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">offCanvas</span>: <span class="title class_">OffscreenCanvas</span> = <span class="keyword">new</span> <span class="title class_">OffscreenCanvas</span>(<span class="number">600</span>, <span class="number">600</span>)</span><br><span class="line"> </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#F5DC62&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> offContext = <span class="variable language_">this</span>.<span class="property">offCanvas</span>.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>, <span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">          <span class="comment">//可以在这里绘制内容</span></span><br><span class="line">          offContext.<span class="title function_">strokeRect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">200</span>, <span class="number">150</span>);</span><br><span class="line">          <span class="comment">//将离屏绘值渲染的图像在普通画布上显示</span></span><br><span class="line">          <span class="keyword">let</span> image = <span class="variable language_">this</span>.<span class="property">offCanvas</span>.<span class="title function_">transferToImageBitmap</span>();</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">transferFromImageBitmap</span>(image);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=YzU1NGY5YzVlNTA3NjkwOGM0YzVkNjM3YzE3NDI2MDBfWDB4WDZSSU5FR0dlam41TXZIMUFFemJNbks0NnhNcUVfVG9rZW46VHhFSGJseEowb01KNUp4UkczdGNlVU52bmVjXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h3 id="CanvasRenderingContext2D"><a href="#CanvasRenderingContext2D" class="headerlink" title="CanvasRenderingContext2D"></a>CanvasRenderingContext2D</h3><p>使用RenderingContext在Canvas组件上进行绘制，绘制对象可以是矩形、文本、图片等。</p>
<h4 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h4><h5 id="CanvasRenderingContext2D-settings-RenderingContextSettings-unit-LengthMetricsUnit"><a href="#CanvasRenderingContext2D-settings-RenderingContextSettings-unit-LengthMetricsUnit" class="headerlink" title="CanvasRenderingContext2D(settings?: RenderingContextSettings, unit?: LengthMetricsUnit)"></a>CanvasRenderingContext2D(settings?: RenderingContextSettings, unit?: LengthMetricsUnit)</h5><p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>settings</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#renderingcontextsettings">RenderingContextSettings</a></td>
<td>否</td>
<td>用来配置CanvasRenderingContext2D对象的参数，见<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#renderingcontextsettings">RenderingContextSettings</a>。</td>
</tr>
<tr>
<td>unit12+</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/js-apis-arkui-graphics-V14#lengthmetricsunit12">LengthMetricsUnit</a></td>
<td>否</td>
<td>用来配置CanvasRenderingContext2D对象的单位模式，配置后无法更改，见<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#lengthmetricsunit12">LengthMetricsUnit</a>。默认值：DEFAULT。</td>
</tr>
</tbody></table>
<h5 id="RenderingContextSettings"><a href="#RenderingContextSettings" class="headerlink" title="RenderingContextSettings"></a>RenderingContextSettings</h5><p>RenderingContextSettings(antialias?: boolean)</p>
<p>用来配置CanvasRenderingContext2D对象的参数，包括是否开启抗锯齿。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>antialias</td>
<td>boolean</td>
<td>否</td>
<td>表明canvas是否开启抗锯齿。默认值：false。</td>
</tr>
</tbody></table>
<h5 id="LengthMetricsUnit"><a href="#LengthMetricsUnit" class="headerlink" title="LengthMetricsUnit"></a>LengthMetricsUnit</h5><p>用来配置CanvasRenderingContext2D对象的单位模式，默认单位模式为LengthMetricsUnit.DEFAULT，对应默认单位vp，配置后无法动态更改，详细说明见<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/js-apis-arkui-graphics-V14#lengthmetricsunit12">LengthMetricsUnit</a>。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">LengthMetricsUnit</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">LengthMetricsUnitDemo</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>);</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">contextPX</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>, <span class="title class_">LengthMetricsUnit</span>.<span class="property">PX</span>);</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">contextVP</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">contextPX</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">150</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">contextPX</span>.<span class="title function_">fillRect</span>(<span class="number">10</span>,<span class="number">10</span>,<span class="number">100</span>,<span class="number">100</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">contextPX</span>.<span class="title function_">clearRect</span>(<span class="number">10</span>,<span class="number">10</span>,<span class="number">50</span>,<span class="number">50</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">contextVP</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">150</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">contextVP</span>.<span class="title function_">fillRect</span>(<span class="number">10</span>,<span class="number">10</span>,<span class="number">100</span>,<span class="number">100</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">contextVP</span>.<span class="title function_">clearRect</span>(<span class="number">10</span>,<span class="number">10</span>,<span class="number">50</span>,<span class="number">50</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=YzBkMzEwZTE4NjI0YmYzZjlhMzNhY2RjNGFjZmUzOTVfT2NuQkdSTXRUQXRLWEZTS3N0bFlaVExpMGcwcGhnUkRfVG9rZW46S2kxTWJOTGtsb3hxaGt4bkxhdGNpZWpsbmQxXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>只读</th>
<th>可选</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#fillstyle">fillStyle</a></td>
<td>string |number10+ |<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-canvasgradient-V14">CanvasGradient</a> | <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-canvaspattern-V14#canvaspattern">CanvasPattern</a></td>
<td>否</td>
<td>否</td>
<td>指定绘制的填充色。- 类型为string时，表示设置填充区域的颜色。默认值：’#000000’- 类型为number时，表示设置填充区域的颜色，不支持设置全透明色。默认值：0x000000- 类型为CanvasGradient时，表示渐变对象，使用<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#createlineargradient">createLinearGradient</a>方法创建。- 类型为CanvasPattern时，使用<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#createpattern">createPattern</a>方法创建。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#linewidth">lineWidth</a></td>
<td>number</td>
<td>否</td>
<td>否</td>
<td>设置绘制线条的宽度。默认值：1(px)默认单位：vplinewidth取值不支持0和负数，0和负数按异常值处理，异常值按默认值处理。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#strokestyle">strokeStyle</a></td>
<td>string |number10+ |<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-canvasgradient-V14">CanvasGradient</a> | <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-canvaspattern-V14#canvaspattern">CanvasPattern</a></td>
<td>否</td>
<td>否</td>
<td>设置线条的颜色。- 类型为string时，表示设置线条使用的颜色。默认值：’#000000’- 类型为number时，表示设置线条使用的颜色，不支持设置全透明色。默认值：0x000000- 类型为CanvasGradient时，表示渐变对象，使用<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#createlineargradient">createLinearGradient</a>方法创建。- 类型为CanvasPattern时，使用<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#createpattern">createPattern</a>方法创建。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#linecap">lineCap</a></td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvaslinecap">CanvasLineCap</a></td>
<td>否</td>
<td>否</td>
<td>指定线端点的样式，可选值为：- ‘butt’：线端点以方形结束。- ‘round’：线端点以圆形结束。- ‘square’：线端点以方形结束，该样式下会增加一个长度和线段厚度相同，宽度是线段厚度一半的矩形。默认值：’butt’。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#linejoin">lineJoin</a></td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvaslinejoin">CanvasLineJoin</a></td>
<td>否</td>
<td>否</td>
<td>指定线段间相交的交点样式，可选值为：- ‘round’：在线段相连处绘制一个扇形，扇形的圆角半径是线段的宽度。- ‘bevel’：在线段相连处使用三角形为底填充， 每个部分矩形拐角独立。- ‘miter’：在相连部分的外边缘处进行延伸，使其相交于一点，形成一个菱形区域，该属性可以通过设置miterLimit属性展现效果。默认值：’miter’。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#miterlimit">miterLimit</a></td>
<td>number</td>
<td>否</td>
<td>否</td>
<td>设置斜接面限制值，该值指定了线条相交处内角和外角的距离。默认值：10px单位：pxmiterLimit取值不支持0和负数，0和负数按异常值处理，异常值按默认值处理。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#font">font</a></td>
<td>string</td>
<td>否</td>
<td>否</td>
<td>设置文本绘制中的字体样式。语法：ctx.font&#x3D;’font-size font-family’- font-size(可选)，指定字号和行高，单位支持px和vp。在不同设备上呈现的字体大小可能不同。- font-family(可选)，指定字体系列。语法：ctx.font&#x3D;’font-style font-weight font-size font-family’- font-style(可选)，用于指定字体样式，支持如下几种样式：’normal’,’italic’。- font-weight(可选)，用于指定字体的粗细，支持如下几种类型：’normal’, ‘bold’, ‘bolder’, ‘lighter’, 100, 200, 300, 400, 500, 600, 700, 800, 900。- font-size(可选)，指定字号和行高，单位支持px、vp。使用时需要添加单位。- font-family(可选)，指定字体系列，支持如下几种类型：’sans-serif’, ‘serif’, ‘monospace’。默认值：’normal normal 14px sans-serif’。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#textalign">textAlign</a></td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvastextalign">CanvasTextAlign</a></td>
<td>否</td>
<td>否</td>
<td>设置文本绘制中的文本对齐方式，可选值为：- ‘left’：文本左对齐。- ‘right’：文本右对齐。- ‘center’：文本居中对齐。- ‘start’：文本对齐界线开始的地方。- ‘end’：文本对齐界线结束的地方。ltr布局模式下’start’和’left’一致，rtl布局模式下’start’和’right’一致·。默认值：’start’。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#textbaseline">textBaseline</a></td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvastextbaseline">CanvasTextBaseline</a></td>
<td>否</td>
<td>否</td>
<td>设置文本绘制中的水平对齐方式，可选值为：- ‘alphabetic’：文本基线是标准的字母基线。- ‘top’：文本基线在文本块的顶部。- ‘hanging’：文本基线是悬挂基线。- ‘middle’：文本基线在文本块的中间。- ‘ideographic’：文字基线是表意字基线；如果字符本身超出了alphabetic基线，那么ideograhpic基线位置在字符本身的底部。- ‘bottom’：文本基线在文本块的底部。 与ideographic基线的区别在于ideographic基线不需要考虑下行字母。默认值：’alphabetic’。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#globalalpha">globalAlpha</a></td>
<td>number</td>
<td>否</td>
<td>否</td>
<td>设置透明度，0.0为完全透明，1.0为完全不透明。默认值：1.0。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#linedashoffset">lineDashOffset</a></td>
<td>number</td>
<td>否</td>
<td>否</td>
<td>设置画布的虚线偏移量，精度为float。默认值：0.0默认单位：vp。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#globalcompositeoperation">globalCompositeOperation</a></td>
<td>string</td>
<td>否</td>
<td>否</td>
<td>设置合成操作的方式。类型字段可选值有’source-over’，’source-atop’，’source-in’，’source-out’，’destination-over’，’destination-atop’，’destination-in’，’destination-out’，’lighter’，’copy’，’xor’。默认值：’source-over’。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#shadowblur">shadowBlur</a></td>
<td>number</td>
<td>否</td>
<td>否</td>
<td>设置绘制阴影时的模糊级别，值越大越模糊，精度为float。默认值：0.0单位：px。shadowBlur取值不支持负数，负数按异常值处理，异常值按默认值处理。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#shadowcolor">shadowColor</a></td>
<td>string</td>
<td>否</td>
<td>否</td>
<td>设置绘制阴影时的阴影颜色。默认值：透明黑色。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#shadowoffsetx">shadowOffsetX</a></td>
<td>number</td>
<td>否</td>
<td>否</td>
<td>设置绘制阴影时和原有对象的水平偏移值。默认值：0.0默认单位：vp。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#shadowoffsety">shadowOffsetY</a></td>
<td>number</td>
<td>否</td>
<td>否</td>
<td>设置绘制阴影时和原有对象的垂直偏移值。默认值：0.0默认单位：vp。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#imagesmoothingenabled">imageSmoothingEnabled</a></td>
<td>boolean</td>
<td>否</td>
<td>否</td>
<td>用于设置绘制图片时是否进行图像平滑度调整，true为启用，false为不启用。默认值：true。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#height">height</a></td>
<td>number</td>
<td>是</td>
<td>否</td>
<td>组件高度。默认单位：vp。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#width">width</a></td>
<td>number</td>
<td>是</td>
<td>否</td>
<td>组件宽度。默认单位：vp。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#imagesmoothingquality">imageSmoothingQuality</a></td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#imagesmoothingquality-1">ImageSmoothingQuality</a></td>
<td>否</td>
<td>否</td>
<td>imageSmoothingEnabled为true时，用于设置图像平滑度。默认值：”low”。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#direction">direction</a></td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvasdirection">CanvasDirection</a></td>
<td>否</td>
<td>否</td>
<td>用于设置绘制文字时使用的文字方向。默认值：”inherit”。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#filter">filter</a></td>
<td>string</td>
<td>否</td>
<td>否</td>
<td>用于设置图像的滤镜，可以组合任意数量的滤镜。支持的滤镜效果如下：- ‘none’: 无滤镜效果- ‘blur’：给图像设置高斯模糊- ‘brightness’：给图片应用一种线性乘法，使其看起来更亮或更暗- ‘contrast’：调整图像的对比度- ‘grayscale’：将图像转换为灰度图像- ‘hue-rotate’：给图像应用色相旋转- ‘invert’：反转输入图像- ‘opacity’：转化图像的透明程度- ‘saturate’：转换图像饱和度- ‘sepia’：将图像转换为深褐色默认值：’none’。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvas13">canvas13+</a></td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/js-apis-arkui-framenode-V14">FrameNode</a></td>
<td>是</td>
<td>否</td>
<td>获取和CanvasRenderingContext2D关联的Canvas组件的FrameNode实例。可用于监听关联的Canvas组件的可见状态。默认值：null。</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>说明</strong></p>
<p>fillStyle、shadowColor与 strokeStyle 中string类型格式为 ‘rgb(255, 255, 255)’，’rgba(255, 255, 255, 1.0)’，’#FFFFFF’。</p>
</blockquote>
<h5 id="fillStyle"><a href="#fillStyle" class="headerlink" title="fillStyle"></a>fillStyle</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">FillStyleExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;#0000ff&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">150</span>, <span class="number">100</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NjVlMTVlZDU4NGJiNzM5MDVjZDE0MjUyNDY3ZTU4YTVfemQ2TU5xWFE5VWtleENWOGlIN2Fyamg1Rm9kYXp4ZUdfVG9rZW46Rmo5amJlbGJOb3B3T2h4M2xpVGNCOTlrblRiXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="lineWidth"><a href="#lineWidth" class="headerlink" title="lineWidth"></a>lineWidth</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">LineWidthExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineWidth</span> = <span class="number">5</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">strokeRect</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">85</span>, <span class="number">105</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=OGEyYTkyYmQ1MmIxZDUwMmI3NDQ1ZmQ2YjJhODY5ZjZfRkJSanpsa2RqRURLVG9WRjVaWmJOVWliYXN0ekx0WVZfVG9rZW46U3FUMWI4b3lsb2RLNkV4dTV5cmN1dVRXbjhiXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="strokeStyle"><a href="#strokeStyle" class="headerlink" title="strokeStyle"></a>strokeStyle</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">StrokeStyleExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineWidth</span> = <span class="number">10</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">strokeStyle</span> = <span class="string">&#x27;#0000ff&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">strokeRect</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">155</span>, <span class="number">105</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MGE1NjRiNzc2ZjNiM2IwNDU2NDFmODhmNWQ5YTAyYTFfdWVEd0FGRzZUWWVOWGE0TjlVVmN1d21MT2ltUmZYd01fVG9rZW46TjhEYWJROEhRb0o0QVB4S0I0emNuWW8ybm5iXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="lineCap"><a href="#lineCap" class="headerlink" title="lineCap"></a>lineCap</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">LineCapExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineWidth</span> = <span class="number">8</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineCap</span> = <span class="string">&#x27;round&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">moveTo</span>(<span class="number">30</span>, <span class="number">50</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">lineTo</span>(<span class="number">220</span>, <span class="number">50</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NGFmMTg2ZGUxMDI0MjVkOTBjYWU0ZTMzZGY4ODc5YzBfNHlzbWJCaWtEVENBZWJkMnhranVjNm9rc1BlbHBDZDdfVG9rZW46SVREV2JHWG5Cb0ZsNnN4VjhzRGNEanR0bk5mXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="lineJoin"><a href="#lineJoin" class="headerlink" title="lineJoin"></a>lineJoin</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">LineJoinExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>()</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineWidth</span> = <span class="number">8</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineJoin</span> = <span class="string">&#x27;miter&#x27;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">moveTo</span>(<span class="number">30</span>, <span class="number">30</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">lineTo</span>(<span class="number">120</span>, <span class="number">60</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">lineTo</span>(<span class="number">30</span>, <span class="number">110</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=YTljZTE5ZDg4MDM2ODExYjZlZDAyMDU2NzVlODhhYzlfVmpRd3c3SFFFbmp0SDFmNlR4WG8yanhWbUo3aVFvN3BfVG9rZW46VHJIRWJyWEJ4b3BudnN4RjR5cWNZRkVxbk5oXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="miterLimit"><a href="#miterLimit" class="headerlink" title="miterLimit"></a>miterLimit</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">MiterLimit</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineWidth</span> = <span class="number">8</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineJoin</span> = <span class="string">&#x27;miter&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">miterLimit</span> = <span class="number">3</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">moveTo</span>(<span class="number">30</span>, <span class="number">30</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">lineTo</span>(<span class="number">60</span>, <span class="number">35</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">lineTo</span>(<span class="number">30</span>, <span class="number">37</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2I2YjUxZTdkMmFmMGM1YzliOWJhOTJmNzRmNDQyYjlfclFUUGU3amVHUUZmaXJDdmNHVVBMdEhyejhJQ2VlNXlfVG9rZW46SG9DQ2JZRzlYb0NqYWZ4WkhMeGMyTVdPbjFjXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="font"><a href="#font" class="headerlink" title="font"></a>font</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Fonts</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">font</span> = <span class="string">&#x27;30px sans-serif&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="string">&quot;Hello px&quot;</span>, <span class="number">20</span>, <span class="number">60</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">font</span> = <span class="string">&#x27;30vp sans-serif&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="string">&quot;Hello vp&quot;</span>, <span class="number">20</span>, <span class="number">100</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NmQ0OWVmOTY3YmM4NTdiY2NkZDY2ODE2YTM3Nzg2MGJfeUU3clg2UU0wbWlSUWgwTnRtMmFmT0R1alViQlZaeEJfVG9rZW46Vkp2QWI5cExibzlmSHl4SHI1dWNDd21lbkFoXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="textAlign"><a href="#textAlign" class="headerlink" title="textAlign"></a>textAlign</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CanvasExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">strokeStyle</span> = <span class="string">&#x27;#0000ff&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">moveTo</span>(<span class="number">140</span>, <span class="number">10</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">lineTo</span>(<span class="number">140</span>, <span class="number">160</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">font</span> = <span class="string">&#x27;18px sans-serif&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">textAlign</span> = <span class="string">&#x27;start&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="string">&#x27;textAlign=start&#x27;</span>, <span class="number">140</span>, <span class="number">60</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">textAlign</span> = <span class="string">&#x27;end&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="string">&#x27;textAlign=end&#x27;</span>, <span class="number">140</span>, <span class="number">80</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">textAlign</span> = <span class="string">&#x27;left&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="string">&#x27;textAlign=left&#x27;</span>, <span class="number">140</span>, <span class="number">100</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">textAlign</span> = <span class="string">&#x27;center&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="string">&#x27;textAlign=center&#x27;</span>, <span class="number">140</span>, <span class="number">120</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">textAlign</span> = <span class="string">&#x27;right&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="string">&#x27;textAlign=right&#x27;</span>, <span class="number">140</span>, <span class="number">140</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=OGY2OGFjNTMyNTYzMGVjYjFkNWI1NThjYjg3MzkzMDhfOXBXR1BMWk9hcnU0VDVyTmVFU2FxZDRWT1didDBRa3lfVG9rZW46QUdRMGJ5OTVqb0ZWOWt4U0lBRmNNSXBQbmhmXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="textBaseline"><a href="#textBaseline" class="headerlink" title="textBaseline"></a>textBaseline</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TextBaseline</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;rgb(213,213,213)&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">strokeStyle</span> = <span class="string">&#x27;rgb(213,213,213)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">moveTo</span>(<span class="number">0</span>, <span class="number">120</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">lineTo</span>(<span class="number">400</span>, <span class="number">120</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">font</span> = <span class="string">&#x27;20px sans-serif&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">textBaseline</span> = <span class="string">&#x27;top&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="string">&#x27;Top&#x27;</span>, <span class="number">10</span>, <span class="number">120</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">textBaseline</span> = <span class="string">&#x27;bottom&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="string">&#x27;Bottom&#x27;</span>, <span class="number">55</span>, <span class="number">120</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">textBaseline</span> = <span class="string">&#x27;middle&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="string">&#x27;Middle&#x27;</span>, <span class="number">125</span>, <span class="number">120</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">textBaseline</span> = <span class="string">&#x27;alphabetic&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="string">&#x27;Alphabetic&#x27;</span>, <span class="number">195</span>, <span class="number">120</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">textBaseline</span> = <span class="string">&#x27;hanging&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="string">&#x27;Hanging&#x27;</span>, <span class="number">295</span>, <span class="number">120</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2E5MjcxM2RjNWM0Y2IwOWMyYjJhYTQ3Y2VkM2QyMDFfSzBqb0NzMlYxZm9nQ0k1c3FIUVRZV0xLQ3hBQjZvOUVfVG9rZW46Tzc3RWJUcTNKb08xR3B4RG5oZWN2enJ4bkdmXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="globalAlpha"><a href="#globalAlpha" class="headerlink" title="globalAlpha"></a>globalAlpha</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">GlobalAlpha</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(0,0,255)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">globalAlpha</span> = <span class="number">0.4</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(0,0,255)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ODhmMWQ4MWE4OTU3ZDVkMDhmOTRiZDdhMGVmYmFmMmRfZVkzY01ZcUdkak9ScWhPU2liR2J5TXlXcmNPeVNMWFhfVG9rZW46TTVaTGJPQ3Vvb2Y0MFJ4ODRDYmNKQzk1bnZjXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="lineDashOffset"><a href="#lineDashOffset" class="headerlink" title="lineDashOffset"></a>lineDashOffset</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">LineDashOffset</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">arc</span>(<span class="number">100</span>, <span class="number">75</span>, <span class="number">50</span>, <span class="number">0</span>, <span class="number">6.28</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">setLineDash</span>([<span class="number">10</span>,<span class="number">20</span>])</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineDashOffset</span> = <span class="number">10.0</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDg0ODAzYTZmYWQzOGJiZTY0NTQwNjIyNDY5YmRmZjRfMWxqSk45YUQ2RU1USmh0WmZVZDlYRWdRWEJ1QzQ1Y2NfVG9rZW46U3R1T2JMakdNbzJQVGN4bHJDS2NTZ0NqbkFlXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="globalCompositeOperation"><a href="#globalCompositeOperation" class="headerlink" title="globalCompositeOperation"></a>globalCompositeOperation</h5><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>source-over</td>
<td>在现有绘制内容上显示新绘制内容，属于默认值。</td>
</tr>
<tr>
<td>source-atop</td>
<td>在现有绘制内容顶部显示新绘制内容。</td>
</tr>
<tr>
<td>source-in</td>
<td>在现有绘制内容中显示新绘制内容。</td>
</tr>
<tr>
<td>source-out</td>
<td>在现有绘制内容之外显示新绘制内容。</td>
</tr>
<tr>
<td>destination-over</td>
<td>在新绘制内容上方显示现有绘制内容。</td>
</tr>
<tr>
<td>destination-atop</td>
<td>在新绘制内容顶部显示现有绘制内容。</td>
</tr>
<tr>
<td>destination-in</td>
<td>在新绘制内容中显示现有绘制内容。</td>
</tr>
<tr>
<td>destination-out</td>
<td>在新绘制内容外显示现有绘制内容。</td>
</tr>
<tr>
<td>lighter</td>
<td>显示新绘制内容和现有绘制内容。</td>
</tr>
<tr>
<td>copy</td>
<td>显示新绘制内容而忽略现有绘制内容。</td>
</tr>
<tr>
<td>xor</td>
<td>使用异或操作对新绘制内容与现有绘制内容进行融合。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">GlobalCompositeOperation</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(255,0,0)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">globalCompositeOperation</span> = <span class="string">&#x27;source-over&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(0,0,255)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(255,0,0)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">120</span>, <span class="number">20</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">globalCompositeOperation</span> = <span class="string">&#x27;destination-over&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(0,0,255)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">150</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=N2UzZTE4NTU3YmIwYjU1NTRjOGYxMGQwYjg5OTc0ZGFfWVF4dWZRTVFhUjlOazliREJObkN2bTBiUnFtalRmY09fVG9rZW46SDZ2eGIzb3Uwb0VWVFN4eHRNN2N0Ukl3bmdlXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="shadowBlur"><a href="#shadowBlur" class="headerlink" title="shadowBlur"></a>shadowBlur</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ShadowBlur</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">shadowBlur</span> = <span class="number">30</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">shadowColor</span> = <span class="string">&#x27;rgb(0,0,0)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(255,0,0)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">80</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NDEwNjc1NjNjNzM3YzljY2I5NmJmY2VmOGNkNjUyMzNfcE1GR25nQ0hCcGNHaDJKbGx5bGVHdG5XUENWdFNkT2hfVG9rZW46SXJucmJZVkozb2xWaWl4c0tZYWNQRXJKbkVkXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="shadowColor"><a href="#shadowColor" class="headerlink" title="shadowColor"></a>shadowColor</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ShadowColor</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">shadowBlur</span> = <span class="number">30</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">shadowColor</span> = <span class="string">&#x27;rgb(0,0,255)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(255,0,0)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">30</span>, <span class="number">30</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NjE2ZWUxM2JiZjUzMWI1MjM5MzQzY2ZiMWMxYjBjOWNfdDlickR4R2N2VnJqZnpmWlNIYnk4UlhSaVp2SUxRU0FfVG9rZW46VERDU2JOajZDbzRxclF4c1h6TGNPRVlMblJmXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="shadowOffsetX"><a href="#shadowOffsetX" class="headerlink" title="shadowOffsetX"></a>shadowOffsetX</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ShadowOffsetX</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">shadowBlur</span> = <span class="number">10</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">shadowOffsetX</span> = <span class="number">20</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">shadowColor</span> = <span class="string">&#x27;rgb(0,0,0)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(255,0,0)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">80</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=Njg2ZGZhMjA5Y2MwODQxMWY5YjljN2U0MDQzMTUxYTZfQjBqUTY2OXp2YkVjSVczd0VwWGRjTXM0OEhTVXlkSVJfVG9rZW46SUxBWGJVRFpyb0MzVzh4aTc0WmNjWWoybkFoXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="shadowOffsetY"><a href="#shadowOffsetY" class="headerlink" title="shadowOffsetY"></a>shadowOffsetY</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ShadowOffsetY</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">shadowBlur</span> = <span class="number">10</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">shadowOffsetY</span> = <span class="number">20</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">shadowColor</span> = <span class="string">&#x27;rgb(0,0,0)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(255,0,0)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">30</span>, <span class="number">30</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTNhOTcyYTg4ZGI3NzNjOTc0MTNmNzZmZTRmOWJjYzlfMFlMN0tLbnpMTnk0UWN2SFZQbWMyUjZOVDZuRTFQN1FfVG9rZW46QW42ZmI5dmJyb1VYb3N4QzREUGN4cUcxbmhmXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="imageSmoothingEnabled"><a href="#imageSmoothingEnabled" class="headerlink" title="imageSmoothingEnabled"></a>imageSmoothingEnabled</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ImageSmoothingEnabled</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">img</span>:<span class="title class_">ImageBitmap</span> = <span class="keyword">new</span> <span class="title class_">ImageBitmap</span>(<span class="string">&quot;common/images/icon.jpg&quot;</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">imageSmoothingEnabled</span> = <span class="literal">false</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">drawImage</span>( <span class="variable language_">this</span>.<span class="property">img</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">400</span>,<span class="number">200</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjgyN2QwNWRlM2NlMjQzZTRiNjYyODY0NjQ4OTFhMmRfTVZ3cDVNc2o0OE1CdW5CV05HVXRpM3JpeWJHWmtDSXNfVG9rZW46UDd3a2JuQ2kwbzBtZFZ4N3NhaWNEMVVWbjliXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="height"><a href="#height" class="headerlink" title="height"></a>height</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">HeightExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">300</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">300</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> h = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">height</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>, h/<span class="number">2</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDRlN2QwMjFjYzYyYWU3MDM1NzNiNGE5N2IyNDMzMWNfbkxVNUZYS0kybFRseVNOQXBlTEVNeVF4QzlmYTYwVVRfVG9rZW46WEpUOGJ0YmRqbzd5UFF4dDRhVGNoUmpkblRjXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="width"><a href="#width" class="headerlink" title="width"></a>width</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">WidthExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">300</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">300</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> w = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">width</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, w/<span class="number">2</span>, <span class="number">300</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NGU2N2E1YmRhNzQ2N2MzMWE5NDAxMjcxYTgzYmEzZjdfYm1PeFdZWGFWT0YyWUxBZm9XcWZNMVV1RXVod2xMcFRfVG9rZW46VU1PYmIyVmhFb0ZONG54c2FYNWN0RW9XbmtiXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="canvas"><a href="#canvas" class="headerlink" title="canvas"></a>canvas</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">FrameNode</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span></span><br><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CanvasExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">text</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> <span class="attr">node</span>: <span class="title class_">FrameNode</span> = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">canvas</span></span><br><span class="line">          node?.<span class="property">commonEvent</span>.<span class="title function_">setOnVisibleAreaApproximateChange</span>(</span><br><span class="line">            &#123; <span class="attr">ratios</span>: [<span class="number">0</span>, <span class="number">1</span>], <span class="attr">expectedUpdateInterval</span>: <span class="number">10</span>&#125;,</span><br><span class="line">            <span class="function">(<span class="params"><span class="attr">isVisible</span>: <span class="built_in">boolean</span>, <span class="attr">currentRatio</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (!isVisible &amp;&amp; currentRatio &lt;= <span class="number">0.0</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">text</span> = <span class="string">&#x27;Canvas is completely invisible.&#x27;</span></span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">if</span> (isVisible &amp;&amp; currentRatio &gt;= <span class="number">1.0</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">text</span> = <span class="string">&#x27;Canvas is fully visible.&#x27;</span></span><br><span class="line">              &#125;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">reset</span>()</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">font</span> = <span class="string">&#x27;30vp sans-serif&#x27;</span></span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="variable language_">this</span>.<span class="property">text</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">            &#125;</span><br><span class="line">          )</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MTNkNjZjYzBhMDEwN2Q5Y2YyOGRmZTNhOWIyZjZjZTVfOFYzMmxSaVNxMVFHNnN1ZTl2U3hrSnRSVU5tcjdETnBfVG9rZW46VzJobWJ0Q1I4b2hEUDB4cFlpU2NObnlPbllmXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="imageSmoothingQuality"><a href="#imageSmoothingQuality" class="headerlink" title="imageSmoothingQuality"></a>imageSmoothingQuality</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ImageSmoothingQualityDemo</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>);</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>);</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">img</span>:<span class="title class_">ImageBitmap</span> = <span class="keyword">new</span> <span class="title class_">ImageBitmap</span>(<span class="string">&quot;common/images/example.jpg&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="keyword">let</span> ctx = <span class="variable language_">this</span>.<span class="property">context</span></span><br><span class="line">          ctx.<span class="property">imageSmoothingEnabled</span> = <span class="literal">true</span></span><br><span class="line">          ctx.<span class="property">imageSmoothingQuality</span> = <span class="string">&#x27;high&#x27;</span></span><br><span class="line">          ctx.<span class="title function_">drawImage</span>(<span class="variable language_">this</span>.<span class="property">img</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">200</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=OGMyZjQyMWQ0MGM2MDJlYjFkYmExNmNhYTViYmYwMzlfbTlYczVMVjB5N3luVzN4SHFIdjJkZzRhU0ZTV1JSWWtfVG9rZW46TFE1bWJxcVJyb3hYeDl4UkhaNGNSVHpIbjhtXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="direction"><a href="#direction" class="headerlink" title="direction"></a>direction</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">DirectionDemo</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>);</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="keyword">let</span> ctx = <span class="variable language_">this</span>.<span class="property">context</span></span><br><span class="line">          ctx.<span class="property">font</span> = <span class="string">&#x27;48px serif&#x27;</span>;</span><br><span class="line">          ctx.<span class="property">textAlign</span> = <span class="string">&#x27;start&#x27;</span></span><br><span class="line">          ctx.<span class="title function_">fillText</span>(<span class="string">&quot;Hi ltr!&quot;</span>, <span class="number">200</span>, <span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">          ctx.<span class="property">direction</span> = <span class="string">&quot;rtl&quot;</span>;</span><br><span class="line">          ctx.<span class="title function_">fillText</span>(<span class="string">&quot;Hi rtl!&quot;</span>, <span class="number">200</span>, <span class="number">100</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NzJlNDU3ODkyNzE4YTI2Y2EzMDJmMjhkOTllMDA2ZGZfZ1czR2c0REV5Nko5dDZQcjlsdndCZGhUcVdvakhEWDRfVG9rZW46TDlmcWJ2ckdTb2U2SWN4TWdvemNHZmxJbkdmXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">FilterDemo</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>);</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>);</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">img</span>:<span class="title class_">ImageBitmap</span> = <span class="keyword">new</span> <span class="title class_">ImageBitmap</span>(<span class="string">&quot;common/images/example.jpg&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="keyword">let</span> ctx = <span class="variable language_">this</span>.<span class="property">context</span></span><br><span class="line">          <span class="keyword">let</span> img = <span class="variable language_">this</span>.<span class="property">img</span></span><br><span class="line"></span><br><span class="line">          ctx.<span class="title function_">drawImage</span>(img, <span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">          ctx.<span class="property">filter</span> = <span class="string">&#x27;grayscale(50%)&#x27;</span>;</span><br><span class="line">          ctx.<span class="title function_">drawImage</span>(img, <span class="number">100</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">          ctx.<span class="property">filter</span> = <span class="string">&#x27;sepia(60%)&#x27;</span>;</span><br><span class="line">          ctx.<span class="title function_">drawImage</span>(img, <span class="number">200</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">          ctx.<span class="property">filter</span> = <span class="string">&#x27;saturate(30%)&#x27;</span>;</span><br><span class="line">          ctx.<span class="title function_">drawImage</span>(img, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">          ctx.<span class="property">filter</span> = <span class="string">&#x27;hue-rotate(90deg)&#x27;</span>;</span><br><span class="line">          ctx.<span class="title function_">drawImage</span>(img, <span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">          ctx.<span class="property">filter</span> = <span class="string">&#x27;invert(100%)&#x27;</span>;</span><br><span class="line">          ctx.<span class="title function_">drawImage</span>(img, <span class="number">200</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">          ctx.<span class="property">filter</span> = <span class="string">&#x27;opacity(25%)&#x27;</span>;</span><br><span class="line">          ctx.<span class="title function_">drawImage</span>(img, <span class="number">0</span>, <span class="number">200</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">          ctx.<span class="property">filter</span> = <span class="string">&#x27;brightness(0.4)&#x27;</span>;</span><br><span class="line">          ctx.<span class="title function_">drawImage</span>(img, <span class="number">100</span>, <span class="number">200</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">          ctx.<span class="property">filter</span> = <span class="string">&#x27;contrast(200%)&#x27;</span>;</span><br><span class="line">          ctx.<span class="title function_">drawImage</span>(img, <span class="number">200</span>, <span class="number">200</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">          ctx.<span class="property">filter</span> = <span class="string">&#x27;blur(5px)&#x27;</span>;</span><br><span class="line">          ctx.<span class="title function_">drawImage</span>(img, <span class="number">0</span>, <span class="number">300</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">          <span class="keyword">let</span> result = ctx.<span class="title function_">toDataURL</span>()</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">info</span>(result)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=YzM3NTgyOGQ1ODFjNzc3MzMzOGZiY2Y0MjI4YTY3N2Rfbk1sNVZnWURZZHZOR3dncFVPMTdLazRGc2dxQW5uU1BfVG9rZW46Um5GVmJjQWhTb0hSczN4VFNna2N4c1FhbmRoXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h4 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h4><p>以下方法在隐藏页面中调用会产生缓存，应避免在隐藏页面中频繁刷新Canvas。</p>
<h5 id="fillRect"><a href="#fillRect" class="headerlink" title="fillRect"></a>fillRect</h5><p>fillRect(x: number, y: number, w: number, h: number): void</p>
<p>填充一个矩形。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>x</td>
<td>number</td>
<td>是</td>
<td>指定矩形左上角点的x坐标。默认单位：vp。</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>是</td>
<td>指定矩形左上角点的y坐标。默认单位：vp。</td>
</tr>
<tr>
<td>w</td>
<td>number</td>
<td>是</td>
<td>指定矩形的宽度。默认单位：vp。</td>
</tr>
<tr>
<td>h</td>
<td>number</td>
<td>是</td>
<td>指定矩形的高度。默认单位：vp。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">FillRect</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;rgb(213,213,213)&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">30</span>, <span class="number">30</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">       &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MGJkYjNiM2U0NzQ0YzhiMWE5YWY0NGQ4N2VjMmQzM2JfTHlJTjFQTEhqRWRyVld2eU9na0FLSVlsUHI0VkxzSFJfVG9rZW46VHpHQmJqbDR1b0lybUh4TFFNRWM4eDN2blZjXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="strokeRect"><a href="#strokeRect" class="headerlink" title="strokeRect"></a>strokeRect</h5><p>strokeRect(x: number, y: number, w: number, h: number): void</p>
<p>绘制具有边框的矩形，矩形内部不填充。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>x</td>
<td>number</td>
<td>是</td>
<td>指定矩形的左上角x坐标。默认单位：vp。</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>是</td>
<td>指定矩形的左上角y坐标。默认单位：vp。</td>
</tr>
<tr>
<td>w</td>
<td>number</td>
<td>是</td>
<td>指定矩形的宽度。默认单位：vp。</td>
</tr>
<tr>
<td>h</td>
<td>number</td>
<td>是</td>
<td>指定矩形的高度。默认单位：vp。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">StrokeRect</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">strokeRect</span>(<span class="number">30</span>, <span class="number">30</span>, <span class="number">200</span>, <span class="number">150</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmRhMzI4NjVjYmQxYTY3NTFmZTcyZTdjZGFlNjQ2NjlfTzBTYURYOUU4ZGo3SWNPVjJHVmUzZUNJS1FhYWM2NlhfVG9rZW46TzJrYWJCVkRCb0prdFB4clpaVGN5RTk2blNnXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="clearRect"><a href="#clearRect" class="headerlink" title="clearRect"></a>clearRect</h5><p>clearRect(x: number, y: number, w: number, h: number): void</p>
<p>删除指定区域内的绘制内容。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>x</td>
<td>number</td>
<td>是</td>
<td>指定矩形上的左上角x坐标。默认单位：vp。</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>是</td>
<td>指定矩形上的左上角y坐标。默认单位：vp。</td>
</tr>
<tr>
<td>w</td>
<td>number</td>
<td>是</td>
<td>指定矩形的宽度。默认单位：vp。</td>
</tr>
<tr>
<td>h</td>
<td>number</td>
<td>是</td>
<td>指定矩形的高度。默认单位：vp。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ClearRect</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(0,0,255)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">20</span>,<span class="number">20</span>,<span class="number">200</span>,<span class="number">200</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">clearRect</span>(<span class="number">30</span>,<span class="number">30</span>,<span class="number">150</span>,<span class="number">100</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWRiMTBkOGQxNzgyZTE5NzhhMjA0YjVlOWQ0OTEyMThfYzZKY1NyMlFmd0ZVeUlwU2pnMFJyOUxBM2t6TkN5UDlfVG9rZW46SFc2N2JjUHhab2Fybmp4b1pLOWNiSUVibmllXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="fillText"><a href="#fillText" class="headerlink" title="fillText"></a>fillText</h5><p>fillText(text: string, x: number, y: number, maxWidth?: number): void</p>
<p>绘制填充类文本。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>text</td>
<td>string</td>
<td>是</td>
<td>需要绘制的文本内容。</td>
</tr>
<tr>
<td>x</td>
<td>number</td>
<td>是</td>
<td>需要绘制的文本的左下角x坐标。默认单位：vp。</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>是</td>
<td>需要绘制的文本的左下角y坐标。默认单位：vp。</td>
</tr>
<tr>
<td>maxWidth</td>
<td>number</td>
<td>否</td>
<td>指定文本允许的最大宽度。默认单位：vp。默认值：不限制宽度。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">FillText</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">font</span> = <span class="string">&#x27;30px sans-serif&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="string">&quot;Hello World!&quot;</span>, <span class="number">20</span>, <span class="number">100</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MzI0YjdkNGViZWFjYTQ0YWZmZDA5ZGIzYjRlYzFmMzRfclNCMEE4TXBxM2poQTJta2Vpd2VNVjYyOFNhR1o4VGVfVG9rZW46WkNXa2JPSTBMb1lNQk54Nk8zcGNBRFNibkVjXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="strokeText"><a href="#strokeText" class="headerlink" title="strokeText"></a>strokeText</h5><p>strokeText(text: string, x: number, y: number, maxWidth?: number): void</p>
<p>绘制描边类文本。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>text</td>
<td>string</td>
<td>是</td>
<td>需要绘制的文本内容。</td>
</tr>
<tr>
<td>x</td>
<td>number</td>
<td>是</td>
<td>需要绘制的文本的左下角x坐标。默认单位：vp。</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>是</td>
<td>需要绘制的文本的左下角y坐标。默认单位：vp。</td>
</tr>
<tr>
<td>maxWidth</td>
<td>number</td>
<td>否</td>
<td>需要绘制的文本的最大宽度。默认单位：vp。默认值：不限制宽度。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">StrokeText</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;rgb(213,213,213)&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">font</span> = <span class="string">&#x27;50vp sans-serif&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">strokeText</span>(<span class="string">&quot;Hello World!&quot;</span>, <span class="number">20</span>, <span class="number">60</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=YmJjZGFkZjU1NWZkZjAxZTA1MTIzZWI5YTAzZmUyMTdfc0p4dXNWb1hkOWhKWmlkMVhSb2hLcHN3ZlN4b1FBMkFfVG9rZW46WFRVWmJEc0Vnb25VOHh4YXF6Y2N1eFN1bnZmXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="measureText"><a href="#measureText" class="headerlink" title="measureText"></a>measureText</h5><p>measureText(text: string): TextMetrics</p>
<p>该方法返回一个文本测算的对象，通过该对象可以获取指定文本的宽度值。不同设备上获取的宽度值可能不同。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>text</td>
<td>string</td>
<td>是</td>
<td>需要进行测量的文本。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">MeasureText</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;rgb(213,213,213)&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">font</span> = <span class="string">&#x27;50px sans-serif&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="string">&quot;Hello World!&quot;</span>, <span class="number">20</span>, <span class="number">100</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillText</span>(<span class="string">&quot;width:&quot;</span> + <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">measureText</span>(<span class="string">&quot;Hello World!&quot;</span>).<span class="property">width</span>, <span class="number">20</span>, <span class="number">200</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NmM3NjU4M2I5NTY3ODFiNzQ1NDY4YjI5M2RmNGExMGVfd3dxVmJYRkcyTFdOMEx3WWlWZ2lRNXF3YU9YcWZxc0VfVG9rZW46WDJYOGJnSVNub0JZaFB4a0NvM2NSYU1ybktiXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="stroke"><a href="#stroke" class="headerlink" title="stroke"></a>stroke</h5><p>stroke(): void</p>
<p>根据当前的路径，进行边框绘制操作。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Stroke</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">moveTo</span>(<span class="number">125</span>, <span class="number">25</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">lineTo</span>(<span class="number">125</span>, <span class="number">105</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">lineTo</span>(<span class="number">175</span>, <span class="number">105</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">lineTo</span>(<span class="number">175</span>, <span class="number">25</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">strokeStyle</span> = <span class="string">&#x27;rgb(255,0,0)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NTg1Y2NmMTcxMTRlOTMyNjYzOWRiOTkxMWNmNjgyNzlfRnZFZVRZbm8yTkVwaUF5dkk0cXBCRDZrNDhVcmRkTVdfVG9rZW46QjE4RmJFWlkwb3J1MVN4MDhJcWNWYm1vbnBnXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="stroke-1"><a href="#stroke-1" class="headerlink" title="stroke"></a>stroke</h5><p>stroke(path: Path2D): void</p>
<p>根据指定的路径，进行边框绘制操作。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>path</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-path2d-V14">Path2D</a></td>
<td>是</td>
<td>需要绘制的Path2D。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Stroke</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">path2Da</span>: <span class="title class_">Path2D</span> = <span class="keyword">new</span> <span class="title class_">Path2D</span>()</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">path2Da</span>.<span class="title function_">moveTo</span>(<span class="number">25</span>, <span class="number">25</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">path2Da</span>.<span class="title function_">lineTo</span>(<span class="number">25</span>, <span class="number">105</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">path2Da</span>.<span class="title function_">lineTo</span>(<span class="number">75</span>, <span class="number">105</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">path2Da</span>.<span class="title function_">lineTo</span>(<span class="number">75</span>, <span class="number">25</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">strokeStyle</span> = <span class="string">&#x27;rgb(0,0,255)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>(<span class="variable language_">this</span>.<span class="property">path2Da</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=Njc1ZDUzYTY0MTY1NzU0ODUzYzFkMDk1YjFkMjI3NjNfbWZ6NWZZTW1uc1BUZWRmTjE2ZEEyMVd4T0RYNEVTckZfVG9rZW46UDczUmJyNEFzb1ZnejN4M01Ub2NtUElqbm1jXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="beginPath"><a href="#beginPath" class="headerlink" title="beginPath"></a>beginPath</h5><p>beginPath(): void</p>
<p>创建一个新的绘制路径。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">BeginPath</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineWidth</span> = <span class="number">6</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">strokeStyle</span> = <span class="string">&#x27;#0000ff&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">moveTo</span>(<span class="number">15</span>, <span class="number">80</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">lineTo</span>(<span class="number">280</span>, <span class="number">160</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=Yzk4MDMxYjg3OWQ1MjExMjQ1NjNlYWZlZTNiYzFmNjlfMEFxeVJobm4wNG1FNXp0QVJwbTNFVXh6bkZpV3U3Um1fVG9rZW46UDVROGJPN3RDbzVDemt4cmdEVWM4amMzbm1oXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="moveTo"><a href="#moveTo" class="headerlink" title="moveTo"></a>moveTo</h5><p>moveTo(x: number, y: number): void</p>
<p>路径从当前点移动到指定点。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>x</td>
<td>number</td>
<td>是</td>
<td>指定位置的x坐标。默认单位：vp。</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>是</td>
<td>指定位置的y坐标。默认单位：vp。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">MoveTo</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">moveTo</span>(<span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">lineTo</span>(<span class="number">280</span>, <span class="number">160</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=YWVhMTQzMmRkMjkwNWIwZWE1Y2FkOGZhZWYwNDNiNzNfbFdRYmVETlU1cHhCbklRUTV2SEh2WU1BSkhwbzhMT1ZfVG9rZW46TlRpMGJaWDFvb2hKenV4S2lMemNsUURZbnRjXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="lineTo"><a href="#lineTo" class="headerlink" title="lineTo"></a>lineTo</h5><p>lineTo(x: number, y: number): void</p>
<p>从当前点到指定点进行路径连接。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>x</td>
<td>number</td>
<td>是</td>
<td>指定位置的x坐标。默认单位：vp。</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>是</td>
<td>指定位置的y坐标。默认单位：vp。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">LineTo</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">moveTo</span>(<span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">lineTo</span>(<span class="number">280</span>, <span class="number">160</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=OGM3NjA3NDg2MDBhZGY3ZmYxNzNlZGZhMGFkMjQzMzBfb202emdTc3hqMG94Y09EdnRyWkZ3alVWZmZrNHpQeG5fVG9rZW46Wkszd2JBMk5zb3VoUjR4Rm1Nd2NXeVZkbjVjXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="closePath"><a href="#closePath" class="headerlink" title="closePath"></a>closePath</h5><p>closePath(): void</p>
<p>结束当前路径形成一个封闭路径。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ClosePath</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>()</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">moveTo</span>(<span class="number">30</span>, <span class="number">30</span>)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">lineTo</span>(<span class="number">110</span>, <span class="number">30</span>)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">lineTo</span>(<span class="number">70</span>, <span class="number">90</span>)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">closePath</span>()</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=YzEzMTcxOGRjM2QyMmM5NGIzYjc4ZGNhNDI1Y2NkYjhfVThDczRMYnR3Z2VrU24wY01UZm0wNWsyRlpVMTIwMUZfVG9rZW46V0cwRWI1R3JWb09pdGF4QTZBZ2NHYTc2bndkXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="createPattern"><a href="#createPattern" class="headerlink" title="createPattern"></a>createPattern</h5><p>createPattern(image: ImageBitmap, repetition: string | null): CanvasPattern | null</p>
<p>通过指定图像和重复方式创建图片填充的模板。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>image</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-imagebitmap-V14">ImageBitmap</a></td>
<td>是</td>
<td>图源对象，具体参考ImageBitmap对象。</td>
</tr>
<tr>
<td>repetition</td>
<td>string | null</td>
<td>是</td>
<td>设置图像重复的方式：’repeat’：沿x轴和y轴重复绘制图像；’repeat-x’：沿x轴重复绘制图像；’repeat-y’：沿y轴重复绘制图像；’no-repeat’：不重复绘制图像；’clamp’：在原始边界外绘制时，超出部分使用边缘的颜色绘制；’mirror’：沿x轴和y轴重复翻转绘制图像。</td>
</tr>
</tbody></table>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-canvaspattern-V14#canvaspattern">CanvasPattern</a> | null</td>
<td>通过指定图像和重复方式创建图片填充的模板对象。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CreatePattern</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">img</span>:<span class="title class_">ImageBitmap</span> = <span class="keyword">new</span> <span class="title class_">ImageBitmap</span>(<span class="string">&quot;common/images/icon.jpg&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="keyword">let</span> pattern = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">createPattern</span>(<span class="variable language_">this</span>.<span class="property">img</span>, <span class="string">&#x27;repeat&#x27;</span>)</span><br><span class="line">          <span class="keyword">if</span> (pattern) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = pattern</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, <span class="number">200</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=OGZkZjA3NmM5ODgxMTFkMzMyODA1Y2IwOGFhODMxNDdfOGtNZG0xbmxmaG9GUVlWVUF2SGlKcXA3T3lva3FEU3ZfVG9rZW46U29NOWJCTEk3b2tBb3Z4ejNzb2N1NGZ5bmRjXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="bezierCurveTo"><a href="#bezierCurveTo" class="headerlink" title="bezierCurveTo"></a>bezierCurveTo</h5><p>bezierCurveTo(cp1x: number, cp1y: number, cp2x: number, cp2y: number, x: number, y: number): void</p>
<p>创建三次贝赛尔曲线的路径。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>cp1x</td>
<td>number</td>
<td>是</td>
<td>第一个贝塞尔参数的x坐标值。默认单位：vp。</td>
</tr>
<tr>
<td>cp1y</td>
<td>number</td>
<td>是</td>
<td>第一个贝塞尔参数的y坐标值。默认单位：vp。</td>
</tr>
<tr>
<td>cp2x</td>
<td>number</td>
<td>是</td>
<td>第二个贝塞尔参数的x坐标值。默认单位：vp。</td>
</tr>
<tr>
<td>cp2y</td>
<td>number</td>
<td>是</td>
<td>第二个贝塞尔参数的y坐标值。默认单位：vp。</td>
</tr>
<tr>
<td>x</td>
<td>number</td>
<td>是</td>
<td>路径结束时的x坐标值。默认单位：vp。</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>是</td>
<td>路径结束时的y坐标值。默认单位：vp。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">BezierCurveTo</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">moveTo</span>(<span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">bezierCurveTo</span>(<span class="number">20</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">20</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=N2RiNWRhYTI3NTE4ODJkNjQyMWE2ZWVkMmQ4YzY0YzJfNlF0bGNHNWRxb3lobms0WnpoTjNsQlVvYTRkSU1VeVJfVG9rZW46SHBkNmJuSW9Gb1lFVDd4YUVyVWNINlprbm1lXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="quadraticCurveTo"><a href="#quadraticCurveTo" class="headerlink" title="quadraticCurveTo"></a>quadraticCurveTo</h5><p>quadraticCurveTo(cpx: number, cpy: number, x: number, y: number): void</p>
<p>创建二次贝赛尔曲线的路径。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>cpx</td>
<td>number</td>
<td>是</td>
<td>贝塞尔参数的x坐标值。默认单位：vp。</td>
</tr>
<tr>
<td>cpy</td>
<td>number</td>
<td>是</td>
<td>贝塞尔参数的y坐标值。默认单位：vp。</td>
</tr>
<tr>
<td>x</td>
<td>number</td>
<td>是</td>
<td>路径结束时的x坐标值。默认单位：vp。</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>是</td>
<td>路径结束时的y坐标值。默认单位：vp。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">QuadraticCurveTo</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">moveTo</span>(<span class="number">20</span>, <span class="number">20</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">quadraticCurveTo</span>(<span class="number">100</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">20</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NTg2YWRlM2ZlNzBhM2ViOTc2YTE3Y2ZlNGU4NzI0YTNfUW1WUkhOQkhsVFdvaDY1dFhoNUY4YlFiVHhVTEZYTEJfVG9rZW46VkMxUGJ5MjJjb1cyTEt4OVZXamNVMm1hbjVnXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="arc"><a href="#arc" class="headerlink" title="arc"></a>arc</h5><p>arc(x: number, y: number, radius: number, startAngle: number, endAngle: number, counterclockwise?: boolean): void</p>
<p>绘制弧线路径。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>x</td>
<td>number</td>
<td>是</td>
<td>弧线圆心的x坐标值。默认单位：vp。</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>是</td>
<td>弧线圆心的y坐标值。默认单位：vp。</td>
</tr>
<tr>
<td>radius</td>
<td>number</td>
<td>是</td>
<td>弧线的圆半径。默认单位：vp。</td>
</tr>
<tr>
<td>startAngle</td>
<td>number</td>
<td>是</td>
<td>弧线的起始弧度。单位：弧度</td>
</tr>
<tr>
<td>endAngle</td>
<td>number</td>
<td>是</td>
<td>弧线的终止弧度。单位：弧度</td>
</tr>
<tr>
<td>counterclockwise</td>
<td>boolean</td>
<td>否</td>
<td>是否逆时针绘制圆弧。true:逆时针方向绘制椭圆。false:顺时针方向绘制椭圆。默认值：false。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Arc</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">arc</span>(<span class="number">100</span>, <span class="number">75</span>, <span class="number">50</span>, <span class="number">0</span>, <span class="number">6.28</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDMyYTBmMDk1ZWU4NDdkZGZkODIzYWQzYjc5ODA5YmVfeEhING5kNWdQbEJXYnJQUEtDVlBzZFo2WVRkYWVEamZfVG9rZW46Sjh1b2JoSlRhb0tFTXF4RncxU2NNVEhRbnNiXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="arcTo"><a href="#arcTo" class="headerlink" title="arcTo"></a>arcTo</h5><p>arcTo(x1: number, y1: number, x2: number, y2: number, radius: number): void</p>
<p>依据给定的控制点和圆弧半径创建圆弧路径。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>x1</td>
<td>number</td>
<td>是</td>
<td>第一个控制点的x坐标值。默认单位：vp。</td>
</tr>
<tr>
<td>y1</td>
<td>number</td>
<td>是</td>
<td>第一个控制点的y坐标值。默认单位：vp。</td>
</tr>
<tr>
<td>x2</td>
<td>number</td>
<td>是</td>
<td>第二个控制点的x坐标值。默认单位：vp。</td>
</tr>
<tr>
<td>y2</td>
<td>number</td>
<td>是</td>
<td>第二个控制点的y坐标值。默认单位：vp。</td>
</tr>
<tr>
<td>radius</td>
<td>number</td>
<td>是</td>
<td>圆弧的圆半径值。默认单位：vp。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ArcTo</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="comment">// 切线</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">strokeStyle</span> = <span class="string">&#x27;#808080&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineWidth</span> = <span class="number">1.5</span>;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">moveTo</span>(<span class="number">360</span>, <span class="number">20</span>);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">lineTo</span>(<span class="number">360</span>, <span class="number">170</span>);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">lineTo</span>(<span class="number">110</span>, <span class="number">170</span>);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>();</span><br><span class="line">          </span><br><span class="line">          <span class="comment">// 圆弧</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">strokeStyle</span> = <span class="string">&#x27;#000000&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineWidth</span> = <span class="number">3</span>;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">moveTo</span>(<span class="number">360</span>, <span class="number">20</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">arcTo</span>(<span class="number">360</span>, <span class="number">170</span>, <span class="number">110</span>, <span class="number">170</span>, <span class="number">150</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">          </span><br><span class="line">          <span class="comment">// 起始点</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>();</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;#00ff00&#x27;</span>;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">arc</span>(<span class="number">360</span>, <span class="number">20</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fill</span>();</span><br><span class="line">          </span><br><span class="line">          <span class="comment">// 控制点</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>();</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;#ff0000&#x27;</span>;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">arc</span>(<span class="number">360</span>, <span class="number">170</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">arc</span>(<span class="number">110</span>, <span class="number">170</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fill</span>();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NjMyZTMzNjNiODFlY2UzM2Y2ZDg5YWQyYmViOThiNDNfRVVLenE4cjBMM2x3UWtHWFN0Y0NiM1ZiVjAzNTltQkhfVG9rZW46RHd3R2Jzc2hvb3lLVlN4MkhFQ2Nhd1dwbnBjXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<p>此示例中，arcTo()创建的圆弧为黑色，圆弧的两条切线为灰色。控制点为红色，起始点为绿色。</p>
<p>可以想象两条切线：一条切线从起始点到第一个控制点，另一条切线从第一个控制点到第二个控制点。arcTo()在这两条切线间创建一个圆弧，并使圆弧与这两条切线都相切。</p>
<h5 id="ellipse"><a href="#ellipse" class="headerlink" title="ellipse"></a>ellipse</h5><p>ellipse(x: number, y: number, radiusX: number, radiusY: number, rotation: number, startAngle: number, endAngle: number, counterclockwise?: boolean): void</p>
<p>在规定的矩形区域绘制一个椭圆。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>x</td>
<td>number</td>
<td>是</td>
<td>椭圆圆心的x轴坐标。默认单位：vp。</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>是</td>
<td>椭圆圆心的y轴坐标。默认单位：vp。</td>
</tr>
<tr>
<td>radiusX</td>
<td>number</td>
<td>是</td>
<td>椭圆x轴的半径长度。默认单位：vp。</td>
</tr>
<tr>
<td>radiusY</td>
<td>number</td>
<td>是</td>
<td>椭圆y轴的半径长度。默认单位：vp。</td>
</tr>
<tr>
<td>rotation</td>
<td>number</td>
<td>是</td>
<td>椭圆的旋转角度。单位：弧度。</td>
</tr>
<tr>
<td>startAngle</td>
<td>number</td>
<td>是</td>
<td>椭圆绘制的起始点角度。单位：弧度。</td>
</tr>
<tr>
<td>endAngle</td>
<td>number</td>
<td>是</td>
<td>椭圆绘制的结束点角度。单位：弧度。</td>
</tr>
<tr>
<td>counterclockwise</td>
<td>boolean</td>
<td>否</td>
<td>是否以逆时针方向绘制椭圆。true:逆时针方向绘制椭圆。false:顺时针方向绘制椭圆。默认值：false。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CanvasExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">ellipse</span>(<span class="number">200</span>, <span class="number">200</span>, <span class="number">50</span>, <span class="number">100</span>, <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">0.25</span>, <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">0.5</span>, <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>, <span class="literal">false</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">beginPath</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">ellipse</span>(<span class="number">200</span>, <span class="number">300</span>, <span class="number">50</span>, <span class="number">100</span>, <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">0.25</span>, <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">0.5</span>, <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>, <span class="literal">true</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=OTZjZTg5ZTc2YzI0YjMzOTU1YzQwYTNlOTg3OGNiMjhfeWZXRVdkVno4ejlKWnREekpvcHJKS29aTE1CZ0hMbHFfVG9rZW46VWM3WmJyM29vb2tXREx4N044QWNxQ2dSbkhiXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="rect"><a href="#rect" class="headerlink" title="rect"></a>rect</h5><p>rect(x: number, y: number, w: number, h: number): void</p>
<p>创建矩形路径。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>x</td>
<td>number</td>
<td>是</td>
<td>指定矩形的左上角x坐标值。默认单位：vp。</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>是</td>
<td>指定矩形的左上角y坐标值。默认单位：vp。</td>
</tr>
<tr>
<td>w</td>
<td>number</td>
<td>是</td>
<td>指定矩形的宽度。默认单位：vp。</td>
</tr>
<tr>
<td>h</td>
<td>number</td>
<td>是</td>
<td>指定矩形的高度。默认单位：vp。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CanvasExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">rect</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">100</span>) <span class="comment">// Create a 100*100 rectangle at (20, 20)</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmE5Yzc3MjcxMWM2YzM1NTdhZTRiZGQwMzYyMmJhNDVfdVhQQTlIYjF2bTdqODE4UVIwQlJPS3E2UlJwMGw3MEtfVG9rZW46Wkg3SmJ2cTdXb084aVh4STFlRGNwY0RRbjFlXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="fill"><a href="#fill" class="headerlink" title="fill"></a>fill</h5><p>fill(fillRule?: CanvasFillRule): void</p>
<p>对封闭路径进行填充。</p>
<p><strong>参数:</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>fillRule</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvasfillrule">CanvasFillRule</a></td>
<td>否</td>
<td>指定要填充对象的规则。可选参数为：”nonzero”, “evenodd”。默认值：”nonzero”。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Fill</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">rect</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">100</span>) <span class="comment">// Create a 100*100 rectangle at (20, 20)</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fill</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWE5M2ZhZjliNzc2YmNjZmZmZWQ5NjA4NTY0YTYwMzFfM2FzRWRDSWM1ajNURzhUalRwR1Y5bFVJN2R5QzJQSUlfVG9rZW46VUhvY2JNZTFxb1p2Sld4STNod2MwNURzbjRkXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<p>fill(path: Path2D, fillRule?: CanvasFillRule): void</p>
<p>对封闭路径进行填充。</p>
<p><strong>参数:</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>path</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-path2d-V14">Path2D</a></td>
<td>是</td>
<td>Path2D填充路径。</td>
</tr>
<tr>
<td>fillRule</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvasfillrule">CanvasFillRule</a></td>
<td>否</td>
<td>指定要填充对象的规则。可选参数为：”nonzero”, “evenodd”。默认值：”nonzero”。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Fill</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="keyword">let</span> region = <span class="keyword">new</span> <span class="title class_">Path2D</span>()</span><br><span class="line">          region.<span class="title function_">moveTo</span>(<span class="number">30</span>, <span class="number">90</span>)</span><br><span class="line">          region.<span class="title function_">lineTo</span>(<span class="number">110</span>, <span class="number">20</span>)</span><br><span class="line">          region.<span class="title function_">lineTo</span>(<span class="number">240</span>, <span class="number">130</span>)</span><br><span class="line">          region.<span class="title function_">lineTo</span>(<span class="number">60</span>, <span class="number">130</span>)</span><br><span class="line">          region.<span class="title function_">lineTo</span>(<span class="number">190</span>, <span class="number">20</span>)</span><br><span class="line">          region.<span class="title function_">lineTo</span>(<span class="number">270</span>, <span class="number">90</span>)</span><br><span class="line">          region.<span class="title function_">closePath</span>()</span><br><span class="line">          <span class="comment">// Fill path</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;#00ff00&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fill</span>(region, <span class="string">&quot;evenodd&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MWNiMTQzMjY0NDU3ZGM5YmEzY2NlMTg1YjRiODgyNjVfajh6SUxKNnVZeHhKMnpZWlBSRmQzdHpjbXhUcU93MWJfVG9rZW46TXBXeGJZclk5b3JZcXN4eERmQmN0NE12bmhoXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="clip"><a href="#clip" class="headerlink" title="clip"></a>clip</h5><p>clip(fillRule?: CanvasFillRule): void</p>
<p>设置当前路径为剪切路径。</p>
<p><strong>参数:</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>fillRule</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvasfillrule">CanvasFillRule</a></td>
<td>否</td>
<td>指定要剪切对象的规则。可选参数为：”nonzero”, “evenodd”。默认值：”nonzero”。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Clip</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">rect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">200</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">clip</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&quot;rgb(255,0,0)&quot;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, <span class="number">200</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=M2E5Njg4NTdmNmY5MzY5ZjM2YTkwZmNiMjQwMTk0ZGJfRnJvRUZPa0tqa2haRGJ5UlhoNFJNZnhqS0hWWnVzTFpfVG9rZW46VHJBWGJZeFgyb0pCbDd4MVYyMmN2emt0bjI2XzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<p>clip(path: Path2D, fillRule?: CanvasFillRule): void</p>
<p>设置当前路径为剪切路径</p>
<p><strong>参数:</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>path</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-path2d-V14">Path2D</a></td>
<td>是</td>
<td>Path2D剪切路径。</td>
</tr>
<tr>
<td>fillRule</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvasfillrule">CanvasFillRule</a></td>
<td>否</td>
<td>指定要剪切对象的规则。可选参数为：”nonzero”, “evenodd”。默认值：”nonzero”。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Clip</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="keyword">let</span> region = <span class="keyword">new</span> <span class="title class_">Path2D</span>()</span><br><span class="line">          region.<span class="title function_">moveTo</span>(<span class="number">30</span>, <span class="number">90</span>)</span><br><span class="line">          region.<span class="title function_">lineTo</span>(<span class="number">110</span>, <span class="number">20</span>)</span><br><span class="line">          region.<span class="title function_">lineTo</span>(<span class="number">240</span>, <span class="number">130</span>)</span><br><span class="line">          region.<span class="title function_">lineTo</span>(<span class="number">60</span>, <span class="number">130</span>)</span><br><span class="line">          region.<span class="title function_">lineTo</span>(<span class="number">190</span>, <span class="number">20</span>)</span><br><span class="line">          region.<span class="title function_">lineTo</span>(<span class="number">270</span>, <span class="number">90</span>)</span><br><span class="line">          region.<span class="title function_">closePath</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">clip</span>(region,<span class="string">&quot;evenodd&quot;</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&quot;rgb(0,255,0)&quot;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">width</span>, <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">height</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ODg2NjhkMzM3OWJjNjE5OWRjOTUxNDg3N2MwOTQ1OGRfSVV4Sjh4VjdlOGl3eUkwcFpMVDkwemh5SlBDNk42eURfVG9rZW46R1RnSWJPTEU2b3ROVjh4S3Z2bWN0QmpxbnFmXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="reset"><a href="#reset" class="headerlink" title="reset"></a>reset</h5><p>reset(): void</p>
<p>将CanvasRenderingContext2D重置为其默认状态，清除后台缓冲区、绘制状态栈、绘制路径和样式。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Reset</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;#0000ff&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">150</span>, <span class="number">100</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">reset</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">20</span>, <span class="number">150</span>, <span class="number">150</span>, <span class="number">100</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTg5ODc4NDdkMjBlZDA5YTIxNjhmZTYzNzAwYWU5MzdfWHRwVlpYS3hzeXYwSXZzY2dDZEpLd3lIQkl4QVRJSVdfVG9rZW46RnpkMGIzT0ZXb3ZKQ2x4ZHNuY2NnZEdGbm9mXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="saveLayer"><a href="#saveLayer" class="headerlink" title="saveLayer"></a>saveLayer</h5><p>saveLayer(): void</p>
<p>创建一个图层。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct saveLayer &#123;</span><br><span class="line"><span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line"><span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">    <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">      .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&quot;#0000ff&quot;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">50</span>,<span class="number">100</span>,<span class="number">300</span>,<span class="number">100</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&quot;#00ffff&quot;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">50</span>,<span class="number">150</span>,<span class="number">300</span>,<span class="number">100</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">globalCompositeOperation</span> = <span class="string">&#x27;destination-over&#x27;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">saveLayer</span>()</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">globalCompositeOperation</span> = <span class="string">&#x27;source-over&#x27;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&quot;#ff0000&quot;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">100</span>,<span class="number">50</span>,<span class="number">100</span>,<span class="number">300</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&quot;#00ff00&quot;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">150</span>,<span class="number">50</span>,<span class="number">100</span>,<span class="number">300</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">restoreLayer</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NGU4NTcyNzhhZWNjZWIzY2EyNzk1Y2IyNmI1ZTFkZmVfeUd0NjAxT245T1RiMXZIMmJTMmlLOXgzYlhwb1pPUjdfVG9rZW46Q01ZeGJWeHJIbzVKOTJ4OGRWQWNZd09ZbmdiXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="restoreLayer"><a href="#restoreLayer" class="headerlink" title="restoreLayer"></a>restoreLayer</h5><p>restoreLayer(): void</p>
<p>恢复图像变换和裁剪状态至saveLayer前的状态，并将图层绘制在canvas上。restoreLayer示例代码同saveLayer。</p>
<h5 id="resetTransform"><a href="#resetTransform" class="headerlink" title="resetTransform"></a>resetTransform</h5><p>resetTransform(): void</p>
<p>使用单位矩阵重新设置当前矩阵。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ResetTransform</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">setTransform</span>(<span class="number">1</span>,<span class="number">0.5</span>, -<span class="number">0.5</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(0,0,255)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">resetTransform</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(255,0,0)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=OGZkNDg1NGJiNWI2NDY3M2ZmMzY2NjI1YWEzY2FhODBfOW1OMFNaT0JHdlBTMks2VjAySGVCUlZNblNvcjV3dTlfVG9rZW46S2k5M2Jqektlb3B3M2N4NGw1SWN4WEYyblllXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="rotate"><a href="#rotate" class="headerlink" title="rotate"></a>rotate</h5><p>rotate(angle: number): void</p>
<p>针对当前坐标轴进行顺时针旋转。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>angle</td>
<td>number</td>
<td>是</td>
<td>设置顺时针旋转的弧度值，可以通过 degree * Math.PI &#x2F; 180 将角度转换为弧度值。单位：弧度。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Rotate</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">rotate</span>(<span class="number">45</span> * <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">180</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">70</span>, <span class="number">20</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGE1OWVjMjkwMmRkZGM2OTA1YTljNDcwYTk2Njk4N2FfUkFpc1ppSVJGUTZmWWZjZWRGRlE3RzByRU5GMGR5SjVfVG9rZW46V0F3S2IySEh6b3pYcmZ4MnRwZmNIWUpBbmZnXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="scale"><a href="#scale" class="headerlink" title="scale"></a>scale</h5><p>scale(x: number, y: number): void</p>
<p>设置canvas画布的缩放变换属性，后续的绘制操作将按照缩放比例进行缩放。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>x</td>
<td>number</td>
<td>是</td>
<td>设置水平方向的缩放值。</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>是</td>
<td>设置垂直方向的缩放值。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Scale</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">lineWidth</span> = <span class="number">3</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">strokeRect</span>(<span class="number">30</span>, <span class="number">30</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">scale</span>(<span class="number">2</span>, <span class="number">2</span>) <span class="comment">// Scale to 200%</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">strokeRect</span>(<span class="number">30</span>, <span class="number">30</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MjkzMDhkMWRhNmIyNDA5MjI0YTgxOTI1YmQ3Yzc5ZWRfQ0FpRFU5WWlySzNXRE40bFFYRm9kMmZqWFV3TjZ3SkRfVG9rZW46UWV3V2JKVXFPb1AxM0l4cDFKOWN0UlVRbjdkXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="transform"><a href="#transform" class="headerlink" title="transform"></a>transform</h5><p>transform(a: number, b: number, c: number, d: number, e: number, f: number): void</p>
<p>transform方法对应一个变换矩阵，想对一个图形进行变化的时候，只要设置此变换矩阵相应的参数，对图形的各个定点的坐标分别乘以这个矩阵，就能得到新的定点的坐标。矩阵变换效果可叠加。</p>
<blockquote>
<p><strong>说明</strong></p>
<p>变换后的坐标计算方式（x和y为变换前坐标，x’和y’为变换后坐标）：</p>
<ul>
<li>x’ &#x3D; scaleX * x + skewY * y + translateX</li>
<li>y’ &#x3D; skewX * x + scaleY * y + translateY</li>
</ul>
</blockquote>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>a</td>
<td>number</td>
<td>是</td>
<td>scaleX: 指定水平缩放值。</td>
</tr>
<tr>
<td>b</td>
<td>number</td>
<td>是</td>
<td>skewY: 指定垂直倾斜值。</td>
</tr>
<tr>
<td>c</td>
<td>number</td>
<td>是</td>
<td>skewX: 指定水平倾斜值。</td>
</tr>
<tr>
<td>d</td>
<td>number</td>
<td>是</td>
<td>scaleY: 指定垂直缩放值。</td>
</tr>
<tr>
<td>e</td>
<td>number</td>
<td>是</td>
<td>translateX: 指定水平移动值。默认单位：vp。</td>
</tr>
<tr>
<td>f</td>
<td>number</td>
<td>是</td>
<td>translateY: 指定垂直移动值。默认单位：vp。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Transform</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(0,0,0)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">transform</span>(<span class="number">1</span>, <span class="number">0.5</span>, -<span class="number">0.5</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(255,0,0)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">transform</span>(<span class="number">1</span>, <span class="number">0.5</span>, -<span class="number">0.5</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(0,0,255)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MDYwYmUwMzRlNDZlYTc1YWI0MjI0MGExOGU1MTI2OTNfMVJZNDdObHFCaFhDN3B2TWJGem1iczRxczAxTHJCSW9fVG9rZW46RnprT2JJa1ZDb1JwSzR4N1ZYb2NJbHRZbmtmXzE3NDIxOTEwNzg6MTc0MjE5NDY3OF9WNA" alt="img"></p>
<h5 id="setTransform"><a href="#setTransform" class="headerlink" title="setTransform"></a>setTransform</h5><p>setTransform(a: number, b: number, c: number, d: number, e: number, f: number): void</p>
<p>setTransform方法使用的参数和transform()方法相同，但setTransform()方法会重置现有的变换矩阵并创建新的变换矩阵。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>a</td>
<td>number</td>
<td>是</td>
<td>scaleX: 指定水平缩放值。</td>
</tr>
<tr>
<td>b</td>
<td>number</td>
<td>是</td>
<td>skewY: 指定垂直倾斜值。</td>
</tr>
<tr>
<td>c</td>
<td>number</td>
<td>是</td>
<td>skewX: 指定水平倾斜值。</td>
</tr>
<tr>
<td>d</td>
<td>number</td>
<td>是</td>
<td>scaleY: 指定垂直缩放值。</td>
</tr>
<tr>
<td>e</td>
<td>number</td>
<td>是</td>
<td>translateX: 指定水平移动值。默认单位：vp。</td>
</tr>
<tr>
<td>f</td>
<td>number</td>
<td>是</td>
<td>translateY: 指定垂直移动值。默认单位：vp。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">SetTransform</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(255,0,0)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">setTransform</span>(<span class="number">1</span>,<span class="number">0.5</span>, -<span class="number">0.5</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;rgb(0,0,255)&#x27;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NGNmOTdjMWJjM2NkYjZkMDNiNGFmMjkxM2RhYTk0ZjZfM1FXdFpTc2gzSUlKMm9WeFBtaGZHZDVIZDA0UWxKcWhfVG9rZW46R0hoMGJtOW5vb1QzWHB4S0FjUWNBTkFXbmViXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<p>setTransform(transform?: Matrix2D): void</p>
<p>以Matrix2D对象为模板重置现有的变换矩阵并创建新的变换矩阵。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>transform</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-matrix2d-V14#Matrix2D">Matrix2D</a></td>
<td>否</td>
<td>变换矩阵。默认值：null。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TransFormDemo</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>);</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context1</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.  settings);</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context2</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;context1&#x27;</span>);</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context1</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;230vp&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;160vp&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context1</span>.<span class="title function_">fillRect</span>(<span class="number">100</span>, <span class="number">20</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context1</span>.<span class="title function_">setTransform</span>(<span class="number">1</span>, <span class="number">0.5</span>, -<span class="number">0.5</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context1</span>.<span class="title function_">fillRect</span>(<span class="number">100</span>, <span class="number">20</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;context2&#x27;</span>);</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context2</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;230vp&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;160vp&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#0ffff0&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context2</span>.<span class="title function_">fillRect</span>(<span class="number">100</span>, <span class="number">20</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">          <span class="keyword">let</span> storedTransform = <span class="variable language_">this</span>.<span class="property">context1</span>.<span class="title function_">getTransform</span>();</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context2</span>.<span class="title function_">setTransform</span>(storedTransform);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context2</span>.<span class="title function_">fillRect</span>(<span class="number">100</span>, <span class="number">20</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=M2U2YTRmY2IwZDM3N2I3ZDdlZGRjYmRlZGZkMWMzNGJfaVJ3OWp2Tkl6R3ZNNHlRc0JGMWN4cERjeTFBNXRHOHVfVG9rZW46VmlsN2JFOG91b3FnWUZ4WlNDbGNVQnI1bktkXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h5 id="getTransform"><a href="#getTransform" class="headerlink" title="getTransform"></a>getTransform</h5><p>getTransform(): Matrix2D</p>
<p>获取当前被应用到上下文的转换矩阵。</p>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-matrix2d-V14#Matrix2D">Matrix2D</a></td>
<td>矩阵对象。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TransFormDemo</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>);</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context1</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>);</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context2</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;context1&#x27;</span>);</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context1</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;230vp&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;120vp&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context1</span>.<span class="title function_">fillRect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context1</span>.<span class="title function_">setTransform</span>(<span class="number">1.2</span>, <span class="title class_">Math</span>.<span class="property">PI</span>/<span class="number">8</span>, <span class="title class_">Math</span>.<span class="property">PI</span>/<span class="number">6</span>, <span class="number">0.5</span>, <span class="number">30</span>, -<span class="number">25</span>);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context1</span>.<span class="title function_">fillRect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;context2&#x27;</span>);</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context2</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;230vp&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;120vp&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#0ffff0&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context2</span>.<span class="title function_">fillRect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">          <span class="keyword">let</span> storedTransform = <span class="variable language_">this</span>.<span class="property">context1</span>.<span class="title function_">getTransform</span>();</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Matrix [scaleX = &quot;</span> + storedTransform.<span class="property">scaleX</span> + <span class="string">&quot;, scaleY = &quot;</span> + storedTransform.<span class="property">scaleY</span> +</span><br><span class="line">          <span class="string">&quot;, rotateX = &quot;</span> + storedTransform.<span class="property">rotateX</span> + <span class="string">&quot;, rotateY = &quot;</span> + storedTransform.<span class="property">rotateY</span> +</span><br><span class="line">          <span class="string">&quot;, translateX = &quot;</span> + storedTransform.<span class="property">translateX</span> + <span class="string">&quot;, translateY = &quot;</span> + storedTransform.<span class="property">translateY</span> + <span class="string">&quot;]&quot;</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context2</span>.<span class="title function_">setTransform</span>(storedTransform);</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context2</span>.<span class="title function_">fillRect</span>(<span class="number">50</span>,<span class="number">50</span>,<span class="number">50</span>,<span class="number">50</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=YzI3MTJmZTI4OTNhYWVjNGNkNjg2MTM2OTg3MTRhNWZfaEVDd014Q1pNWG5SVE85NDAwMGlIb2RtUnEzaEVDMG9fVG9rZW46UXliQWJDOVlMb2pIaWt4RndxTmNuQ01mbkNiXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h5 id="translate"><a href="#translate" class="headerlink" title="translate"></a>translate</h5><p>translate(x: number, y: number): void</p>
<p>移动当前坐标系的原点。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>x</td>
<td>number</td>
<td>是</td>
<td>设置水平平移量。默认单位：vp。</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>是</td>
<td>设置竖直平移量。默认单位：vp。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Translate</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">translate</span>(<span class="number">70</span>, <span class="number">70</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MzI2NTRiOTJiMDA1OWIwODJlNWRjNTk5OTMzYmU0MTJfZzBySE02QTg3QWx4TWMyTW1FZWNIREdNQWJDYkZhR0dfVG9rZW46T1gwOWJCM2lVb1RNOTd4Vmhtd2M5Nk1GbmhnXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h5 id="drawImage"><a href="#drawImage" class="headerlink" title="drawImage"></a>drawImage</h5><p>drawImage(image: ImageBitmap | PixelMap, dx: number, dy: number): void</p>
<p>进行图像绘制。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>image</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-imagebitmap-V14">ImageBitmap</a>或<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/js-apis-image-V14#pixelmap7">PixelMap</a></td>
<td>是</td>
<td>图片资源，请参考ImageBitmap或PixelMap。</td>
</tr>
<tr>
<td>dx</td>
<td>number</td>
<td>是</td>
<td>绘制区域左上角在x轴的位置。默认单位：vp。</td>
</tr>
<tr>
<td>dy</td>
<td>number</td>
<td>是</td>
<td>绘制区域左上角在y轴的位置。默认单位：vp。</td>
</tr>
</tbody></table>
<p>drawImage(image: ImageBitmap | PixelMap, dx: number, dy: number, dw: number, dh: number): void</p>
<p>进行图像绘制。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>image</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-imagebitmap-V14">ImageBitmap</a>或<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/js-apis-image-V14#pixelmap7">PixelMap</a></td>
<td>是</td>
<td>图片资源，请参考ImageBitmap或PixelMap。</td>
</tr>
<tr>
<td>dx</td>
<td>number</td>
<td>是</td>
<td>绘制区域左上角在x轴的位置。默认单位：vp。</td>
</tr>
<tr>
<td>dy</td>
<td>number</td>
<td>是</td>
<td>绘制区域左上角在y轴的位置。默认单位：vp。</td>
</tr>
<tr>
<td>dw</td>
<td>number</td>
<td>是</td>
<td>绘制区域的宽度。当绘制区域的宽度和裁剪图像的宽度不一致时，将图像宽度拉伸或压缩为绘制区域的宽度。默认单位：vp。</td>
</tr>
<tr>
<td>dh</td>
<td>number</td>
<td>是</td>
<td>绘制区域的高度。当绘制区域的高度和裁剪图像的高度不一致时，将图像高度拉伸或压缩为绘制区域的高度。默认单位：vp。</td>
</tr>
</tbody></table>
<p>drawImage(image: ImageBitmap | PixelMap, sx: number, sy: number, sw: number, sh: number, dx: number, dy: number, dw: number, dh: number): void</p>
<p>进行图像绘制。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>image</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-imagebitmap-V14">ImageBitmap</a>或<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/js-apis-image-V14#pixelmap7">PixelMap</a></td>
<td>是</td>
<td>图片资源，请参考ImageBitmap或PixelMap。</td>
</tr>
<tr>
<td>sx</td>
<td>number</td>
<td>是</td>
<td>裁切源图像时距离源图像左上角的x坐标值。image类型为ImageBitmap时，默认单位：vp。image类型为PixelMap时，API Version 14前，默认单位：px；API Version 14及以后，默认单位：vp。</td>
</tr>
<tr>
<td>sy</td>
<td>number</td>
<td>是</td>
<td>裁切源图像时距离源图像左上角的y坐标值。image类型为ImageBitmap时，默认单位：vp。image类型为PixelMap时，API Version 14前，默认单位：px；API Version 14及以后，默认单位：vp。</td>
</tr>
<tr>
<td>sw</td>
<td>number</td>
<td>是</td>
<td>裁切源图像时需要裁切的宽度。image类型为ImageBitmap时，默认单位：vp。image类型为PixelMap时，API Version 14前，默认单位：px；API Version 14及以后，默认单位：vp。</td>
</tr>
<tr>
<td>sh</td>
<td>number</td>
<td>是</td>
<td>裁切源图像时需要裁切的高度。image类型为ImageBitmap时，默认单位：vp。image类型为PixelMap时，API Version 14前，默认单位：px；API Version 14及以后，默认单位：vp。</td>
</tr>
<tr>
<td>dx</td>
<td>number</td>
<td>是</td>
<td>绘制区域左上角在x轴的位置。默认单位：vp。</td>
</tr>
<tr>
<td>dy</td>
<td>number</td>
<td>是</td>
<td>绘制区域左上角在y轴的位置。默认单位：vp。</td>
</tr>
<tr>
<td>dw</td>
<td>number</td>
<td>是</td>
<td>绘制区域的宽度。当绘制区域的宽度和裁剪图像的宽度不一致时，将图像宽度拉伸或压缩为绘制区域的宽度。默认单位：vp。</td>
</tr>
<tr>
<td>dh</td>
<td>number</td>
<td>是</td>
<td>绘制区域的高度。当绘制区域的高度和裁剪图像的高度不一致时，将图像高度拉伸或压缩为绘制区域的高度。默认单位：vp。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ImageExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">img</span>: <span class="title class_">ImageBitmap</span> = <span class="keyword">new</span> <span class="title class_">ImageBitmap</span>(<span class="string">&quot;common/images/example.jpg&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">drawImage</span>(<span class="variable language_">this</span>.<span class="property">img</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">drawImage</span>(<span class="variable language_">this</span>.<span class="property">img</span>, <span class="number">0</span>, <span class="number">150</span>, <span class="number">300</span>, <span class="number">100</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">drawImage</span>(<span class="variable language_">this</span>.<span class="property">img</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">500</span>, <span class="number">500</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">400</span>, <span class="number">200</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=YjY0ODU5N2E3NTVmMDBjZmM2YzUwNmY2ZTgxNzVmZTBfMm5zcWx0aTdQN2xRSzhHNWxSRkFmdTIwdXFGQjRnTWtfVG9rZW46V2gzZWIwdUttb3RVZWF4WWRwbWNqMWVYbkpoXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h5 id="createImageData"><a href="#createImageData" class="headerlink" title="createImageData"></a>createImageData</h5><p>createImageData(sw: number, sh: number): ImageData</p>
<p>创建新的、空白的、指定大小的ImageData 对象，请参考<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-imagedata-V14">ImageData</a>，该接口存在内存拷贝行为，高耗时，应避免频繁使用。createImageData示例同putImageData。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>sw</td>
<td>number</td>
<td>是</td>
<td>ImageData的宽度。默认单位：vp。</td>
</tr>
<tr>
<td>sh</td>
<td>number</td>
<td>是</td>
<td>ImageData的高度。默认单位：vp。</td>
</tr>
</tbody></table>
<p>createImageData(imageData: ImageData): ImageData</p>
<p>根据一个现有的ImageData对象重新创建一个宽、高相同的ImageData对象（不会复制图像数据），请参考<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-imagedata-V14">ImageData</a>，该接口存在内存拷贝行为，高耗时，应避免频繁使用。createImageData示例同putImageData。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>imagedata</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-imagedata-V14">ImageData</a></td>
<td>是</td>
<td>现有的ImageData对象。</td>
</tr>
</tbody></table>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-imagedata-V14">ImageData</a></td>
<td>新的ImageData对象。</td>
</tr>
</tbody></table>
<h5 id="getPixelMap"><a href="#getPixelMap" class="headerlink" title="getPixelMap"></a>getPixelMap</h5><p>getPixelMap(sx: number, sy: number, sw: number, sh: number): PixelMap</p>
<p>以当前canvas指定区域内的像素创建<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/js-apis-image-V14#pixelmap7">PixelMap</a>对象，该接口存在内存拷贝行为，高耗时，应避免频繁使用。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>sx</td>
<td>number</td>
<td>是</td>
<td>需要输出的区域的左上角x坐标。默认单位：vp。</td>
</tr>
<tr>
<td>sy</td>
<td>number</td>
<td>是</td>
<td>需要输出的区域的左上角y坐标。默认单位：vp。</td>
</tr>
<tr>
<td>sw</td>
<td>number</td>
<td>是</td>
<td>需要输出的区域的宽度。默认单位：vp。</td>
</tr>
<tr>
<td>sh</td>
<td>number</td>
<td>是</td>
<td>需要输出的区域的高度。默认单位：vp。</td>
</tr>
</tbody></table>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/js-apis-image-V14#pixelmap7">PixelMap</a></td>
<td>新的PixelMap对象。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">GetPixelMap</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">img</span>: <span class="title class_">ImageBitmap</span> = <span class="keyword">new</span> <span class="title class_">ImageBitmap</span>(<span class="string">&quot;common/images/example.jpg&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">drawImage</span>(<span class="variable language_">this</span>.<span class="property">img</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">130</span>, <span class="number">130</span>)</span><br><span class="line">          <span class="keyword">let</span> pixelmap = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">getPixelMap</span>(<span class="number">150</span>, <span class="number">150</span>, <span class="number">130</span>, <span class="number">130</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">setPixelMap</span>(pixelmap)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDFkMTdkZWNhNzUzZDk5ODNjYjRlOTE1YjY1OTk2MjNfMFVFRDFFSGxNQ1AzdG1HQXViOXpvb0FwdE5OUnRyNkVfVG9rZW46TzFxVmJxU0o1b2ZCQXJ4ZWFNWmM1Z3h6bkFkXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h5 id="setPixelMap"><a href="#setPixelMap" class="headerlink" title="setPixelMap"></a>setPixelMap</h5><p>setPixelMap(value?: PixelMap): void</p>
<p>将当前传入<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/js-apis-image-V14#pixelmap7">PixelMap</a>对象绘制在画布上。setPixelMap示例同getPixelMap。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>value</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/js-apis-image-V14#pixelmap7">PixelMap</a></td>
<td>否</td>
<td>包含像素值的PixelMap对象默认值：null。</td>
</tr>
</tbody></table>
<h5 id="getImageData"><a href="#getImageData" class="headerlink" title="getImageData"></a>getImageData</h5><p>getImageData(sx: number, sy: number, sw: number, sh: number): ImageData</p>
<p>以当前canvas指定区域内的像素创建<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-imagedata-V14">ImageData</a>对象，该接口存在内存拷贝行为，高耗时，应避免频繁使用。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>sx</td>
<td>number</td>
<td>是</td>
<td>需要输出的区域的左上角x坐标。默认单位：vp。</td>
</tr>
<tr>
<td>sy</td>
<td>number</td>
<td>是</td>
<td>需要输出的区域的左上角y坐标。默认单位：vp。</td>
</tr>
<tr>
<td>sw</td>
<td>number</td>
<td>是</td>
<td>需要输出的区域的宽度。默认单位：vp。</td>
</tr>
<tr>
<td>sh</td>
<td>number</td>
<td>是</td>
<td>需要输出的区域的高度。默认单位：vp。</td>
</tr>
</tbody></table>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-imagedata-V14">ImageData</a></td>
<td>新的ImageData对象。</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>说明</strong></p>
<p>DevEco Studio的预览器不支持显示使用setPixelMap绘制的内容。</p>
</blockquote>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">GetImageData</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">img</span>:<span class="title class_">ImageBitmap</span> = <span class="keyword">new</span> <span class="title class_">ImageBitmap</span>(<span class="string">&quot;/common/images/1234.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">drawImage</span>(<span class="variable language_">this</span>.<span class="property">img</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">130</span>,<span class="number">130</span>)</span><br><span class="line">          <span class="keyword">let</span> imagedata = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">getImageData</span>(<span class="number">50</span>,<span class="number">50</span>,<span class="number">130</span>,<span class="number">130</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">putImageData</span>(imagedata,<span class="number">150</span>,<span class="number">150</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NmFkZWZiNDIzMzBkMjU4ZWM3ZWZlZmNlZDIwNTEyNWJfT0JRQTYwamI3Zm9kcjEwbnp5eGhjVUJCNjAwYjdIeUJfVG9rZW46SlJ2TGJhbDdQb2k3ZHV4QldKZ2NYTmdIbllkXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h5 id="putImageData"><a href="#putImageData" class="headerlink" title="putImageData"></a>putImageData</h5><p>putImageData(imageData: ImageData, dx: number | string, dy: number | string): void</p>
<p>使用<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-imagedata-V14">ImageData</a>数据填充新的矩形区域。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>imagedata</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-imagedata-V14">ImageData</a></td>
<td>是</td>
<td>包含像素值的ImageData对象。</td>
</tr>
<tr>
<td>dx</td>
<td>number | string10+</td>
<td>是</td>
<td>填充区域在x轴方向的偏移量。默认单位：vp。</td>
</tr>
<tr>
<td>dy</td>
<td>number | string10+</td>
<td>是</td>
<td>填充区域在y轴方向的偏移量。默认单位：vp。</td>
</tr>
</tbody></table>
<p>putImageData(imageData: ImageData, dx: number | string, dy: number | string, dirtyX: number | string, dirtyY: number | string, dirtyWidth: number | string, dirtyHeight: number | string): void</p>
<p>使用<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-imagedata-V14">ImageData</a>数据填充新的矩形区域。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>imagedata</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-imagedata-V14">ImageData</a></td>
<td>是</td>
<td>包含像素值的ImageData对象。</td>
</tr>
<tr>
<td>dx</td>
<td>number | string10+</td>
<td>是</td>
<td>填充区域在x轴方向的偏移量。默认单位：vp。</td>
</tr>
<tr>
<td>dy</td>
<td>number | string10+</td>
<td>是</td>
<td>填充区域在y轴方向的偏移量。默认单位：vp。</td>
</tr>
<tr>
<td>dirtyX</td>
<td>number | string10+</td>
<td>是</td>
<td>源图像数据矩形裁切范围左上角距离源图像左上角的x轴偏移量。默认单位：vp。</td>
</tr>
<tr>
<td>dirtyY</td>
<td>number | string10+</td>
<td>是</td>
<td>源图像数据矩形裁切范围左上角距离源图像左上角的y轴偏移量。默认单位：vp。</td>
</tr>
<tr>
<td>dirtyWidth</td>
<td>number | string10+</td>
<td>是</td>
<td>源图像数据矩形裁切范围的宽度。默认单位：vp。</td>
</tr>
<tr>
<td>dirtyHeight</td>
<td>number | string10+</td>
<td>是</td>
<td>源图像数据矩形裁切范围的高度。默认单位：vp。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">PutImageData</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> imageDataNum = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">createImageData</span>(<span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">          <span class="keyword">let</span> imageData = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">createImageData</span>(imageDataNum)</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; imageData.<span class="property">data</span>.<span class="property">length</span>; i += <span class="number">4</span>) &#123;</span><br><span class="line">            imageData.<span class="property">data</span>[i + <span class="number">0</span>] = <span class="number">255</span></span><br><span class="line">            imageData.<span class="property">data</span>[i + <span class="number">1</span>] = <span class="number">0</span></span><br><span class="line">            imageData.<span class="property">data</span>[i + <span class="number">2</span>] = <span class="number">255</span></span><br><span class="line">            imageData.<span class="property">data</span>[i + <span class="number">3</span>] = <span class="number">255</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">putImageData</span>(imageData, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">putImageData</span>(imageData, <span class="number">150</span>, <span class="number">10</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=YmJjMTg1NjZhNmY0ZTk4YTVlOWI2MDUwZWI3NDQxNGVfTkNhN01VM3cyM29Wd0lRa2QxcGl2MElUU1FrWkZhZEpfVG9rZW46U0tWUmI0QzNEb0tWNnl4d2pVeWN0cW1ibkxoXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h5 id="setLineDash"><a href="#setLineDash" class="headerlink" title="setLineDash"></a>setLineDash</h5><p>setLineDash(segments: number[]): void</p>
<p>设置画布的虚线样式。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>segments</td>
<td>number[]</td>
<td>是</td>
<td>描述线段如何交替和线段间距长度的数组。默认单位：vp。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">SetLineDash</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">arc</span>(<span class="number">100</span>, <span class="number">75</span>, <span class="number">50</span>, <span class="number">0</span>, <span class="number">6.28</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">setLineDash</span>([<span class="number">10</span>,<span class="number">20</span>])</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=YmEyMTAxYjhkODJkNDlhZTYyYjQyMTRkYzk2NDdlODNfaEFrbG1hQUVnR29Fck5Za0hEejFxMTJUMHZvZGQyZWhfVG9rZW46SzdiVWJMOEFFbzRkekZ4WUk0MmNnRkdHbmNoXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h5 id="getLineDash"><a href="#getLineDash" class="headerlink" title="getLineDash"></a>getLineDash</h5><p>getLineDash(): number[]</p>
<p>获得当前画布的虚线样式。</p>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>number[]</td>
<td>返回数组，该数组用来描述线段如何交替和间距长度。默认单位：vp。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CanvasGetLineDash</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;before getlinedash clicked&#x27;</span>)</span><br><span class="line">            <span class="keyword">let</span> res = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">getLineDash</span>()</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res))</span><br><span class="line">          &#125;)</span><br><span class="line">        <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">          .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">arc</span>(<span class="number">100</span>, <span class="number">75</span>, <span class="number">50</span>, <span class="number">0</span>, <span class="number">6.28</span>)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">setLineDash</span>([<span class="number">10</span>,<span class="number">20</span>])</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stroke</span>()</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=Mzc0MjVjMzI4NjliZjhlNzBlMmQzM2VmNDg3YjJiMTJfZVFGU1ZFVlZYYVN3TEZBUXJTTEJLRWJsQjVEWHVma1lfVG9rZW46TndoTWJheFBpb1JlTVR4RUp5QmNQNlZhbmJiXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h5 id="transferFromImageBitmap"><a href="#transferFromImageBitmap" class="headerlink" title="transferFromImageBitmap"></a>transferFromImageBitmap</h5><p>transferFromImageBitmap(bitmap: ImageBitmap): void</p>
<p>显示给定的ImageBitmap对象。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>bitmap</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-imagebitmap-V14">ImageBitmap</a></td>
<td>是</td>
<td>待显示的ImageBitmap对象。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TransferFromImageBitmap</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">offContext</span>: <span class="title class_">OffscreenCanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">OffscreenCanvasRenderingContext2D</span>(<span class="number">600</span>, <span class="number">600</span>, <span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;rgb(213,213,213)&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="keyword">let</span> imageData = <span class="variable language_">this</span>.<span class="property">offContext</span>.<span class="title function_">createImageData</span>(<span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; imageData.<span class="property">data</span>.<span class="property">length</span>; i += <span class="number">4</span>) &#123;</span><br><span class="line">            imageData.<span class="property">data</span>[i + <span class="number">0</span>] = <span class="number">255</span></span><br><span class="line">            imageData.<span class="property">data</span>[i + <span class="number">1</span>] = <span class="number">0</span></span><br><span class="line">            imageData.<span class="property">data</span>[i + <span class="number">2</span>] = <span class="number">60</span></span><br><span class="line">            imageData.<span class="property">data</span>[i + <span class="number">3</span>] = <span class="number">80</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">offContext</span>.<span class="title function_">putImageData</span>(imageData, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">          <span class="keyword">let</span> image = <span class="variable language_">this</span>.<span class="property">offContext</span>.<span class="title function_">transferToImageBitmap</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">transferFromImageBitmap</span>(image)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZjdhNTYwZjRhZDBmZjk4N2ZhZDhkOWYzOWY3ZmI3ZGJfbHp0Z0t5SzJzMWtNRFRVN0ZtcUdNRXd2eG5WQlNDc2lfVG9rZW46Q1M5ZGJuNjFYb21sR2V4NHJsSWNQYlhBbldnXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h5 id="toDataURL"><a href="#toDataURL" class="headerlink" title="toDataURL"></a>toDataURL</h5><p>toDataURL(type?: string, quality?: any): string</p>
<p>生成一个包含图片展示的URL，该接口存在内存拷贝行为，高耗时，应避免频繁使用。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>string</td>
<td>否</td>
<td>用于指定图像格式。可选参数为：”image&#x2F;png”, “image&#x2F;jpeg”, “image&#x2F;webp”。。默认值：image&#x2F;png。</td>
</tr>
<tr>
<td>quality</td>
<td>any</td>
<td>否</td>
<td>在指定图片格式为image&#x2F;jpeg或image&#x2F;webp的情况下，可以从0到1的区间内选择图片的质量。如果超出取值范围，将会使用默认值0.92。默认值：0.92。</td>
</tr>
</tbody></table>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>string</td>
<td>图像的URL地址。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CanvasExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">toDataURL</span>: <span class="built_in">string</span> = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&quot;#00ff00&quot;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">100</span>,<span class="number">100</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">toDataURL</span> = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">toDataURL</span>(<span class="string">&quot;image/png&quot;</span>, <span class="number">0.92</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">toDataURL</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWIxOWMwZDllZDM3MzQ5OWEzZGE4ZjIyY2FjZDcxNzZfTUc1VXZMOU9Pa3hORmkzb2J3a2FpaXN1YkRGWWpxV1hfVG9rZW46RXcxaWJ1UkNvb0FxTDd4dlkzb2NYVjV0bnRnXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h5 id="restore"><a href="#restore" class="headerlink" title="restore"></a>restore</h5><p>restore(): void</p>
<p>对保存的绘图上下文进行恢复。</p>
<blockquote>
<p><strong>说明</strong></p>
<p>当restore()次数未超出save()次数时，从栈中弹出存储的绘制状态并恢复CanvasRenderingContext2D对象的属性、剪切路径和变换矩阵的值。</p>
<p>当restore()次数超出save()次数时，此方法不做任何改变。</p>
<p>当没有保存状态时，此方法不做任何改变。</p>
</blockquote>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CanvasExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">save</span>() <span class="comment">// save the default state</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&quot;#00ff00&quot;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">restore</span>() <span class="comment">// restore to the default state</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">150</span>, <span class="number">75</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MjQ1NGM2ZDA5MDlmNWZjM2YxNDk1YWQ0NzA4ZGU5ZmVfbGFwdkYwekJta0Z5WWFtTkZ1Z3BMTmVmM09xOVNnMXhfVG9rZW46RDBoNmJUNERRb052TGl4ZVFHY2NXRmZsbkxoXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h5 id="save"><a href="#save" class="headerlink" title="save"></a>save</h5><p>save(): void</p>
<p>将当前状态放入栈中，保存canvas的全部状态，通常在需要保存绘制状态时调用。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CanvasExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">save</span>() <span class="comment">// save the default state</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&quot;#00ff00&quot;</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">restore</span>() <span class="comment">// restore to the default state</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">150</span>, <span class="number">75</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=OGU4ZDhiODY0ODU2N2M1N2M5OWVjNjlhMjBjYTljZWJfbmMwMlB3MGVxRlBVeHFjeTVncnRqYjNIbWZLYUxvYWZfVG9rZW46U2VUZ2JSbXpDb1FEeDB4YmczRGM4UFhSbnhnXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h5 id="createLinearGradient"><a href="#createLinearGradient" class="headerlink" title="createLinearGradient"></a>createLinearGradient</h5><p>createLinearGradient(x0: number, y0: number, x1: number, y1: number): CanvasGradient</p>
<p>创建一个线性渐变色。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>x0</td>
<td>number</td>
<td>是</td>
<td>起点的x轴坐标。默认单位：vp。</td>
</tr>
<tr>
<td>y0</td>
<td>number</td>
<td>是</td>
<td>起点的y轴坐标。默认单位：vp。</td>
</tr>
<tr>
<td>x1</td>
<td>number</td>
<td>是</td>
<td>终点的x轴坐标。默认单位：vp。</td>
</tr>
<tr>
<td>y1</td>
<td>number</td>
<td>是</td>
<td>终点的y轴坐标。默认单位：vp。</td>
</tr>
</tbody></table>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-canvasgradient-V14">CanvasGradient</a></td>
<td>新的CanvasGradient对象，用于在canvas上创建渐变效果。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CreateLinearGradient</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="keyword">let</span> grad = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">createLinearGradient</span>(<span class="number">50</span>,<span class="number">0</span>, <span class="number">300</span>,<span class="number">100</span>)</span><br><span class="line">          grad.<span class="title function_">addColorStop</span>(<span class="number">0.0</span>, <span class="string">&#x27;#ff0000&#x27;</span>)</span><br><span class="line">          grad.<span class="title function_">addColorStop</span>(<span class="number">0.5</span>, <span class="string">&#x27;#ffffff&#x27;</span>)</span><br><span class="line">          grad.<span class="title function_">addColorStop</span>(<span class="number">1.0</span>, <span class="string">&#x27;#00ff00&#x27;</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = grad</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">400</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGQ1MDg4M2Q3OTFhNDFhNWIwNDA3Y2M2ZWVjZmFhOGNfeEtLNkdkNVNQZ1J0dEtjWTBCWVpoNkZOVXJibk05YVVfVG9rZW46VFRpNWJiY2NLbzIzcEp4V1IxTmNzNW9ZbnVmXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h5 id="createRadialGradient"><a href="#createRadialGradient" class="headerlink" title="createRadialGradient"></a>createRadialGradient</h5><p>createRadialGradient(x0: number, y0: number, r0: number, x1: number, y1: number, r1: number): CanvasGradient</p>
<p>创建一个径向渐变色。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>x0</td>
<td>number</td>
<td>是</td>
<td>起始圆的x轴坐标。默认单位：vp。</td>
</tr>
<tr>
<td>y0</td>
<td>number</td>
<td>是</td>
<td>起始圆的y轴坐标。默认单位：vp。</td>
</tr>
<tr>
<td>r0</td>
<td>number</td>
<td>是</td>
<td>起始圆的半径。必须是非负且有限的。默认单位：vp。</td>
</tr>
<tr>
<td>x1</td>
<td>number</td>
<td>是</td>
<td>终点圆的x轴坐标。默认单位：vp。</td>
</tr>
<tr>
<td>y1</td>
<td>number</td>
<td>是</td>
<td>终点圆的y轴坐标。默认单位：vp。</td>
</tr>
<tr>
<td>r1</td>
<td>number</td>
<td>是</td>
<td>终点圆的半径。必须为非负且有限的。默认单位：vp。</td>
</tr>
</tbody></table>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-canvasgradient-V14">CanvasGradient</a></td>
<td>新的CanvasGradient对象，用于在canvas上创建渐变效果。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CreateRadialGradient</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffff00&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">          <span class="keyword">let</span> grad = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">createRadialGradient</span>(<span class="number">200</span>,<span class="number">200</span>,<span class="number">50</span>, <span class="number">200</span>,<span class="number">200</span>,<span class="number">200</span>)</span><br><span class="line">          grad.<span class="title function_">addColorStop</span>(<span class="number">0.0</span>, <span class="string">&#x27;#ff0000&#x27;</span>)</span><br><span class="line">          grad.<span class="title function_">addColorStop</span>(<span class="number">0.5</span>, <span class="string">&#x27;#ffffff&#x27;</span>)</span><br><span class="line">          grad.<span class="title function_">addColorStop</span>(<span class="number">1.0</span>, <span class="string">&#x27;#00ff00&#x27;</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = grad</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">440</span>, <span class="number">440</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=OTRiNzgzYTk3NDBiOGViYzg2YmNiZjU4NjZkM2MxZGNfRmJJMURUSDlaOXRmWFlZaEJTNWRlZW5qcWlMNnFzS1BfVG9rZW46S2s1OWJ1aHJSb2VHdzZ4bThuUGNiVkVJbnBoXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h5 id="createConicGradient-10"><a href="#createConicGradient-10" class="headerlink" title="createConicGradient(10+)"></a>createConicGradient(10+)</h5><p>createConicGradient(startAngle: number, x: number, y: number): CanvasGradient</p>
<p>创建一个圆锥渐变色。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>startAngle</td>
<td>number</td>
<td>是</td>
<td>开始渐变的角度。角度测量从中心右侧水平开始，顺时针移动。单位：弧度。</td>
</tr>
<tr>
<td>x</td>
<td>number</td>
<td>是</td>
<td>圆锥渐变的中心x轴坐标。默认单位：vp。</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>是</td>
<td>圆锥渐变的中心y轴坐标。默认单位：vp。</td>
</tr>
</tbody></table>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-canvasgradient-V14">CanvasGradient</a></td>
<td>新的CanvasGradient对象，用于在canvas上创建渐变效果。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CanvasExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ffffff&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> grad = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">createConicGradient</span>(<span class="number">0</span>, <span class="number">50</span>, <span class="number">80</span>)</span><br><span class="line">          grad.<span class="title function_">addColorStop</span>(<span class="number">0.0</span>, <span class="string">&#x27;#ff0000&#x27;</span>)</span><br><span class="line">          grad.<span class="title function_">addColorStop</span>(<span class="number">0.5</span>, <span class="string">&#x27;#ffffff&#x27;</span>)</span><br><span class="line">          grad.<span class="title function_">addColorStop</span>(<span class="number">1.0</span>, <span class="string">&#x27;#00ff00&#x27;</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = grad</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">30</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=YWJiNmY5NzVkNzQ3MTEzODUwNGUyY2E5Yzg0NTJiZjBfZDZJb1kzb3FVZGZZOFU5NU9EemwyWjFtQTFmMXJtcGZfVG9rZW46VzM3aGJad280b0w5Q3l4RUt6a2NFN0gybmhiXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h5 id="on-‘onAttach’"><a href="#on-‘onAttach’" class="headerlink" title="on(‘onAttach’)"></a>on(‘onAttach’)</h5><p>on(type: ‘onAttach’, callback: () &#x3D;&gt; void): void</p>
<p>订阅CanvasRenderingContext2D与Canvas组件发生绑定的场景。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>string</td>
<td>是</td>
<td>订阅CanvasRenderingContext2D与Canvas组件发生绑定的回调</td>
</tr>
<tr>
<td>callback</td>
<td>() &#x3D;&gt; void</td>
<td>是</td>
<td>订阅CanvasRenderingContext2D与Canvas组件发生绑定后触发的回调</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>说明</strong></p>
<p>CanvasRenderingContext2D对象在同一时间只能与一个Canvas组件绑定。</p>
<p>当CanvasRenderingContext2D对象和Canvas组件发生绑定时，会触发’onAttach’回调，表示可以获取到<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvas13">canvas</a>。</p>
<p>避免在’onAttach’中执行绘制方法，应保证Canvas组件已经’<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-canvas-V14#%E4%BA%8B%E4%BB%B6">onReady</a>‘再进行绘制。</p>
<p>触发’onAttach’回调的一般场景：</p>
<p>1、Canvas组件创建时绑定CanvasRenderingContext2D对象;</p>
<p>2、CanvasRenderingContext2D对象新绑定一个Canvas组件时。</p>
</blockquote>
<h5 id="on-‘onDetach’"><a href="#on-‘onDetach’" class="headerlink" title="on(‘onDetach’)"></a>on(‘onDetach’)</h5><p>on(type: ‘onDetach’, callback: () &#x3D;&gt; void): void</p>
<p>订阅CanvasRenderingContext2D与Canvas组件解除绑定的场景。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>string</td>
<td>是</td>
<td>订阅CanvasRenderingContext2D与Canvas组件解除绑定的回调</td>
</tr>
<tr>
<td>callback</td>
<td>() &#x3D;&gt; void</td>
<td>是</td>
<td>订阅CanvasRenderingContext2D与Canvas组件解除绑定后触发的回调</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>说明</strong></p>
<p>当CanvasRenderingContext2D对象和Canvas组件解除绑定时，会触发’onDetach’回调，表示应停止绘制行为。</p>
<p>触发’onDetach’回调的一般场景：</p>
<p>1、Canvas组件销毁时解除绑定CanvasRenderingContext2D对象;</p>
<p>2、CanvasRenderingContext2D对象新绑定一个Canvas组件，会先解除已有的绑定。</p>
</blockquote>
<h5 id="off-‘onAttach’"><a href="#off-‘onAttach’" class="headerlink" title="off(‘onAttach’)"></a>off(‘onAttach’)</h5><p>off(type: ‘onAttach’, callback?: () &#x3D;&gt; void): void</p>
<p>取消订阅CanvasRenderingContext2D与Canvas组件发生绑定的场景。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>string</td>
<td>是</td>
<td>取消订阅CanvasRenderingContext2D与Canvas组件发生绑定的回调</td>
</tr>
<tr>
<td>callback</td>
<td>() &#x3D;&gt; void</td>
<td>否</td>
<td>为空代表取消所有订阅CanvasRenderingContext2D与Canvas组件发生绑定后触发的回调。非空代表取消订阅发生绑定对应的回调。</td>
</tr>
</tbody></table>
<h5 id="off-‘onDetach’"><a href="#off-‘onDetach’" class="headerlink" title="off(‘onDetach’)"></a>off(‘onDetach’)</h5><p>off(type: ‘onDetach’, callback?: () &#x3D;&gt; void): void</p>
<p>取消订阅CanvasRenderingContext2D与Canvas组件解除绑定的场景。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>string</td>
<td>是</td>
<td>取消订阅CanvasRenderingContext2D与Canvas组件解除绑定的回调</td>
</tr>
<tr>
<td>callback</td>
<td>() &#x3D;&gt; void</td>
<td>否</td>
<td>为空代表取消所有订阅CanvasRenderingContext2D与Canvas组件解除绑定后触发的回调。非空代表取消订阅接触绑定对应的回调。</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">FrameNode</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.ArkUI&#x27;</span></span><br><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">AttachDetachExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">scroller</span>: <span class="title class_">Scroller</span> = <span class="keyword">new</span> <span class="title class_">Scroller</span>()</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">arr</span>: <span class="built_in">number</span>[] = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>]</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">node</span>: <span class="title class_">FrameNode</span> | <span class="literal">null</span> = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">attachCallback</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;CanvasRenderingContext2D attached to the canvas frame node.&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span> = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">canvas</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">detachCallback</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;CanvasRenderingContext2D detach from the canvas frame node.&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">node</span> = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">aboutToAppear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">on</span>(<span class="string">&#x27;onAttach&#x27;</span>, <span class="variable language_">this</span>.<span class="property">attachCallback</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>))</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">on</span>(<span class="string">&#x27;onDetach&#x27;</span>, <span class="variable language_">this</span>.<span class="property">detachCallback</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">aboutToDisappear</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">off</span>(<span class="string">&#x27;onAttach&#x27;</span>, <span class="variable language_">this</span>.<span class="property">attachCallback</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">off</span>(<span class="string">&#x27;onDetach&#x27;</span>, <span class="variable language_">this</span>.<span class="property">detachCallback</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Scroll</span>(<span class="variable language_">this</span>.<span class="property">scroller</span>) &#123;</span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>&#125;) &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">arr</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">Row</span>() &#123;</span><br><span class="line">              <span class="keyword">if</span> (item == <span class="number">3</span>) &#123;</span><br><span class="line">                <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">                  .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">                  .<span class="title function_">height</span>(<span class="number">150</span>)</span><br><span class="line">                  .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;rgb(213,213,213)&#x27;</span>)</span><br><span class="line">                  .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">font</span> = <span class="string">&#x27;30vp sans-serif&#x27;</span></span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">node</span>?.<span class="property">commonEvent</span>.<span class="title function_">setOnVisibleAreaApproximateChange</span>(</span><br><span class="line">                      &#123; <span class="attr">ratios</span>: [<span class="number">0</span>, <span class="number">1</span>], <span class="attr">expectedUpdateInterval</span>: <span class="number">10</span>&#125;,</span><br><span class="line">                      <span class="function">(<span class="params"><span class="attr">isVisible</span>: <span class="built_in">boolean</span>, <span class="attr">currentRatio</span>: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (!isVisible &amp;&amp; currentRatio &lt;= <span class="number">0.0</span>) &#123;</span><br><span class="line">                          <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Canvas is completely invisible.&#x27;</span>)</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (isVisible &amp;&amp; currentRatio &gt;= <span class="number">1.0</span>) &#123;</span><br><span class="line">                          <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Canvas is fully visible.&#x27;</span>)</span><br><span class="line">                        &#125;</span><br><span class="line">                      &#125;</span><br><span class="line">                    )</span><br><span class="line">                  &#125;)</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title class_">Text</span>(item.<span class="title function_">toString</span>())</span><br><span class="line">                  .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">                  .<span class="title function_">height</span>(<span class="number">150</span>)</span><br><span class="line">                  .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;rgb(39,135,217)&#x27;</span>)</span><br><span class="line">                  .<span class="title function_">borderRadius</span>(<span class="number">15</span>)</span><br><span class="line">                  .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">                  .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">                  .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">5</span> &#125;)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="built_in">number</span></span>) =&gt;</span> item.<span class="title function_">toString</span>())</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">scrollBar</span>(<span class="title class_">BarState</span>.<span class="property">Off</span>)</span><br><span class="line">      .<span class="title function_">scrollable</span>(<span class="title class_">ScrollDirection</span>.<span class="property">Vertical</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MzQwNzc4OWFlZDRmNTA5YTA0NzQ4YzM1NmVhY2EyNDBfVzVSQzM3d1lIN0p6U3pvNnpvRlUzNmM5d2hpa0lZQzFfVG9rZW46TmhRQmJQTlJkb29JRVZ4dVJCMWMzNW91bmVoXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h5 id="startImageAnalyzer"><a href="#startImageAnalyzer" class="headerlink" title="startImageAnalyzer"></a>startImageAnalyzer</h5><p>startImageAnalyzer(config: ImageAnalyzerConfig): Promise<void></p>
<p>配置AI分析并启动AI分析功能，使用前需先<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-canvas-V14#enableanalyzer12">使能</a>图像AI分析能力。</p>
<p>该方法调用时，将截取调用时刻的画面帧进行分析，使用时需注意启动分析的时机，避免出现画面和分析内容不一致的情况。</p>
<p>未执行完重复调用该方法会触发错误回调。示例代码同stopImageAnalyzer。</p>
<blockquote>
<p><strong>说明</strong></p>
<p>分析类型不支持动态修改。</p>
<p>当检测到画面有变化时，分析结果将自动销毁，可重新调用本接口启动分析。</p>
<p>该特性依赖设备能力，不支持该能力的情况下，将返回错误码。</p>
</blockquote>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>config</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-image-common-V14#imageanalyzerconfig">ImageAnalyzerConfig</a></td>
<td>是</td>
<td>执行AI分析所需要的入参，用于配置AI分析功能。</td>
</tr>
</tbody></table>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Promise<void></td>
<td>Promise对象，用于获取AI分析是否成功执行。</td>
</tr>
</tbody></table>
<h5 id="stopImageAnalyzer"><a href="#stopImageAnalyzer" class="headerlink" title="stopImageAnalyzer"></a>stopImageAnalyzer</h5><p>stopImageAnalyzer(): void</p>
<p>停止AI分析功能，AI分析展示的内容将被销毁。</p>
<blockquote>
<p><strong>说明</strong></p>
<p>在startImageAnalyzer方法未返回结果时调用本方法，会触发其错误回调。</p>
<p>该特性依赖设备能力。</p>
</blockquote>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.BasicServicesKit&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ImageAnalyzerExample</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">settings</span>: <span class="title class_">RenderingContextSettings</span> = <span class="keyword">new</span> <span class="title class_">RenderingContextSettings</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> = <span class="keyword">new</span> <span class="title class_">CanvasRenderingContext2D</span>(<span class="variable language_">this</span>.<span class="property">settings</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">config</span>: <span class="title class_">ImageAnalyzerConfig</span> = &#123;</span><br><span class="line">    <span class="attr">types</span>: [<span class="title class_">ImageAnalyzerType</span>.<span class="property">SUBJECT</span>, <span class="title class_">ImageAnalyzerType</span>.<span class="property">TEXT</span>]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> img = <span class="keyword">new</span> <span class="title class_">ImageBitmap</span>(<span class="string">&#x27;page/common/test.jpg&#x27;</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">aiController</span>: <span class="title class_">ImageAnalyzerController</span> = <span class="keyword">new</span> <span class="title class_">ImageAnalyzerController</span>()</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">options</span>: <span class="title class_">ImageAIOptions</span> = &#123;</span><br><span class="line">    <span class="attr">types</span>: [<span class="title class_">ImageAnalyzerType</span>.<span class="property">SUBJECT</span>, <span class="title class_">ImageAnalyzerType</span>.<span class="property">TEXT</span>],</span><br><span class="line">    <span class="attr">aiController</span>: <span class="variable language_">this</span>.<span class="property">aiController</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;start&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">80</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">80</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">startImageAnalyzer</span>(<span class="variable language_">this</span>.<span class="property">config</span>)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;analysis complete&quot;</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">error</span>: <span class="title class_">BusinessError</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;error code: &quot;</span> + error.<span class="property">code</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;stop&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">80</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">80</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">stopImageAnalyzer</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;getTypes&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">80</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">80</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">aiController</span>.<span class="title function_">getImageAnalyzerSupportTypes</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>, <span class="variable language_">this</span>.<span class="property">options</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">200</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">200</span>)</span><br><span class="line">        .<span class="title function_">enableAnalyzer</span>(<span class="literal">true</span>)</span><br><span class="line">        .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">drawImage</span>(<span class="variable language_">this</span>.<span class="property">img</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, <span class="number">200</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="CanvasDirection"><a href="#CanvasDirection" class="headerlink" title="CanvasDirection"></a>CanvasDirection</h4><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>inherit</td>
<td>继承canvas组件通用属性已设定的文本方向。</td>
</tr>
<tr>
<td>ltr</td>
<td>从左往右。</td>
</tr>
<tr>
<td>rtl</td>
<td>从右往左。</td>
</tr>
</tbody></table>
<h4 id="CanvasFillRule"><a href="#CanvasFillRule" class="headerlink" title="CanvasFillRule"></a>CanvasFillRule</h4><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>evenodd</td>
<td>奇偶规则。</td>
</tr>
<tr>
<td>nonzero</td>
<td>非零规则。</td>
</tr>
</tbody></table>
<h4 id="CanvasLineCap"><a href="#CanvasLineCap" class="headerlink" title="CanvasLineCap"></a>CanvasLineCap</h4><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>butt</td>
<td>线条两端为平行线，不额外扩展。</td>
</tr>
<tr>
<td>round</td>
<td>在线条两端延伸半个圆，直径等于线宽。</td>
</tr>
<tr>
<td>square</td>
<td>在线条两端延伸一个矩形，宽度等于线宽的一半，高度等于线宽。</td>
</tr>
</tbody></table>
<h4 id="CanvasLineJoin"><a href="#CanvasLineJoin" class="headerlink" title="CanvasLineJoin"></a>CanvasLineJoin</h4><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>bevel</td>
<td>在线段相连处使用三角形为底填充， 每个部分矩形拐角独立。</td>
</tr>
<tr>
<td>miter</td>
<td>在相连部分的外边缘处进行延伸，使其相交于一点，形成一个菱形区域，该属性可以通过设置miterLimit属性展现效果。</td>
</tr>
<tr>
<td>round</td>
<td>在线段相连处绘制一个扇形，扇形的圆角半径是线段的宽度。</td>
</tr>
</tbody></table>
<h4 id="CanvasTextAlign"><a href="#CanvasTextAlign" class="headerlink" title="CanvasTextAlign"></a>CanvasTextAlign</h4><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>center</td>
<td>文本居中对齐。</td>
</tr>
<tr>
<td>start</td>
<td>文本对齐界线开始的地方。</td>
</tr>
<tr>
<td>end</td>
<td>文本对齐界线结束的地方。</td>
</tr>
<tr>
<td>left</td>
<td>文本左对齐。</td>
</tr>
<tr>
<td>right</td>
<td>文本右对齐。</td>
</tr>
</tbody></table>
<h4 id="CanvasTextBaseline"><a href="#CanvasTextBaseline" class="headerlink" title="CanvasTextBaseline"></a>CanvasTextBaseline</h4><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>alphabetic</td>
<td>文本基线是标准的字母基线。</td>
</tr>
<tr>
<td>bottom</td>
<td>文本基线在文本块的底部。 与ideographic基线的区别在于ideographic基线不需要考虑下行字母。</td>
</tr>
<tr>
<td>hanging</td>
<td>文本基线是悬挂基线。</td>
</tr>
<tr>
<td>ideographic</td>
<td>文字基线是表意字基线；如果字符本身超出了alphabetic基线，那么ideograhpic基线位置在字符本身的底部。</td>
</tr>
<tr>
<td>middle</td>
<td>文本基线在文本块的中间。</td>
</tr>
<tr>
<td>top</td>
<td>文本基线在文本块的顶部。</td>
</tr>
</tbody></table>
<h4 id="ImageSmoothingQuality"><a href="#ImageSmoothingQuality" class="headerlink" title="ImageSmoothingQuality"></a>ImageSmoothingQuality</h4><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>low</td>
<td>低画质</td>
</tr>
<tr>
<td>medium</td>
<td>中画质</td>
</tr>
<tr>
<td>high</td>
<td>高画质</td>
</tr>
</tbody></table>
<h4 id="TextMetrics"><a href="#TextMetrics" class="headerlink" title="TextMetrics"></a>TextMetrics</h4><table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>只读</th>
<th>可选</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>width</td>
<td>number</td>
<td>是</td>
<td>否</td>
<td>只读属性，文本方块的宽度。</td>
</tr>
<tr>
<td>height</td>
<td>number</td>
<td>是</td>
<td>否</td>
<td>只读属性，文本方块的高度。</td>
</tr>
<tr>
<td>actualBoundingBoxAscent</td>
<td>number</td>
<td>是</td>
<td>否</td>
<td>只读属性，从<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvastextbaseline">CanvasRenderingContext2D.textBaseline</a>属性标明的水平线到渲染文本的矩形边界顶部的距离。</td>
</tr>
<tr>
<td>actualBoundingBoxDescent</td>
<td>number</td>
<td>是</td>
<td>否</td>
<td>只读属性，从<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvastextbaseline">CanvasRenderingContext2D.textBaseline</a>属性标明的水平线到渲染文本的矩形边界底部的距离。</td>
</tr>
<tr>
<td>actualBoundingBoxLeft</td>
<td>number</td>
<td>是</td>
<td>否</td>
<td>只读属性，平行于基线，从<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvastextalign">CanvasRenderingContext2D.textAlign</a>属性确定的对齐点到文本矩形边界左侧的距离。</td>
</tr>
<tr>
<td>actualBoundingBoxRight</td>
<td>number</td>
<td>是</td>
<td>否</td>
<td>只读属性，平行于基线，从<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvastextalign">CanvasRenderingContext2D.textAlign</a>属性确定的对齐点到文本矩形边界右侧的距离。</td>
</tr>
<tr>
<td>alphabeticBaseline</td>
<td>number</td>
<td>是</td>
<td>否</td>
<td>只读属性，从<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvastextbaseline">CanvasRenderingContext2D.textBaseline</a>属性标明的水平线到线框的 alphabetic 基线的距离。</td>
</tr>
<tr>
<td>emHeightAscent</td>
<td>number</td>
<td>是</td>
<td>否</td>
<td>只读属性，从<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvastextbaseline">CanvasRenderingContext2D.textBaseline</a>属性标明的水平线到线框中 em 方块顶部的距离。</td>
</tr>
<tr>
<td>emHeightDescent</td>
<td>number</td>
<td>是</td>
<td>否</td>
<td>只读属性，从<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvastextbaseline">CanvasRenderingContext2D.textBaseline</a>属性标明的水平线到线框中 em 方块底部的距离。</td>
</tr>
<tr>
<td>fontBoundingBoxAscent</td>
<td>number</td>
<td>是</td>
<td>否</td>
<td>只读属性，从<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvastextbaseline">CanvasRenderingContext2D.textBaseline</a>属性标明的水平线到渲染文本的所有字体的矩形最高边界顶部的距离。</td>
</tr>
<tr>
<td>fontBoundingBoxDescent</td>
<td>number</td>
<td>是</td>
<td>否</td>
<td>只读属性，从<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvastextbaseline">CanvasRenderingContext2D.textBaseline</a>属性标明的水平线到渲染文本的所有字体的矩形边界最底部的距离。</td>
</tr>
<tr>
<td>hangingBaseline</td>
<td>number</td>
<td>是</td>
<td>否</td>
<td>只读属性，从<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvastextbaseline">CanvasRenderingContext2D.textBaseline</a>属性标明的水平线到线框的 hanging 基线的距离。</td>
</tr>
<tr>
<td>ideographicBaseline</td>
<td>number</td>
<td>是</td>
<td>否</td>
<td>只读属性，从<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#canvastextbaseline">CanvasRenderingContext2D.textBaseline</a>属性标明的水平线到线框的 ideographic 基线的距离。</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>说明</strong></p>
<p>在画布组件中，通过CanvasRenderingContext2D对象和OffscreenCanvasRenderingContext2D对象在Canvas组件上进行绘制时调用的接口相同，另接口参数如无特别说明，单位均为vp。</p>
</blockquote>
<ul>
<li>在Canvas上加载Lottie动画时，需要先按照如下方式下载Lottie。<ul>
<li>import lottie from ‘@ohos&#x2F;lottie’</li>
</ul>
</li>
<li>具体接口请参考<a target="_blank" rel="noopener" href="https://gitee.com/openharmony-tpc/lottieETS">Lottie</a>。</li>
</ul>
<h2 id="初始化画布组件"><a href="#初始化画布组件" class="headerlink" title="初始化画布组件"></a>初始化画布组件</h2><p>onReady(event: () &#x3D;&gt; void)是Canvas组件初始化完成时的事件回调，调用该事件后，可获取Canvas组件的确定宽高，进一步使用CanvasRenderingContext2D对象和OffscreenCanvasRenderingContext2D对象调用相关API进行图形绘制。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Canvas</span>(<span class="variable language_">this</span>.<span class="property">context</span>)</span><br><span class="line">  .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#F5DC62&#x27;</span>)</span><br><span class="line">  .<span class="title function_">onReady</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;#0097D4&#x27;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">fillRect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGQ1YmMzZTE5YTU4YzBmMDQxMmJiOTQwZDlmY2NlZmFfeFA3OVRKektNd1Y3V3NGYndaOGFpNTFmREVqRVRPYm1fVG9rZW46SzREOGJqR2tqb3BSdWR4bVVBNGNvMVd3blpiXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h2 id="画布组件绘制方式"><a href="#画布组件绘制方式" class="headerlink" title="画布组件绘制方式"></a>画布组件绘制方式</h2><p>在Canvas组件生命周期接口onReady()调用之后，开发者可以直接使用canvas组件进行绘制。或者可以脱离Canvas组件和onReady()生命周期，单独定义Path2d对象构造理想的路径，并在onReady()调用之后使用Canvas组件进行绘制。</p>
<ul>
<li><p>通过CanvasRenderingContext2D对象和OffscreenCanvasRenderingContext2D对象直接调用相关API进行绘制。</p>
<ul>
<li><pre><code class="TypeScript">Canvas(this.context)
  .width(&#39;100%&#39;)
  .height(&#39;100%&#39;)
  .backgroundColor(&#39;#F5DC62&#39;)
  .onReady(() =&gt; &#123;
    this.context.beginPath();
    this.context.moveTo(50, 50);
    this.context.lineTo(280, 160);
    this.context.stroke();
   &#125;)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">![img](https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MWIzYjkwMWVmMzhlNWZmZDk2NDQ3MDI2NGRhNGRiOWVfU0dDMzl3Ulh1TzBoMDZjUkxVOU16cUpJZGVITkl0dzNfVG9rZW46TmZXV2JTOFNzb0xkRjZ4QmhKbGNXamY1blIwXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA)</span><br><span class="line"></span><br><span class="line">- 先单独定义path2d对象构造理想的路径，再通过调用CanvasRenderingContext2D对象和OffscreenCanvasRenderingContext2D对象的stroke接口或者fill接口进行绘制，具体使用可以参考[Path2D](https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-path2d-V14)对象。</span><br><span class="line"></span><br><span class="line">  - ```TypeScript</span><br><span class="line">    Canvas(this.context)</span><br><span class="line">      .width(&#x27;100%&#x27;)</span><br><span class="line">      .height(&#x27;100%&#x27;)</span><br><span class="line">      .backgroundColor(&#x27;#F5DC62&#x27;)</span><br><span class="line">      .onReady(() =&gt; &#123;</span><br><span class="line">         let region = new Path2D();</span><br><span class="line">         region.arc(100, 75, 50, 0, 6.28);</span><br><span class="line">         this.context.stroke(region);</span><br><span class="line">      &#125;)</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=OTU4YTA2Y2QzZjcxNDZhODk1OTI0Y2NmM2MwNDA4ZTFfTEkyWTJtVkNremVibW5zcFo1NVRmWUdRQmx6SWVrQVdfVG9rZW46R0xEWGJjSzM2b1VnYXN4UHdmWGNVeVVSblNkXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h2 id="画布组件常用方法"><a href="#画布组件常用方法" class="headerlink" title="画布组件常用方法"></a>画布组件常用方法</h2><p>OffscreenCanvasRenderingContext2D对象和CanvasRenderingContext2D对象提供了大量的属性和方法，可以用来绘制文本、图形，处理像素等，是Canvas组件的核心。常用接口有<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#fill">fill</a>（对封闭路径进行填充）、<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#clip">clip</a>（设置当前路径为剪切路径）、<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#stroke">stroke</a>（进行边框绘制操作）等等，同时提供了<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#fillstyle">fillStyle</a>（指定绘制的填充色）、<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#globalalpha">globalAlpha</a>（设置透明度）与<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#strokestyle">strokeStyle</a>（设置描边的颜色）等属性修改绘制内容的样式。将通过以下几个方面简单介绍画布组件常见使用方法：</p>
<ul>
<li><p>基础形状绘制。</p>
</li>
<li><p>可以通过<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#arc">arc</a>（绘制弧线路径）、 <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#ellipse">ellipse</a>（绘制一个椭圆）、<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#rect">rect</a>（创建矩形路径）等接口绘制基础形状。</p>
<ul>
<li><pre><code class="TypeScript">Canvas(this.context)
  .width(&#39;100%&#39;)
  .height(&#39;100%&#39;)
  .backgroundColor(&#39;#F5DC62&#39;)
  .onReady(() =&gt; &#123;
     //绘制矩形
     this.context.beginPath();
     this.context.rect(100, 50, 100, 100);
     this.context.stroke();
     //绘制圆形
     this.context.beginPath();
     this.context.arc(150, 250, 50, 0, 6.28);
     this.context.stroke();
     //绘制椭圆
     this.context.beginPath();
     this.context.ellipse(150, 450, 50, 100, Math.PI * 0.25, Math.PI * 0, Math.PI * 2);
     this.context.stroke();
  &#125;)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">![img](https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MmUyNGNiN2JjYzk1ZmNjMDJhNmMxYTc5NGVlMzRhYWRfakFCNkVkRE1tSTRqRDFubGJlaVdMWWZScnhValNveFFfVG9rZW46VUp5SGJDYjdvb1hQOTZ4Yk5LT2NDVTY3bktrXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA)</span><br><span class="line"></span><br><span class="line">- 文本绘制。</span><br><span class="line"></span><br><span class="line">- 可以通过[fillText](https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#filltext)（文本填充）、[strokeText](https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#stroketext)（文本描边）等接口进行文本绘制，示例中设置了font为50像素高加粗的&quot;sans-serif&quot;字体，然后调用fillText方法在(50, 100)处绘制文本&quot;Hello World!&quot;，设置strokeStyle为红色，lineWidth为2，font为50像素高加粗的&quot;sans-serif&quot;字体，然后调用strokeText方法在(50, 150)处绘制文本&quot;Hello World!&quot;的轮廓。</span><br><span class="line"></span><br><span class="line">  - ```TypeScript</span><br><span class="line">    Canvas(this.context)</span><br><span class="line">      .width(&#x27;100%&#x27;)</span><br><span class="line">      .height(&#x27;100%&#x27;)</span><br><span class="line">      .backgroundColor(&#x27;#F5DC62&#x27;)</span><br><span class="line">      .onReady(() =&gt; &#123;</span><br><span class="line">        // 文本填充</span><br><span class="line">        this.context.font = &#x27;50px bolder sans-serif&#x27;;</span><br><span class="line">        this.context.fillText(&quot;Hello World!&quot;, 50, 100);</span><br><span class="line">        // 文本描边</span><br><span class="line">        this.context.strokeStyle = &quot;#ff0000&quot;</span><br><span class="line">        this.context.lineWidth = 2</span><br><span class="line">        this.context.font = &#x27;50px bolder sans-serif&#x27;;</span><br><span class="line">        this.context.strokeText(&quot;Hello World!&quot;, 50, 150);</span><br><span class="line">      &#125;)</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=YWRkZWEwY2Y4OGRlMTA2OGJiNGMyNDFiYWI4ODk4MmJfWEpmaEhpc3JrZWN6MlA3b0drem42N2Zsb3FMRnREcHRfVG9rZW46SUZXeGJSVTQ4b3JBNGp4RXhGZ2NWTkJtbm1nXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<ul>
<li><p>绘制图片和图像像素信息处理。</p>
</li>
<li><p>可以通过<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#drawimage">drawImage</a>（图像绘制）、<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#putimagedata">putImageData</a>（使用<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-imagedata-V14">ImageData</a>数据填充新的矩形区域）等接口绘制图片，通过<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#createimagedata">createImageData</a>（创建新的ImageData 对象）、<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#getpixelmap">getPixelMap</a>（以当前canvas指定区域内的像素创建<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/js-apis-image-V14#pixelmap7">PixelMap</a>对象）、<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#getimagedata">getImageData</a>（以当前canvas指定区域内的像素创建ImageData对象）等接口进行图像像素信息处理。</p>
<ul>
<li><pre><code class="TypeScript">@Entry
@Component
struct GetImageData &#123;
  private settings: RenderingContextSettings = new RenderingContextSettings(true)
  private context: CanvasRenderingContext2D = new CanvasRenderingContext2D(this.settings)
  private offCanvas: OffscreenCanvas = new OffscreenCanvas(600, 600)
  private img: ImageBitmap = new ImageBitmap(&quot;/common/images/1234.png&quot;)

  build() &#123;
    Flex(&#123; direction: FlexDirection.Column, alignItems: ItemAlign.Center, justifyContent: FlexAlign.Center &#125;) &#123;
      Canvas(this.context)
        .width(&#39;100%&#39;)
        .height(&#39;100%&#39;)
        .backgroundColor(&#39;#F5DC62&#39;)
        .onReady(() =&gt; &#123;
          let offContext = this.offCanvas.getContext(&quot;2d&quot;, this.settings)
          // 使用drawImage接口将图片画在（0，0）为起点，宽高130的区域
          offContext.drawImage(this.img, 0, 0, 130, 130);
          // 使用getImageData接口，获得canvas组件区域中，（50，50）为起点，宽高130范围内的绘制内容
          let imagedata = offContext.getImageData(50, 50, 130, 130);
          // 使用putImageData接口将得到的ImageData画在起点为（150， 150）的区域中
          offContext.putImageData(imagedata, 150, 150);
          // 将离屏绘制的内容画到canvas组件上
          let image = this.offCanvas.transferToImageBitmap();
          this.context.transferFromImageBitmap(image);
        &#125;)
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
  &#125;
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">![img](https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NjBiNjZiYTgxMzRhNzdkMTJlNjU1Y2UyZDdlNWI1YmJfMmZDSjdWempuTE1KcVRRZFVBYWp1a3E5dXVrWHRQeUFfVG9rZW46UUtxRGJlQmdOb290Mzl4QTJKcmNHYjRobjBjXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA)</span><br><span class="line"></span><br><span class="line">- 其他方法。</span><br><span class="line"></span><br><span class="line">- Canvas中还提供其他类型的方法。渐变（[CanvasGradient](https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-components-canvas-canvasgradient-V14)对象）相关的方法：[createLinearGradient](https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#createlineargradient)（创建一个线性渐变色）、[createRadialGradient](https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V14/ts-canvasrenderingcontext2d-V14#createradialgradient)（创建一个径向渐变色）等。</span><br><span class="line"></span><br><span class="line">  - ```TypeScript</span><br><span class="line">    Canvas(this.context)</span><br><span class="line">      .width(&#x27;100%&#x27;)</span><br><span class="line">      .height(&#x27;100%&#x27;)</span><br><span class="line">      .backgroundColor(&#x27;#F5DC62&#x27;)</span><br><span class="line">      .onReady(() =&gt; &#123;</span><br><span class="line">        //创建一个径向渐变色的CanvasGradient对象</span><br><span class="line">        let grad = this.context.createRadialGradient(200, 200, 50, 200, 200, 200)</span><br><span class="line">        //为CanvasGradient对象设置渐变断点值，包括偏移和颜色</span><br><span class="line">        grad.addColorStop(0.0, &#x27;#E87361&#x27;);</span><br><span class="line">        grad.addColorStop(0.5, &#x27;#FFFFF0&#x27;);</span><br><span class="line">        grad.addColorStop(1.0, &#x27;#BDDB69&#x27;);</span><br><span class="line">        //用CanvasGradient对象填充矩形</span><br><span class="line">        this.context.fillStyle = grad;</span><br><span class="line">        this.context.fillRect(0, 0, 400, 400);</span><br><span class="line">      &#125;)</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=YzdiYjRkYmFmYjM0YzA4MmU1M2Q0OGQzODJjNDM2NWRfZ3FHYzVBUVNPbFVlZ2RQVURlYjF2ZVVyaTNXelBtTDVfVG9rZW46VmF4ZGJhY2lhb1VPcEZ4VjhGN2NmOW1ZblNnXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h2 id="场景示例"><a href="#场景示例" class="headerlink" title="场景示例"></a>场景示例</h2><ul>
<li><p>规则基础形状绘制。</p>
<ul>
<li><pre><code class="TypeScript">@Entry
@Component
struct ClearRect &#123;
  private settings: RenderingContextSettings = new RenderingContextSettings(true);
  private context: CanvasRenderingContext2D = new CanvasRenderingContext2D(this.settings);

  build() &#123;
    Flex(&#123; direction: FlexDirection.Column, alignItems: ItemAlign.Center, justifyContent: FlexAlign.Center &#125;) &#123;
      Canvas(this.context)
        .width(&#39;100%&#39;)
        .height(&#39;100%&#39;)
        .backgroundColor(&#39;#F5DC62&#39;)
        .onReady(() =&gt; &#123;
          // 设定填充样式，填充颜色设为蓝色
          this.context.fillStyle = &#39;#0097D4&#39;;
          // 以(50, 50)为左上顶点，画一个宽高200的矩形
          this.context.fillRect(50, 50, 200, 200);
          // 以(70, 70)为左上顶点，清除宽150高100的区域
          this.context.clearRect(70, 70, 150, 100);
        &#125;)
    &#125;
    .width(&#39;100%&#39;)
    .height(&#39;100%&#39;)
  &#125;
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">![img](https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NGJhZWU4NTM1ZWQyM2VmMmRmZDU1MjUyYmQzMjJjNjhfSjFRdmRWd0hiYmNkZ21MZ3c0VjhMSHlzQW1WVlVaRWVfVG9rZW46WnI0NGJvcDVnb2U0UTN4Z0NLWGM2R1VrbnZjXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA)</span><br><span class="line"></span><br><span class="line">- 不规则图形绘制。</span><br><span class="line"></span><br><span class="line">  - ```TypeScript</span><br><span class="line">    @Entry</span><br><span class="line">    @Component</span><br><span class="line">    struct Path2d &#123;</span><br><span class="line">      private settings: RenderingContextSettings = new RenderingContextSettings(true);</span><br><span class="line">      private context: CanvasRenderingContext2D = new CanvasRenderingContext2D(this.settings);</span><br><span class="line">      </span><br><span class="line">      build() &#123;</span><br><span class="line">        Row() &#123;</span><br><span class="line">          Column() &#123;</span><br><span class="line">            Canvas(this.context)</span><br><span class="line">              .width(&#x27;100%&#x27;)</span><br><span class="line">              .height(&#x27;100%&#x27;)</span><br><span class="line">              .backgroundColor(&#x27;#F5DC62&#x27;)</span><br><span class="line">              .onReady(() =&gt; &#123;</span><br><span class="line">                // 使用Path2D的接口构造一个五边形</span><br><span class="line">                let path = new Path2D();</span><br><span class="line">                path.moveTo(150, 50);</span><br><span class="line">                path.lineTo(50, 150);</span><br><span class="line">                path.lineTo(100, 250);</span><br><span class="line">                path.lineTo(200, 250);</span><br><span class="line">                path.lineTo(250, 150);</span><br><span class="line">                path.closePath();</span><br><span class="line">                // 设定填充色为蓝色</span><br><span class="line">                this.context.fillStyle = &#x27;#0097D4&#x27;;</span><br><span class="line">                // 使用填充的方式，将Path2D描述的五边形绘制在canvas组件内部</span><br><span class="line">                this.context.fill(path);</span><br><span class="line">              &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">          .width(&#x27;100%&#x27;)</span><br><span class="line">        &#125;</span><br><span class="line">        .height(&#x27;100%&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NDJkMWQ3MTNjN2RkMzQwYzBhMTNmZDdiZDkyMDI5ZWJfNXFpSElBSGN3ajlvZGl2Q2dSckszbFJrMlFjcGJaZ2FfVG9rZW46U2FsUWJkUUk2b2xpc2x4T2xoUWM5YzBabkJmXzE3NDIxOTEwNzk6MTc0MjE5NDY3OV9WNA" alt="img"></p>
<h2 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h2><ul>
<li><a target="_blank" rel="noopener" href="https://gitee.com/harmonyos_samples/custom-canvas">自定义Canvas画布</a></li>
</ul>

  </section>

</article>

<section class="read-more">
           
    
               
            <div class="read-more-item">
                <span class="read-more-item-dim">最近的文章</span>
                <h2 class="post-list__post-title post-title"><a href="/rust-mob-client/" title="Rust - 移动端跨平台开发实践">Rust - 移动端跨平台开发实践</a></h2>
                <p class="excerpt">
                
                

1. 整体方案
Rust的移动端跨平台开发方案，具体如下

最底层SDK的业务逻辑由Rust实现
使用ffi工具，编写binding code
Android、iOS：中间层使用uniffi编写binding代码。使用uniffi-bindgen将binding代码生成kotlin、Swift代
                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2024-07-05T06:40:56.000Z" class="post-list__meta--date date">2024-07-05</time> &#8226; <span class="post-list__meta--tags tags">于 
  <a class="-none-link" href="/tags/Rust/" rel="tag">Rust</a>, <a class="-none-link" href="/tags/%E8%B7%A8%E5%B9%B3%E5%8F%B0/" rel="tag">跨平台</a>
</span><a class="btn-border-small" href="/rust-mob-client/">开始阅读</a></div>
                           
            </div>
        
        
               
            <div class="read-more-item">
                <span class="read-more-item-dim">更早的文章</span>
                <h2 class="post-list__post-title post-title"><a href="/hm-event-loop/" title="HarmonyOS - Event Loop事件循环、宏任务and微任务">HarmonyOS - Event Loop事件循环、宏任务and微任务</a></h2>
                <p class="excerpt">
                
                

在阅读本文前先给大家抛出几个问题：

事件循环是什么？
宏任务和微任务是什么？
哪些代码触发宏任务，哪些代码触发微任务？

前言JS是一门单线程语言，单线程就意味着，所有的任务需要排队，前一个任务结束，才会执行下一个任务。
这样所导致的问题是：如果JS执行的时间过长，这样就会造成页面的渲染不连贯
                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2024-05-05T08:50:04.000Z" class="post-list__meta--date date">2024-05-05</time> &#8226; <span class="post-list__meta--tags tags">于 
  <a class="-none-link" href="/tags/EventLoop/" rel="tag">EventLoop</a>, <a class="-none-link" href="/tags/HarmonyOS/" rel="tag">HarmonyOS</a>, <a class="-none-link" href="/tags/%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/" rel="tag">原理解析</a>, <a class="-none-link" href="/tags/%E5%AE%8F%E4%BB%BB%E5%8A%A1-%E5%BE%AE%E4%BB%BB%E5%8A%A1/" rel="tag">宏任务/微任务</a>
</span><a class="btn-border-small" href="/hm-event-loop/">开始阅读</a></div>
                       
            </div>
        
     
   
   
  
</section>

  
<section class="post-comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      var disqus_shortname = 'warpdrive'; 
      
  var disqus_identifier = '/hm-canvas/';
  var disqus_title = 'HarmonyOS - 使用画布绘制自定义图形 (Canvas)';
  var disqus_url = 'http://shevakuilin.com/hm-canvas/';
  

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          //dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
          dsq.src = 'https://a.disquscdn.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a target="_blank" rel="noopener" href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


            <footer class="footer">
    <span class="footer__copyright">
        &copy; 2025 ShevaKuilin - 跃迁引擎 <a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/"> 渝ICP备 19012091</a>, 本站点采用 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>
       
    </span>
    <span class="footer__copyright">
             - 基于 <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a> 搭建，使用 <a target="_blank" rel="noopener" href="https://github.com/monniya/hexo-theme-new-vno ">new-vno</a> 主题，由<a target="_blank" rel="noopener" href="https://monniya.com ">@Monniya</a> 修改自 <a href="https://github.com/lenbo-ma/hexo-theme-vno" target="_blank">Vno</a>, 原创出自<a href="http://github.com/onevcat/vno" target="_blank">onevcat</a>
         </span>
       
    
    
</footer>


        </div>
    </div>

     
    


    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    
</body>
</html>
