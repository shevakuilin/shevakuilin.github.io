<!DOCTYPE html>
<html lang="z">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    
    <title>「端智能」神经网络/机器学习在 iOS 端的应用与场景落地 | 跃迁引擎</title>
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="iOS Research &amp; Development">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="「端智能」神经网络/机器学习在 iOS 端的应用与场景落地 | 跃迁引擎">
    <meta name="twitter:description" content="iOS Research &amp; Development">

    <meta property="og:type" content="article">
    <meta property="og:title" content="「端智能」神经网络/机器学习在 iOS 端的应用与场景落地 | 跃迁引擎">
    <meta property="og:description" content="iOS Research &amp; Development">

    
    <meta name="author" content="ShevaKuilin">
    
    
<link rel="stylesheet" href="/css/vno.css">

    
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">


    
    <link rel="icon" href="/images/favicon.png">
    

    <meta name="generator" content="hexo"/>
    

    <link rel="canonical" href="http://shevakuilin.com/client-ai-01/"/>

                 
</head>

<body class="home-template no-js">
    
<script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>

    
<script src="/js/main.js"></script>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>

    
<header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/background.jpg)">
  <div class="panel-main">
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/" title="前往 跃迁引擎 的主页"><img src="/images/avatar.jpeg" width="80" alt="跃迁引擎 logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage for 跃迁引擎">跃迁引擎</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">空気を読んだ雨降らないでよ</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">iOS Research & Development</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />

        <div class="navigation-wrapper">
          <div>
          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="访问博客" class="blog-button">主页</a></li>
            
              <li class="navigation__item"><a href="/archives">所有文章</a></li>
            
              <li class="navigation__item"><a href="/tags/算法/">算法</a></li>
            
              <li class="navigation__item"><a href="/tags/iOS/">iOS</a></li>
            
              <li class="navigation__item"><a href="/tags/AI/">AI</a></li>
            
              <li class="navigation__item"><a href="/tags/HarmonyOS/">鸿蒙</a></li>
            
              <li class="navigation__item"><a href="/tags/Rust/">Rust</a></li>
            
              <li class="navigation__item"><a href="/tags/札记/">札记</a></li>
            
              <li class="navigation__item"><a href="/travels">旅行</a></li>
            
              <li class="navigation__item"><a href="/tags/随笔/">随笔</a></li>
            
              <li class="navigation__item"><a href="/tags/折腾日记/">折腾日记</a></li>
            
              <li class="navigation__item"><a href="/games">游戏人生</a></li>
            
            </ul>
          </nav>
          </div>
          <div>
          <nav class="cover-navigation navigation--social">
  <ul class="navigation">

  <!-- Weibo-->
  

  <!-- Github -->
  
  <li class="navigation__item">
    <a href="https://github.com/shevakuilin" title="查看我的GitHub主页" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>


<!-- Stack Overflow -->
        

  <!-- Google Plus -->
  

<!-- Facebook -->

  
<!-- Twitter -->

  



  </ul>
</nav>

          </div>
        </div>

      </div>

    </div>

    <div class="panel-cover--overlay cover-disabled"></div>
  </div> 
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single">

  <header class="post-header">
    <div class="post-meta">
      <time datetime="2023-11-06T14:15:33.000Z" class="post-list__meta--date date">2023-11-06</time> &#8226; <span class="post-meta__tags tags">于 
  <a class="-none-link" href="/tags/AI/" rel="tag">AI</a>, <a class="-none-link" href="/tags/CoreML/" rel="tag">CoreML</a>, <a class="-none-link" href="/tags/iOS/" rel="tag">iOS</a>, <a class="-none-link" href="/tags/%E7%AB%AF%E6%99%BA%E8%83%BD/" rel="tag">端智能</a>
 </span>
      <span class="page-pv">
       阅读 <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span>
      </span> 
   
    </div>
    <h1 class="post-title">「端智能」神经网络/机器学习在 iOS 端的应用与场景落地</h1>
  </header>

  <section class="post">
    <img src="https://github.com/shevakuilin/GhostPostsImages/raw/master/client-ai-01.png" style="width: 1200px; height: 520px; object-fit: cover; object-position: top;">

<h2 id="端智能简介"><a href="#端智能简介" class="headerlink" title="端智能简介"></a>端智能简介</h2><blockquote>
<p>相比云侧智能，端智能具有<strong>低延时</strong>、<strong>保护数据隐私</strong>、<strong>节省云端计算资源</strong>等显著优势。</p>
</blockquote>
<p>近年来，以深度学习为代表的新一代人工智能技术得到了快速发展和广泛应用，模型训练和模型推断基本都在云侧完成。但随着移动设备算力的提升、模型压缩技术的成熟，模型推断在终端设备运行成为可能，<strong>端智能（On-Device AI）</strong>应运而生。</p>
<p>端智能是指<strong>算法模型在终端设备上运行及其上层应用</strong>。其中，终端设备是指以手机为主的各种智能设备，算法模型多数是指深度学习模型。相比云侧智能，端智能具有<strong>低延时</strong>、<strong>保护数据隐私</strong>、<strong>节省云端计算资源</strong>等显著优势。目前手机上的智能摄像、人脸识别、增强现实（AR）特效等端智能应用已经非常普遍。全球权威IT研究与顾问咨询公司高德纳（Gartner）曾经在数年前预计，到2022年，80%的智能手机将内置人工智能技术。目前国内各大厂商，主流 APP 已全部完成或正在进行端智能覆盖。</p>
<p>如阿里巴巴，早在2016年就在拍立淘场景中进行端智能相关应用实践。经过多年探索、实践和沉淀，我们目前已经构建了相对完整的端智能技术体系，并且在拍立淘、直播内容理解、AR商品导购等场景获得规模化应用。据不完全统计，阿里巴巴集团内部已经有超过30个移动App应用了端智能技术，手机淘宝内部应用场景超过25个。</p>
<p>而像抖音、今日头条、美团、小红书、Bilibili等众多国内主流 APP 也早已完成了核心业务的智能推送、实时翻译、图像识别、音频识别、手势识别等端智能部署。</p>
<h2 id="基于-Core-ML-的神经网络-x2F-机器学习"><a href="#基于-Core-ML-的神经网络-x2F-机器学习" class="headerlink" title="基于 Core ML 的神经网络&#x2F;机器学习"></a>基于 Core ML 的神经网络&#x2F;机器学习</h2><h3 id="关于机器学习"><a href="#关于机器学习" class="headerlink" title="关于机器学习"></a>关于机器学习</h3><p>对于机器学习，iOS 开发人员可以选择三种方式来访问经过训练的模型进行推理和预测：</p>
<ol>
<li>使用 <strong>Core ML</strong> 访问本地设备上的预训练模型。这要是本篇文章将要介绍的重点。</li>
<li>在云中托管机器学习模型，并将数据从设备发送到托管端点进行预测。</li>
<li>调用第三方 API 驱动的机器学习云托管服务，该服务托管并管理预定义的训练模型。用户数据通过设备的 API 调用传递，再由服务返回预测值。</li>
</ol>
<h3 id="关于-Core-ML"><a href="#关于-Core-ML" class="headerlink" title="关于 Core ML"></a>关于 Core ML</h3><p>Core ML 是跨 Apple 产品（macOS、iOS、watchOS 和 tvOS）使用的机器学习框架，用于通过在端侧轻松集成预先训练的机器学习模型来执行快速预测或推理，从而允许您执行实时预测设备上的实时图像或视频。开发者可以通过 Core ML 框架将机器学习模型集成到应用程序中，该框架最大的优点是<strong>使用它并不需要开发者具备额外的神经网络或机器学习知识</strong>。Core ML 框架的另一个特点是，<strong>只要开发者将已经训练好的数据模型转换成了 Core ML 模型即可使用</strong>。</p>
<p>Core ML为所有模型提供统一的表示。你的应用程序使用Core ML API 和用户数据来进行预测以及训练或微调模型，所有这些都在个人设备上进行。</p>
<img src="/image/client-ai-01-01.png">



<p>模型是将机器学习算法应用于一组训练数据的结果。你可以使用模型根据新的输入数据进行预测。模型可以完成各种用代码编写很难或不切实际的任务。例如，你可以训练模型对照片进行分类，或直接从照片的像素检测照片中的特定对象。</p>
<p>你可以使用与 Xcode 捆绑在一起的 Create ML 应用程序构建和训练模型。使用Create ML训练的模型采用Core ML模型格式，可以在你的应用程序中使用。或者，你可以使用各种其他机器学习库，然后使用<a target="_blank" rel="noopener" href="https://coremltools.readme.io/">Core ML Tools</a>将模型转换为Core ML格式。一旦模型位于某人的设备上，你就可以使用Core ML使用该人的数据在设备上重新训练或微调该模型。</p>
<p>Core ML通过利用 CPU、GPU 和神经引擎来优化设备性能，同时最大限度地减少内存占用和功耗。严格在个人设备上运行模型无需网络连接，这有助于保持个人数据的私密性和应用程序的响应能力。</p>
<p>该框架是特定领域框架和功能的基础。它支持用于分析图像的视觉、用于处理文本的自然语言、用于将音频转换为文本的语音以及用于识别音频中的声音的声音分析。Core ML本身构建在Accelerate和BNNS等低级原语以及Metal Performance Shaders之上。</p>
<img src="/image/client-ai-01-02.png">

<h4 id="端侧机器学习的优势"><a href="#端侧机器学习的优势" class="headerlink" title="端侧机器学习的优势"></a>端侧机器学习的优势</h4><ol>
<li><strong>低延迟和近乎实时的结果</strong>：用户不需要通过发送数据然后等待响应来进行网络 API 调用。这对于设备上摄像头连续帧的视频处理等应用至关重要。</li>
<li><strong>可用性（离线）、隐私和低成本</strong>，因为应用程序在没有网络连接的情况下运行，没有 API 调用，并且数据永远不会离开设备。想象一下，在地铁中使用移动设备识别历史瓷砖，在飞行模式下编录私人度假照片，或者在荒野中检测有毒植物。</li>
</ol>
<h4 id="端侧机器学习的缺点"><a href="#端侧机器学习的缺点" class="headerlink" title="端侧机器学习的缺点"></a>端侧机器学习的缺点</h4><ol>
<li><strong>应用程序大小</strong>：通过将模型添加到设备，您会增加应用程序的大小，并且一些精确的模型可能会非常大。</li>
<li><strong>系统利用率</strong>：移动设备上的预测和推理涉及大量计算，这会增加电池消耗。较旧的设备可能难以提供实时预测。</li>
<li><strong>模型训练</strong>：在大多数情况下，设备上的模型必须在设备外部使用新的用户数据不断进行训练。重新训练模型后，应用程序将需要使用新模型进行更新，并且根据模型的大小，这可能会给用户带来网络传输压力。结合上面提到的应用程序大小问题，这也会导致一个潜在的用户体验问题。</li>
</ol>
<h3 id="如何使用-Core-ML"><a href="#如何使用-Core-ML" class="headerlink" title="如何使用 Core ML"></a>如何使用 Core ML</h3><h4 id="Create-ML"><a href="#Create-ML" class="headerlink" title="Create ML"></a>Create ML</h4><p>当我们手中没有现成的模型时，需要训练并创建一个全新的模型，这时就可以使用 Xcode Developer Tool 中的 Create ML 进行创建。</p>
<ol>
<li><p>首先找到 Create ML，选择并打开。</p>
<img src="/image/client-ai-01-03.png">
</li>
<li><p>由于我们是从0开始构建一个全新的模型，所这里选择创建一个新文档，用于存放我们的训练集。</p>
<img src="/image/client-ai-01-04.png">
</li>
<li><p>选择模型将要训练的类型，Core ML 会根据不同的训练模型（如图像分类、目标检测、风格迁移、手势分类等）选择不同的神经网络算法进行训练处理。选择并给训练集命名后，就创建完成了。这里我们选择图像分类进行演示。</p>
<img src="/image/client-ai-01-05.png">
</li>
<li><p>开始训练，在选择完训练集以后，会进入模型构建页面，这里可以进行训练、验证、测试和模型输出的设置等。其中，训练集和测试集需要提供数据，而验证集是自动从训练集中分割的不需要要手动处理。将同一训练集的训练内容放入 Training Data 进行训练，训练完毕后即可输出对应的模型。注意：<strong>数据的格式必须是以训练集且必须拥有至少2个子集（子文件目录）的形式（也就是需要放入一个已命名的文件夹）放入，测试与训练数据不能相同</strong>。</p>
<ol>
<li>注意这里的 Feature Extractor（特征提取器）提供了两个版本 V1 和 V2，其中 <strong>V2 的特征训练结果更精确</strong>，但是<strong>要求更高的基础版本</strong>，需要 <code>macOS 14.0+ ``/ ``iOS 17.0+ / tvOS 17.0+</code></li>
</ol>
<img src="/image/client-ai-01-06.png">

<img src="/image/client-ai-01-07.png">
</li>
<li><p>训练完毕后，可以看到验证结果，准确率等指标数据。</p>
<img src="/image/client-ai-01-08.png">

<img src="/image/client-ai-01-09.png">
</li>
<li><p>预览模型训练效果，训练结束后，可以在 Preview 中预览模型的训练成果。这里我们演示的是图像分类，就放图图片进行效果预览。</p>
<img src="/image/client-ai-01-10.png"></li>
</ol>
<p>这里我们可以看到识别结果，94%的相似度是在 8 这个训练集中，6%的相似度在 7 这个训练集中</p>
<img src="/image/client-ai-01-11.png">

<p>让我们看下 8 的元训练数据</p>
<img src="/image/client-ai-01-12.png">

<p>再看看 7 的元训练数据</p>
<img src="/image/client-ai-01-13.png">

<p>很显然，数据训练的很成功，那么我们就可以将这个模型进行输出了</p>
<ol start="7">
<li><p>输出模型，提供给开发者使用。这里会展示出模型的大小、类型、支持的系统版本等信息。选择 Get 保存为模型文件即可。</p>
<img src="/image/client-ai-01-14.png"></li>
</ol>
<p>输出后会得到一个mlmodel为后缀格式模型文件</p>
<img src="/image/client-ai-01-15.png">

<h4 id="如何在代码中使用训练完成的模型"><a href="#如何在代码中使用训练完成的模型" class="headerlink" title="如何在代码中使用训练完成的模型"></a>如何在代码中使用训练完成的模型</h4><p>将模型放入端内，Xcode 会自动生成与模型同名的调用 API，如下面的 VideoFrameChineseModel</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"><span class="keyword">import</span> CoreML</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewController</span>: <span class="title class_ inherited__">UIViewController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">viewDidLoad</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        <span class="comment">// 模型配置</span></span><br><span class="line">        <span class="keyword">let</span> config <span class="operator">=</span> <span class="type">MLModelConfiguration</span>()</span><br><span class="line">        <span class="comment">// 初始化模型</span></span><br><span class="line">        <span class="keyword">let</span> model <span class="operator">=</span> <span class="keyword">try?</span> <span class="type">VideoFrameChineseModel</span>(configuration: config)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> url <span class="operator">=</span> <span class="type">Bundle</span>.main.url(forResource: <span class="string">&quot;8shang&quot;</span>, withExtension: <span class="string">&quot;png&quot;</span>) &#123;</span><br><span class="line">            <span class="comment">// 构建输出结果</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> pResult <span class="operator">=</span> <span class="keyword">try?</span> model<span class="operator">?</span>.prediction(input: <span class="type">VideoFrameChineseModelInput</span>(imageAt: url)) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;检测到目标属于: <span class="subst">\(pResult.target)</span> 测试集&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中，pResult 为 VideoFrameChineseModelInput 类型的输出结果，其遵循了 <code>MLFeatureProvider</code> 协议 ，我们可以在 pResult 中读取到模型预测的对象名称（也就是我们的训练集名称），以及预测结果中各训练集所占的百分比的比例等信息。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// Model Prediction Output Type</span></span><br><span class="line"><span class="keyword">@available</span>(<span class="keyword">macOS</span> <span class="number">14.0</span>, <span class="keyword">iOS</span> <span class="number">17.0</span>, <span class="keyword">tvOS</span> <span class="number">17.0</span>, <span class="operator">*</span>)</span><br><span class="line"><span class="keyword">@available</span>(<span class="keyword">watchOS</span>, unavailable)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VideoFrameChineseModelInput</span> : <span class="title class_ inherited__">MLFeatureProvider</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// Source provided by CoreML</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> provider : <span class="type">MLFeatureProvider</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/// target as string value</span></span><br><span class="line">    <span class="keyword">var</span> target: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.provider.featureValue(for: <span class="string">&quot;target&quot;</span>)<span class="operator">!</span>.stringValue</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// targetProbability as dictionary of strings to doubles</span></span><br><span class="line">    <span class="keyword">var</span> targetProbability: [<span class="type">String</span> : <span class="type">Double</span>] &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.provider.featureValue(for: <span class="string">&quot;targetProbability&quot;</span>)<span class="operator">!</span>.dictionaryValue <span class="keyword">as!</span> [<span class="type">String</span> : <span class="type">Double</span>]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> featureNames: <span class="type">Set</span>&lt;<span class="type">String</span>&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.provider.featureNames</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">featureValue</span>(<span class="params">for</span> <span class="params">featureName</span>: <span class="type">String</span>) -&gt; <span class="type">MLFeatureValue</span>? &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.provider.featureValue(for: featureName)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">target</span>: <span class="type">String</span>, <span class="params">targetProbability</span>: [<span class="params">String</span> : <span class="type">Double</span>]) &#123;</span><br><span class="line">        <span class="keyword">self</span>.provider <span class="operator">=</span> <span class="keyword">try!</span> <span class="type">MLDictionaryFeatureProvider</span>(dictionary: [<span class="string">&quot;target&quot;</span> : <span class="type">MLFeatureValue</span>(string: target), <span class="string">&quot;targetProbability&quot;</span> : <span class="type">MLFeatureValue</span>(dictionary: targetProbability <span class="keyword">as</span> [AnyHashable : <span class="type">NSNumber</span>])])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">features</span>: <span class="type">MLFeatureProvider</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.provider <span class="operator">=</span> features</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="模型导入到工程内问题解决方案"><a href="#模型导入到工程内问题解决方案" class="headerlink" title="模型导入到工程内问题解决方案"></a>模型导入到工程内问题解决方案</h4><h5 id="Core-ML-模型导入工程后-Swift-类无法识别的问题"><a href="#Core-ML-模型导入工程后-Swift-类无法识别的问题" class="headerlink" title="Core ML 模型导入工程后 Swift 类无法识别的问题"></a>Core ML 模型导入工程后 Swift 类无法识别的问题</h5><p>解决方案：</p>
<ol>
<li><p>检查 MLModel 的语言类型，点击工程内的模型，查看如下信息，<strong>一般默认情况下，Xcode 会自动设置为</strong> **<code>Objective-C</code> ** <strong>类型</strong></p>
<img src="/image/client-ai-01-16.png">
</li>
<li><p>找到<code>Build settings</code> -&gt; 搜索 <code>CoreML Model Class Generation Language</code> -&gt; 将 <code>Automatic</code>改为 <code>Swift</code> 即可</p>
<img src="/image/client-ai-01-17.png"></li>
</ol>
<h5 id="Core-ML-模型在-xcodeproj-工程内可识别，但-xcworkspace-中无法识别"><a href="#Core-ML-模型在-xcodeproj-工程内可识别，但-xcworkspace-中无法识别" class="headerlink" title="Core ML 模型在 .xcodeproj 工程内可识别，但 .xcworkspace 中无法识别"></a>Core ML 模型在 .xcodeproj 工程内可识别，但 .xcworkspace 中无法识别</h5><ol>
<li>执行 <code>pod deintegrate</code></li>
<li>执行 <code>rm -rf PROJECTNAME.xcworkspace/</code></li>
<li>执行 <code>pod install</code></li>
</ol>
<p>会重新生成全新的 .xcworkspace 工程文件，运行这个新的工程文件进行编译即可</p>
<h2 id="洋葱学园在端智能场景的落地"><a href="#洋葱学园在端智能场景的落地" class="headerlink" title="洋葱学园在端智能场景的落地"></a>洋葱学园在端智能场景的落地</h2><h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><ul>
<li>智能识别学习视频帧图，快速定位到视频内容，能够最大程度的从域外流量进行引流，如用户在抖音看到分享洋葱学园课程的视频，被课程内容吸引而下载了 APP，此时又想详细学习当时看到的那个视频的完整内容，那么截图抖音视频，进入端内进行图像识别，即可搜索出对应的视频并播放学习，如果是付费视频还可以促进付费转换。</li>
<li>智能搜索推荐，在搜索上利用机器学习模型对语言进行分词解析，推荐内容，更快速的找到搜索词条，简化用户触达学习场景的复杂度。</li>
<li>洋葱 TV 话题相关视频推荐，端智能排序进行相关内容输出，例如抖音。</li>
<li>首页定制化智能推荐，千人千面首页板块，例如手淘。</li>
<li>本地的用户行为分析，操作分析等等。</li>
</ul>
<h3 id="模型如何训练"><a href="#模型如何训练" class="headerlink" title="模型如何训练"></a>模型如何训练</h3><ul>
<li>将数据源利用 Core ML 进行训练后，产出模型内置与客户端内，例如视频帧数据源训练，将各视频进行逐帧训练，训练完毕后产出模型。</li>
</ul>
<h3 id="模型如何更新"><a href="#模型如何更新" class="headerlink" title="模型如何更新"></a>模型如何更新</h3><ul>
<li>客户端发版更新</li>
<li>对 cmmodel 类型进行 zip 下发覆盖策略更新，如更新后上传至服务器，更新后下发解压覆盖原文件</li>
</ul>
<h2 id="延伸阅读"><a href="#延伸阅读" class="headerlink" title="延伸阅读"></a>延伸阅读</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.6aiq.com/article/1639437466877">淘系技术 | 端智能技术体系概述</a></li>
<li><a target="_blank" rel="noopener" href="https://tech.meituan.com/2023/07/13/exploration-and-practice-of-meituan-waimai-intelligent-companion-search-guide.html">美团外卖智能陪伴型导购的探索与实践</a></li>
<li><a target="_blank" rel="noopener" href="https://tech.meituan.com/2022/06/16/edge-search-rerank.html">端智能在大众点评搜索重排序的应用实践</a></li>
<li><a target="_blank" rel="noopener" href="https://tech.meituan.com/2023/02/17/interactive-recommendation-system-for-meituan-waimai.html">交互式推荐在外卖场景的探索与应用</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/7134499171221897253">端智能技术演进与实践</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/coreml">Core ML 官方文档</a></li>
<li><a target="_blank" rel="noopener" href="https://swift.gg/2018/05/28/coreml-introduction/">Core ML入门：构建一个简单的图像识别应用</a></li>
</ul>

  </section>

</article>

<section class="read-more">
           
    
               
            <div class="read-more-item">
                <span class="read-more-item-dim">最近的文章</span>
                <h2 class="post-list__post-title post-title"><a href="/ios-short-video-fast/" title="iOS 短视频播放列表优化策略">iOS 短视频播放列表优化策略</a></h2>
                <p class="excerpt">
                
                基于洋葱学院短视频播放器进行优化改造，以下是优化策略图
三播放器加载策略

业务流程优化

                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2023-12-18T07:04:22.000Z" class="post-list__meta--date date">2023-12-18</time> &#8226; <span class="post-list__meta--tags tags">于 
  <a class="-none-link" href="/tags/iOS/" rel="tag">iOS</a>, <a class="-none-link" href="/tags/%E4%BC%98%E5%8C%96/" rel="tag">优化</a>, <a class="-none-link" href="/tags/%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E5%99%A8/" rel="tag">视频播放器</a>
</span><a class="btn-border-small" href="/ios-short-video-fast/">开始阅读</a></div>
                           
            </div>
        
        
               
            <div class="read-more-item">
                <span class="read-more-item-dim">更早的文章</span>
                <h2 class="post-list__post-title post-title"><a href="/ios-moudle-end/" title="洋葱学园 iOS 端组件化重构之路[三]-重构完成">洋葱学园 iOS 端组件化重构之路[三]-重构完成</a></h2>
                <p class="excerpt">
                
                

概述
以下数据均已脱敏

当前，洋葱学园移动端工程的组件化完成度较低，在影响工程师开发效率的同时，又难以兜住持续集成的影响范围，不利于整体工程的高质量建设，已无法满足日益增长的工程预期与精细化控制的需求，更是掣肘了对公司业务快速扩展的响应速度。
当前问题业务侧影响
业务组件独立度的低，难以快速部
                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2023-09-05T08:45:13.000Z" class="post-list__meta--date date">2023-09-05</time> &#8226; <span class="post-list__meta--tags tags">于 
  <a class="-none-link" href="/tags/iOS/" rel="tag">iOS</a>, <a class="-none-link" href="/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/" rel="tag">组件化</a>, <a class="-none-link" href="/tags/%E9%87%8D%E6%9E%84/" rel="tag">重构</a>
</span><a class="btn-border-small" href="/ios-moudle-end/">开始阅读</a></div>
                       
            </div>
        
     
   
   
  
</section>

  
<section class="post-comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      var disqus_shortname = 'warpdrive'; 
      
  var disqus_identifier = '/client-ai-01/';
  var disqus_title = '「端智能」神经网络/机器学习在 iOS 端的应用与场景落地';
  var disqus_url = 'http://shevakuilin.com/client-ai-01/';
  

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          //dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
          dsq.src = 'https://a.disquscdn.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a target="_blank" rel="noopener" href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


            <footer class="footer">
    <span class="footer__copyright">
        &copy; 2025 ShevaKuilin - 跃迁引擎 <a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/"> 渝ICP备 19012091</a>, 本站点采用 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>
       
    </span>
    <span class="footer__copyright">
             - 基于 <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a> 搭建，使用 <a target="_blank" rel="noopener" href="https://github.com/monniya/hexo-theme-new-vno ">new-vno</a> 主题，由<a target="_blank" rel="noopener" href="https://monniya.com ">@Monniya</a> 修改自 <a href="https://github.com/lenbo-ma/hexo-theme-vno" target="_blank">Vno</a>, 原创出自<a href="http://github.com/onevcat/vno" target="_blank">onevcat</a>
         </span>
       
    
    
</footer>


        </div>
    </div>

     
    


    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    
</body>
</html>
