<!DOCTYPE html>
<html lang="z">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    
    <title>HarmonyOS - 鸿蒙手势处理及实现原理 | 跃迁引擎</title>
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="iOS Research &amp; Development">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="HarmonyOS - 鸿蒙手势处理及实现原理 | 跃迁引擎">
    <meta name="twitter:description" content="iOS Research &amp; Development">

    <meta property="og:type" content="article">
    <meta property="og:title" content="HarmonyOS - 鸿蒙手势处理及实现原理 | 跃迁引擎">
    <meta property="og:description" content="iOS Research &amp; Development">

    
    <meta name="author" content="ShevaKuilin">
    
    
<link rel="stylesheet" href="/css/vno.css">

    
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">


    
    <link rel="icon" href="/images/favicon.png">
    

    <meta name="generator" content="hexo"/>
    

    <link rel="canonical" href="http://shevakuilin.com/hm-gesture/"/>

                 
</head>

<body class="home-template no-js">
    
<script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>

    
<script src="/js/main.js"></script>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>

    
<header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/background.jpg)">
  <div class="panel-main">
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/" title="前往 跃迁引擎 的主页"><img src="/images/avatar.jpeg" width="80" alt="跃迁引擎 logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage for 跃迁引擎">跃迁引擎</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">空気を読んだ雨降らないでよ</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">iOS Research & Development</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />

        <div class="navigation-wrapper">
          <div>
          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="访问博客" class="blog-button">主页</a></li>
            
              <li class="navigation__item"><a href="/archives">所有文章</a></li>
            
              <li class="navigation__item"><a href="/tags/算法/">算法</a></li>
            
              <li class="navigation__item"><a href="/tags/iOS/">iOS</a></li>
            
              <li class="navigation__item"><a href="/tags/AI/">AI</a></li>
            
              <li class="navigation__item"><a href="/tags/HarmonyOS/">HarmonyOS</a></li>
            
              <li class="navigation__item"><a href="/tags/Rust/">Rust</a></li>
            
              <li class="navigation__item"><a href="/tags/札记/">札记</a></li>
            
              <li class="navigation__item"><a href="/tags/随笔/">随笔</a></li>
            
              <li class="navigation__item"><a href="/tags/折腾日记/">折腾日记</a></li>
            
            </ul>
          </nav>
          </div>
          <div>
          <nav class="cover-navigation navigation--social">
  <ul class="navigation">

  <!-- Weibo-->
  

  <!-- Github -->
  
  <li class="navigation__item">
    <a href="https://github.com/shevakuilin" title="查看我的GitHub主页" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>


<!-- Stack Overflow -->
        

  <!-- Google Plus -->
  

<!-- Facebook -->

  
<!-- Twitter -->

  



  </ul>
</nav>

          </div>
        </div>

      </div>

    </div>

    <div class="panel-cover--overlay cover-disabled"></div>
  </div> 
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single">

  <header class="post-header">
    <div class="post-meta">
      <time datetime="2024-03-05T05:37:18.000Z" class="post-list__meta--date date">2024-03-05</time> &#8226; <span class="post-meta__tags tags">于 
  <a class="-none-link" href="/tags/HarmonyOS/" rel="tag">HarmonyOS</a>, <a class="-none-link" href="/tags/%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/" rel="tag">原理解析</a>, <a class="-none-link" href="/tags/%E6%89%8B%E5%8A%BF%E5%A4%84%E7%90%86/" rel="tag">手势处理</a>, <a class="-none-link" href="/tags/%E9%B8%BF%E8%92%99/" rel="tag">鸿蒙</a>
 </span>
      <span class="page-pv">
       阅读 <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span>
      </span> 
   
    </div>
    <h1 class="post-title">HarmonyOS - 鸿蒙手势处理及实现原理</h1>
  </header>

  <section class="post">
    <img src="https://github.com/shevakuilin/GhostPostsImages/raw/master/hm-gesture.png">

<h1 id="一、手势通用事件"><a href="#一、手势通用事件" class="headerlink" title="一、手势通用事件"></a>一、手势通用事件</h1><h3 id="点击事件"><a href="#点击事件" class="headerlink" title="点击事件"></a>点击事件</h3><table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>event</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-events-click-V13#clickevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">ClickEvent</a></td>
<td>是</td>
<td>获得<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-events-click-V13#clickevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">ClickEvent</a>对象。</td>
</tr>
<tr>
<td>distanceThreshold</td>
<td>number</td>
<td>是</td>
<td>点击事件移动阈值。当设置的值小于等于0时，会被转化为默认值。 默认值：2^31-1 说明：当手指的移动距离超出开发者预设的移动阈值时，点击识别失败。如果初始化为默认阈值时，手指移动超过组件热区范围，点击识别失败。</td>
</tr>
</tbody></table>
<p><strong>ClickEvent对象说明</strong></p>
<p>继承于<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#baseevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">BaseEvent</a>。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>x</td>
<td>number</td>
<td>点击位置相对于被点击元素左边缘的X坐标。 单位：vp 卡片能力： 从API version 9开始，该接口支持在ArkTS卡片中使用。 元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>点击位置相对于被点击元素原始区域左上角的Y坐标。 单位：vp 卡片能力： 从API version 9开始，该接口支持在ArkTS卡片中使用。 元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>target8+</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-events-click-V13#eventtarget8%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">EventTarget</a></td>
<td>触发事件的元素对象显示区域。 卡片能力： 从API version 9开始，该接口支持在ArkTS卡片中使用。 元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>windowX10+</td>
<td>number</td>
<td>点击位置相对于应用窗口左上角的X坐标。 单位：vp 卡片能力： 从API version 9开始，该接口支持在ArkTS卡片中使用。 元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>windowY10+</td>
<td>number</td>
<td>点击位置相对于应用窗口左上角的Y坐标。 单位：vp 卡片能力： 从API version 9开始，该接口支持在ArkTS卡片中使用。 元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>displayX10+</td>
<td>number</td>
<td>点击位置相对于应用屏幕左上角的X坐标。 单位：vp 卡片能力： 从API version 9开始，该接口支持在ArkTS卡片中使用。 元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>displayY10+</td>
<td>number</td>
<td>点击位置相对于应用屏幕左上角的Y坐标。 单位：vp 卡片能力： 从API version 9开始，该接口支持在ArkTS卡片中使用。 元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>screenX(deprecated)</td>
<td>number</td>
<td>点击位置相对于应用窗口左上角的X坐标。从API Version 10开始不再维护，建议使用windowX代替。</td>
</tr>
<tr>
<td>screenY(deprecated)</td>
<td>number</td>
<td>点击位置相对于应用窗口左上角的Y坐标。从API Version 10开始不再维护，建议使用windowY代替。</td>
</tr>
<tr>
<td>preventDefault12+</td>
<td>() &#x3D;&gt; void</td>
<td>阻止默认事件。 说明： 该接口仅支持部分组件使用，当前支持组件：RichEditor。 元服务API： 从API version 12开始，该接口支持在元服务中使用。</td>
</tr>
</tbody></table>
<p><strong>EventTarget(8+)对象说明</strong></p>
<p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。</p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>参数类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>area</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-types-V13#area8">Area</a></td>
<td>目标元素的区域信息。</td>
</tr>
</tbody></table>
<p>示例：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; hilog &#125; from &quot;@kit.PerformanceAnalysisKit&quot;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 点击事件</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ClickExample</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@State</span> text: string <span class="operator">=</span> &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">  onPageShow(): void &#123;</span><br><span class="line">    hilog.info(<span class="number">0x0001</span>, &#x27;<span class="type">ClickExample</span>&#x27;, &#x27;onPageShow&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">NavDestination</span>() &#123;</span><br><span class="line">      <span class="type">Column</span>() &#123;</span><br><span class="line">        <span class="type">Row</span>(&#123; space: <span class="number">20</span> &#125;) &#123;</span><br><span class="line">          <span class="type">Button</span>(&#x27;<span class="type">Click</span>&#x27;).width(<span class="number">100</span>).height(<span class="number">40</span>)</span><br><span class="line">            .onClick((event<span class="operator">?</span>: <span class="type">ClickEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (event) &#123;</span><br><span class="line">                this.text <span class="operator">=</span> &#x27;<span class="type">Click</span> Point:&#x27; <span class="operator">+</span> &#x27;\n  windowX:&#x27; <span class="operator">+</span> event.windowX <span class="operator">+</span> &#x27;\n  windowY:&#x27; <span class="operator">+</span> event.windowY</span><br><span class="line">                  <span class="operator">+</span> &#x27;\n  x:&#x27; <span class="operator">+</span> event.x <span class="operator">+</span> &#x27;\n  y:&#x27; <span class="operator">+</span> event.y <span class="operator">+</span> &#x27;\ntarget:&#x27; <span class="operator">+</span> &#x27;\n  component globalPos:(&#x27;</span><br><span class="line">                  <span class="operator">+</span> event.target.area.globalPosition.x <span class="operator">+</span> &#x27;,&#x27; <span class="operator">+</span> event.target.area.globalPosition.y <span class="operator">+</span> &#x27;)\n  width:&#x27;</span><br><span class="line">                  <span class="operator">+</span> event.target.area.width <span class="operator">+</span> &#x27;\n  height:&#x27; <span class="operator">+</span> event.target.area.height <span class="operator">+</span> &#x27;\ntimestamp&#x27; <span class="operator">+</span></span><br><span class="line">                event.timestamp;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;, <span class="number">20</span>)</span><br><span class="line">          <span class="type">Button</span>(&#x27;<span class="type">Click</span>&#x27;).width(<span class="number">200</span>).height(<span class="number">50</span>)</span><br><span class="line">            .onClick((event<span class="operator">?</span>: <span class="type">ClickEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (event) &#123;</span><br><span class="line">                this.text <span class="operator">=</span> &#x27;<span class="type">Click</span> Point:&#x27; <span class="operator">+</span> &#x27;\n  windowX:&#x27; <span class="operator">+</span> event.windowX <span class="operator">+</span> &#x27;\n  windowY:&#x27; <span class="operator">+</span> event.windowY</span><br><span class="line">                  <span class="operator">+</span> &#x27;\n  x:&#x27; <span class="operator">+</span> event.x <span class="operator">+</span> &#x27;\n  y:&#x27; <span class="operator">+</span> event.y <span class="operator">+</span> &#x27;\ntarget:&#x27; <span class="operator">+</span> &#x27;\n  component globalPos:(&#x27;</span><br><span class="line">                  <span class="operator">+</span> event.target.area.globalPosition.x <span class="operator">+</span> &#x27;,&#x27; <span class="operator">+</span> event.target.area.globalPosition.y <span class="operator">+</span> &#x27;)\n  width:&#x27;</span><br><span class="line">                  <span class="operator">+</span> event.target.area.width <span class="operator">+</span> &#x27;\n  height:&#x27; <span class="operator">+</span> event.target.area.height <span class="operator">+</span> &#x27;\ntimestamp&#x27; <span class="operator">+</span></span><br><span class="line">                event.timestamp;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;, <span class="number">20</span>)</span><br><span class="line">        &#125;.margin(<span class="number">20</span>)</span><br><span class="line">        <span class="type">Text</span>(this.text).margin(<span class="number">15</span>)</span><br><span class="line">      &#125;.width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    .width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">    .height(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line">export function <span class="type">ClickExampleBuilder</span>(name: string, param: <span class="type">Object</span>) &#123;</span><br><span class="line">  <span class="type">ClickExample</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ODA0ZTlhMWQ3M2Y0MjBjY2E3NjY4NzhmYTUxM2E1ZGRfWWloRkZaR09IUFlGbjc3SFpsaUY2YmFmRUM5RTdrREVfVG9rZW46SEx5QmJyeTVnb1hKc3h4UVg5Q2Nhd2pubmdoXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<h3 id="触摸事件"><a href="#触摸事件" class="headerlink" title="触摸事件"></a>触摸事件</h3><p><strong>onTouch</strong></p>
<p>onTouch(event: (event: TouchEvent) &#x3D;&gt; void): T</p>
<p>手指触摸动作触发该回调。</p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>event</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-events-touch-V13#touchevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">TouchEvent</a></td>
<td>是</td>
<td>获得TouchEvent对象。</td>
</tr>
</tbody></table>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>T</td>
<td>返回当前组件。</td>
</tr>
</tbody></table>
<p><strong>TouchEvent对象说明</strong></p>
<p>继承于<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#baseevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">BaseEvent</a>。非事件注入场景下，changedTouches是按屏幕显示刷新率重采样的点，touches是按器件刷新率报上来的点，changedTouches的数据可能会和touches里面的不相同。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-appendix-enums-V13#touchtype">TouchType</a></td>
<td>触摸事件的类型。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>touches</td>
<td>Array&lt;<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-events-touch-V13#touchobject%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">TouchObject</a>&gt;</td>
<td>全部手指信息。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>changedTouches</td>
<td>Array&lt;<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-events-touch-V13#touchobject%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">TouchObject</a>&gt;</td>
<td>当前发生变化的手指信息。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>stopPropagation</td>
<td>() &#x3D;&gt; void</td>
<td>阻塞事件冒泡。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>preventDefault12+</td>
<td>() &#x3D;&gt; void</td>
<td>阻止默认事件，具体功能暂未实现。元服务API： 从API version 12开始，该接口支持在元服务中使用。</td>
</tr>
</tbody></table>
<p><strong>getHistoricalPoints(10+)</strong></p>
<p>getHistoricalPoints(): Array<HistoricalPoint></p>
<p>获取当前帧所有的历史点。不同设备每帧的触摸事件频率不同，且该接口只能在<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-events-touch-V13#touchevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">TouchEvent</a>中调用，可以通过该接口获取触发<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-events-touch-V13#ontouch">onTouch</a>时当前帧历史点的相关信息。<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-events-touch-V13#ontouch">onTouch</a>一帧只会调用一次，若当前帧收到的<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-events-touch-V13#touchevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">TouchEvent</a>大于1，会将该帧最后一个点通过<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-events-touch-V13#ontouch">onTouch</a>返还，剩余点作为历史点。</p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>返回值:</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Array&lt;<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-events-touch-V13#historicalpoint10%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">HistoricalPoint</a>&gt;</td>
<td>由历史点组成的数组。</td>
</tr>
</tbody></table>
<p><strong>TouchObject对象说明</strong></p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-appendix-enums-V13#touchtype">TouchType</a></td>
<td>触摸事件的类型。 元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>id</td>
<td>number</td>
<td>手指唯一标识符。 元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>x</td>
<td>number</td>
<td>触摸点相对于事件响应组件的左上角的X坐标。 单位：vp 元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>触摸点相对于事件响应组件的左上角的Y坐标。 单位：vp 元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>windowX10+</td>
<td>number</td>
<td>触摸点相对于应用窗口左上角的X坐标。 单位：vp 元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>windowY10+</td>
<td>number</td>
<td>触摸点相对于应用窗口左上角的Y坐标。 单位：vp 元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>displayX10+</td>
<td>number</td>
<td>触摸点相对于应用屏幕左上角的X坐标。 单位：vp 元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>displayY10+</td>
<td>number</td>
<td>触摸点相对于应用屏幕左上角的Y坐标。 单位：vp 元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>screenX(deprecated)</td>
<td>number</td>
<td>触摸点相对于应用窗口左上角的X坐标。 单位：vp 从API version 10开始不再维护，建议使用windowX代替。</td>
</tr>
<tr>
<td>screenY(deprecated)</td>
<td>number</td>
<td>触摸点相对于应用窗口左上角的Y坐标。 单位：vp 从API version 10开始不再维护，建议使用windowY代替。</td>
</tr>
</tbody></table>
<p><strong>HistoricalPoint(10+)对象说明</strong></p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>touchObject</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-events-touch-V13#touchobject%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">TouchObject</a></td>
<td>历史点对应触摸事件的基础信息。</td>
</tr>
<tr>
<td>size</td>
<td>number</td>
<td>历史点对应触摸事件的手指与屏幕的触摸区域大小。默认值：0</td>
</tr>
<tr>
<td>force</td>
<td>number</td>
<td>历史点对应触摸事件的压力大小。默认值：0取值范围：[0,65535)，压力越大值越大。</td>
</tr>
<tr>
<td>timestamp</td>
<td>number</td>
<td>历史点对应触摸事件的时间戳。触发事件时距离系统启动的时间间隔。单位：ns</td>
</tr>
</tbody></table>
<p><strong>示例</strong></p>
<p>该示例通过按钮设置了触摸事件，手指点击按钮时可获取触摸事件的相关参数。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 触摸事件</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">TouchExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> text: string <span class="operator">=</span> &#x27;&#x27;</span><br><span class="line">  <span class="meta">@State</span> eventType: string <span class="operator">=</span> &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">NavDestination</span>() &#123;</span><br><span class="line">      <span class="type">Column</span>() &#123;</span><br><span class="line">        <span class="type">Button</span>(&#x27;<span class="type">Touch</span>&#x27;).height(<span class="number">40</span>).width(<span class="number">100</span>)</span><br><span class="line">          .onTouch((event<span class="operator">?</span>: <span class="type">TouchEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (event) &#123;</span><br><span class="line">              <span class="keyword">if</span> (event.type <span class="operator">===</span> <span class="type">TouchType</span>.<span class="type">Down</span>) &#123;</span><br><span class="line">                this.eventType <span class="operator">=</span> &#x27;<span class="type">Down</span>&#x27;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">if</span> (event.type <span class="operator">===</span> <span class="type">TouchType</span>.<span class="type">Up</span>) &#123;</span><br><span class="line">                this.eventType <span class="operator">=</span> &#x27;<span class="type">Up</span>&#x27;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">if</span> (event.type <span class="operator">===</span> <span class="type">TouchType</span>.<span class="type">Move</span>) &#123;</span><br><span class="line">                this.eventType <span class="operator">=</span> &#x27;<span class="type">Move</span>&#x27;</span><br><span class="line">              &#125;</span><br><span class="line">              this.text <span class="operator">=</span> &#x27;TouchType:&#x27; <span class="operator">+</span> this.eventType <span class="operator">+</span> &#x27;\nDistance between touch point and touch element:\nx: &#x27;</span><br><span class="line">                <span class="operator">+</span> event.touches[<span class="number">0</span>].x <span class="operator">+</span> &#x27;\n&#x27; <span class="operator">+</span> &#x27;y: &#x27; <span class="operator">+</span> event.touches[<span class="number">0</span>].y <span class="operator">+</span> &#x27;\nComponent globalPos:(&#x27;</span><br><span class="line">                <span class="operator">+</span> event.target.area.globalPosition.x <span class="operator">+</span> &#x27;,&#x27; <span class="operator">+</span> event.target.area.globalPosition.y <span class="operator">+</span> &#x27;)\nwidth:&#x27;</span><br><span class="line">                <span class="operator">+</span> event.target.area.width <span class="operator">+</span> &#x27;\nheight:&#x27; <span class="operator">+</span> event.target.area.height</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        <span class="type">Button</span>(&#x27;<span class="type">Touch</span>&#x27;).height(<span class="number">50</span>).width(<span class="number">200</span>).margin(<span class="number">20</span>)</span><br><span class="line">          .onTouch((event<span class="operator">?</span>: <span class="type">TouchEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (event) &#123;</span><br><span class="line">              <span class="keyword">if</span> (event.type <span class="operator">===</span> <span class="type">TouchType</span>.<span class="type">Down</span>) &#123;</span><br><span class="line">                this.eventType <span class="operator">=</span> &#x27;<span class="type">Down</span>&#x27;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">if</span> (event.type <span class="operator">===</span> <span class="type">TouchType</span>.<span class="type">Up</span>) &#123;</span><br><span class="line">                this.eventType <span class="operator">=</span> &#x27;<span class="type">Up</span>&#x27;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">if</span> (event.type <span class="operator">===</span> <span class="type">TouchType</span>.<span class="type">Move</span>) &#123;</span><br><span class="line">                this.eventType <span class="operator">=</span> &#x27;<span class="type">Move</span>&#x27;</span><br><span class="line">              &#125;</span><br><span class="line">              this.text <span class="operator">=</span> &#x27;TouchType:&#x27; <span class="operator">+</span> this.eventType <span class="operator">+</span> &#x27;\nDistance between touch point and touch element:\nx: &#x27;</span><br><span class="line">                <span class="operator">+</span> event.touches[<span class="number">0</span>].x <span class="operator">+</span> &#x27;\n&#x27; <span class="operator">+</span> &#x27;y: &#x27; <span class="operator">+</span> event.touches[<span class="number">0</span>].y <span class="operator">+</span> &#x27;\nComponent globalPos:(&#x27;</span><br><span class="line">                <span class="operator">+</span> event.target.area.globalPosition.x <span class="operator">+</span> &#x27;,&#x27; <span class="operator">+</span> event.target.area.globalPosition.y <span class="operator">+</span> &#x27;)\nwidth:&#x27;</span><br><span class="line">                <span class="operator">+</span> event.target.area.width <span class="operator">+</span> &#x27;\nheight:&#x27; <span class="operator">+</span> event.target.area.height</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        <span class="type">Text</span>(this.text)</span><br><span class="line">      &#125;.width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;).padding(<span class="number">30</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">    .height(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line">export function <span class="type">TouchExampleBuilder</span>() &#123;</span><br><span class="line">  <span class="type">TouchExample</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDZlNWRlNDQ2MTY5MDlhNGQwZjhmYThjNmY1ZjY0MzBfcWZadVlvU083SlE4SjlNRjIzRFF5eFowa2p3VDBjQkZfVG9rZW46TXRVdmJpZ3Y0b3ZBc0N4SEI2dWNXNDg4bm1jXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<h3 id="无障碍悬浮事件"><a href="#无障碍悬浮事件" class="headerlink" title="无障碍悬浮事件"></a>无障碍悬浮事件</h3><p>在开启无障碍模式后，Touch事件会转换为无障碍悬浮事件。</p>
<p><strong>onAccessibilityHover</strong></p>
<p>onAccessibilityHover(callback: AccessibilityCallback): T</p>
<p>开启无障碍模式后，单指触摸绑定该回调的组件时触发该回调。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>必填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>callback</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-accessibility-hover-event-V13#accessibilitycallback">AccessibilityCallback</a></td>
<td>是</td>
<td>提供开启无障碍模式后的无障碍悬浮回调事件，当开启无障碍模式后，单指触摸绑定该回调的组件时触发该回调。</td>
</tr>
</tbody></table>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>T</td>
<td>返回当前组件。</td>
</tr>
</tbody></table>
<p><strong>AccessibilityCallback</strong></p>
<p>type AccessibilityCallback &#x3D; (isHover: boolean, event: AccessibilityHoverEvent) &#x3D;&gt; void</p>
<p>提供开启无障碍模式后的无障碍悬浮回调事件类型。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>isHover</td>
<td>boolean</td>
<td>是</td>
<td>表示开启无障碍模式后，手指是否悬浮在组件上，手指进入时为true, 退出时为false。</td>
</tr>
<tr>
<td>event</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-accessibility-hover-event-V13#accessibilityhoverevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">AccessibilityHoverEvent</a></td>
<td>是</td>
<td>获得AccessibilityHoverEvent对象。</td>
</tr>
</tbody></table>
<p><strong>AccessibilityHoverEvent对象说明</strong></p>
<p>继承于<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#baseevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">BaseEvent</a>。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>属性类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-accessibility-hover-event-V13#accessibilityhovertype">AccessibilityHoverType</a></td>
<td>无障碍悬浮动作。</td>
</tr>
<tr>
<td>x</td>
<td>number</td>
<td>手指位置相对于当前组件左上角的x轴坐标。单位：vp</td>
</tr>
<tr>
<td>y</td>
<td>number</td>
<td>手指位置相对于当前组件左上角的y轴坐标。单位：vp</td>
</tr>
<tr>
<td>windowX</td>
<td>number</td>
<td>手指位置相对于应用窗口左上角的x轴坐标。单位：vp</td>
</tr>
<tr>
<td>windowY</td>
<td>number</td>
<td>手指位置相对于应用窗口左上角的y轴坐标。单位：vp</td>
</tr>
<tr>
<td>displayX</td>
<td>number</td>
<td>手指位置相对于应用屏幕左上角的x轴坐标。单位：vp</td>
</tr>
<tr>
<td>displayY</td>
<td>number</td>
<td>手指位置相对于应用屏幕左上角的y轴坐标。单位：vp</td>
</tr>
</tbody></table>
<p><strong>AccessibilityHoverType</strong></p>
<p>定义无障碍悬浮类型。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>HOVER_ENTER</td>
<td>0</td>
<td>手指按下时触发。</td>
</tr>
<tr>
<td>HOVER_MOVE</td>
<td>1</td>
<td>触摸移动时触发。</td>
</tr>
<tr>
<td>HOVER_EXIT</td>
<td>2</td>
<td>抬手触发。</td>
</tr>
<tr>
<td>HOVER_CANCEL</td>
<td>3</td>
<td>打断取消当前触发的事件。</td>
</tr>
</tbody></table>
<p><strong>示例</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">OnAccessibilityHoverEventExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> hoverText: string <span class="operator">=</span> &#x27;no hover&#x27;;</span><br><span class="line">  <span class="meta">@State</span> color: <span class="type">Color</span> <span class="operator">=</span> <span class="type">Color</span>.<span class="type">Blue</span>;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">Column</span>(&#123; space: <span class="number">20</span> &#125;) &#123;</span><br><span class="line">      <span class="type">Button</span>(this.hoverText)</span><br><span class="line">        .width(<span class="number">180</span>).height(<span class="number">80</span>)</span><br><span class="line">        .backgroundColor(this.color)</span><br><span class="line">        .onAccessibilityHover((isHover: boolean, event: <span class="type">AccessibilityHoverEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// 通过onAccessibilityHover事件动态修改按钮在是否有鼠标悬浮时的文本内容与背景颜色</span></span><br><span class="line">          <span class="keyword">if</span> (isHover) &#123;</span><br><span class="line">            this.hoverText <span class="operator">=</span> &#x27;hover&#x27;;</span><br><span class="line">            this.color <span class="operator">=</span> <span class="type">Color</span>.<span class="type">Pink</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            this.hoverText <span class="operator">=</span> &#x27;no hover&#x27;;</span><br><span class="line">            this.color <span class="operator">=</span> <span class="type">Color</span>.<span class="type">Blue</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;.padding(&#123; top: <span class="number">30</span> &#125;).width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="二、通用属性"><a href="#二、通用属性" class="headerlink" title="二、通用属性"></a>二、通用属性</h1><h3 id="动态手势设置"><a href="#动态手势设置" class="headerlink" title="动态手势设置"></a>动态手势设置</h3><p>动态设置组件绑定的手势，支持开发者在属性设置时使用if&#x2F;else语法。</p>
<p><strong>gestureModifier</strong></p>
<p>gestureModifier(modifier: GestureModifier)</p>
<p>动态设置组件绑定的手势。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>modifier</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-attributes-gesture-modifier-V13#gesturemodifier-1">GestureModifier</a></td>
<td>是</td>
<td>在当前组件上，动态设置组件绑定的手势，支持使用if&#x2F;else语法。modifier: 手势修改器，开发者需要自定义class实现GestureModifier接口。</td>
</tr>
</tbody></table>
<p><strong>GestureModifier</strong></p>
<p>开发者需要自定义class实现GestureModifier接口。</p>
<p><strong>applyGesture</strong></p>
<p>applyGesture(event: UIGestureEvent): void</p>
<p>组件需要绑定的手势。</p>
<p>开发者可根据需要自定义实现这个方法，对组件设置需要绑定的手势，支持使用if&#x2F;else语法进行动态设置。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>参数</strong>：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>event</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-uigestureevent-V13#uigestureevent">UIGestureEvent</a></td>
<td>UIGestureEvent对象，用于设置组件需要绑定的手势。</td>
</tr>
</tbody></table>
<p><strong>示例</strong></p>
<p>该示例通过gestureModifier动态设置组件绑定的手势。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyButtonModifier</span> implements <span class="type">GestureModifier</span> &#123;</span><br><span class="line">  supportDoubleTap: boolean <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  actionBack<span class="operator">?</span>: ((log: string) <span class="operator">=&gt;</span> void)</span><br><span class="line"></span><br><span class="line">  applyGesture(event: <span class="type">UIGestureEvent</span>): void &#123;</span><br><span class="line">    <span class="keyword">if</span> (this.supportDoubleTap) &#123;</span><br><span class="line">      event.addGesture(</span><br><span class="line">        new <span class="type">TapGestureHandler</span>(&#123; count: <span class="number">2</span>, fingers: <span class="number">1</span> &#125;)</span><br><span class="line">          .tag(<span class="string">&quot;aaa&quot;</span>)</span><br><span class="line">          .onAction((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (this.actionBack) &#123;</span><br><span class="line">              this.actionBack(<span class="string">&quot;button tap&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">      )</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      event.addGesture(</span><br><span class="line">        new <span class="type">PanGestureHandler</span>()</span><br><span class="line">          .onActionStart(()<span class="operator">=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (this.actionBack) &#123;</span><br><span class="line">              this.actionBack(<span class="string">&quot;Pan start&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">          .onActionEnd(() <span class="operator">=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (this.actionBack) &#123;</span><br><span class="line">              this.actionBack(<span class="string">&quot;Pan end&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">          .onActionCancel(() <span class="operator">=&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (this.actionBack) &#123;</span><br><span class="line">              this.actionBack(<span class="string">&quot;Pan cancel&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 动态手势设置</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ActiveGesture</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> modifier: <span class="type">MyButtonModifier</span> <span class="operator">=</span> new <span class="type">MyButtonModifier</span>()</span><br><span class="line">  <span class="meta">@State</span> text: string <span class="operator">=</span> &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">  onPageShow(): void &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  aboutToAppear(): void &#123;</span><br><span class="line">    this.modifier.actionBack <span class="operator">=</span> (log: string) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">      console.log(<span class="string">&quot;actionBack &quot;</span> <span class="operator">+</span> log)</span><br><span class="line">      this.text <span class="operator">=</span> log</span><br><span class="line">      this.modifier.supportDoubleTap <span class="operator">=</span> <span class="operator">!</span>this.modifier.supportDoubleTap</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">NavDestination</span>() &#123;</span><br><span class="line">      <span class="type">Row</span>() &#123;</span><br><span class="line">        <span class="type">Column</span>() &#123;</span><br><span class="line">          <span class="type">Column</span>()</span><br><span class="line">            .gestureModifier(this.modifier)</span><br><span class="line">            .width(<span class="number">500</span>)</span><br><span class="line">            .height(<span class="number">200</span>)</span><br><span class="line">            .backgroundColor(<span class="type">Color</span>.<span class="type">Blue</span>)</span><br><span class="line"></span><br><span class="line">          <span class="type">Text</span>(this.text)</span><br><span class="line">            .fontColor(<span class="type">Color</span>.<span class="type">Gray</span>)</span><br><span class="line">            .fontSize(<span class="number">15</span>)</span><br><span class="line">            .width(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">            .height(<span class="number">30</span>)</span><br><span class="line">            .backgroundColor(<span class="type">Color</span>.<span class="type">Yellow</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">      .height(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">    &#125;.width(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .height(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line">export function <span class="type">ActiveGestureBuilder</span>() &#123;</span><br><span class="line">  <span class="type">ActiveGesture</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="触摸热区设置"><a href="#触摸热区设置" class="headerlink" title="触摸热区设置"></a>触摸热区设置</h3><p>适用于支持通用点击事件、通用触摸事件、通用手势处理的组件。</p>
<p><strong>responseRegion</strong></p>
<p>responseRegion(value: Array<Rectangle> | Rectangle)</p>
<p>设置一个或多个触摸热区。</p>
<p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。</p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>value</td>
<td>Array&lt;<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-attributes-touch-target-V13#rectangle%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">Rectangle</a>&gt; | <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-attributes-touch-target-V13#rectangle%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">Rectangle</a></td>
<td>是</td>
<td>设置一个或多个触摸热区，包括位置和大小。默认触摸热区为整个组件，默认值：{x：0,y：0,width：’100%’,height：’100%’} 卡片能力： 从API version 9开始，该接口支持在ArkTS卡片中使用。</td>
</tr>
</tbody></table>
<p><strong>Rectangle对象说明</strong></p>
<p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。</p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>必填</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>x</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-types-V13#length">Length</a></td>
<td>否</td>
<td>触摸点相对于组件左上角的x轴坐标。默认值：0vp</td>
</tr>
<tr>
<td>y</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-types-V13#length">Length</a></td>
<td>否</td>
<td>触摸点相对于组件左上角的y轴坐标。默认值：0vp</td>
</tr>
<tr>
<td>width</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-types-V13#length">Length</a></td>
<td>否</td>
<td>触摸热区的宽度。默认值：’100%’</td>
</tr>
<tr>
<td>height</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-types-V13#length">Length</a></td>
<td>否</td>
<td>触摸热区的高度。默认值：’100%’</td>
</tr>
</tbody></table>
<p><strong>说明</strong></p>
<p>x和y可以设置正负值百分比。当x设置为’100%’时表示热区往右偏移组件本身宽度大小，当x设置为’-100%’时表示热区往左偏移组件本身宽度大小。当y设置为’100%’时表示热区往下偏移组件本身高度大小，当y设置为’-100%’时表示热区往上偏移组件本身高度大小。</p>
<p>width和height只能设置正值百分比。width：’100%’表示热区宽度设置为该组件本身的宽度。比如组件本身宽度是100vp，那么’100%’表示热区宽度也为100vp。height：’100%’表示热区高度设置为该组件本身的高度。</p>
<p>百分比相对于组件自身宽高进行计算。</p>
<p><strong>示例</strong></p>
<p>该示例通过responseRegion对按钮设置触摸热区响应点击事件。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 触摸热区设置</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">TouchTargetExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> text: string <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">NavDestination</span>() &#123;</span><br><span class="line">      <span class="type">Column</span>(&#123; space: <span class="number">20</span> &#125;) &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;&#123;x:0,y:0,width:&#x27;50%&#x27;,height:&#x27;100%&#x27;&#125;&quot;</span>)</span><br><span class="line">        <span class="comment">// 热区宽度为按钮的一半，点击右侧无响应</span></span><br><span class="line">        <span class="type">Button</span>(<span class="string">&quot;button1&quot;</span>)</span><br><span class="line">          .responseRegion(&#123;</span><br><span class="line">            x: <span class="number">0</span>,</span><br><span class="line">            y: <span class="number">0</span>,</span><br><span class="line">            width: &#x27;<span class="number">50</span><span class="operator">%</span>&#x27;,</span><br><span class="line">            height: &#x27;<span class="number">100</span><span class="operator">%</span>&#x27;</span><br><span class="line">          &#125;)</span><br><span class="line">          .onClick(() <span class="operator">=&gt;</span> &#123;</span><br><span class="line">            this.text <span class="operator">=</span> &#x27;button1 clicked&#x27;</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 为一个组件添加多个热区</span></span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;[&#123;x:&#x27;100%&#x27;,y:0,width:&#x27;50%&#x27;,height:&#x27;100%&#x27;&#125;,&quot;</span> <span class="operator">+</span></span><br><span class="line">          <span class="string">&quot;<span class="subst">\n</span>&#123; x: 0, y: 0, width: &#x27;50%&#x27;, height: &#x27;100%&#x27; &#125;]&quot;</span>)</span><br><span class="line">        <span class="type">Button</span>(<span class="string">&quot;button2&quot;</span>)</span><br><span class="line">          .responseRegion([</span><br><span class="line">            &#123;</span><br><span class="line">              x: &#x27;<span class="number">100</span><span class="operator">%</span>&#x27;,</span><br><span class="line">              y: <span class="number">0</span>,</span><br><span class="line">              width: &#x27;<span class="number">50</span><span class="operator">%</span>&#x27;,</span><br><span class="line">              height: &#x27;<span class="number">100</span><span class="operator">%</span>&#x27;</span><br><span class="line">            &#125;, <span class="comment">// 第一个热区宽度为按钮的一半，点击按钮右侧宽度一半区域，点击事件生效</span></span><br><span class="line">            &#123;</span><br><span class="line">              x: <span class="number">0</span>,</span><br><span class="line">              y: <span class="number">0</span>,</span><br><span class="line">              width: &#x27;<span class="number">50</span><span class="operator">%</span>&#x27;,</span><br><span class="line">              height: &#x27;<span class="number">100</span><span class="operator">%</span>&#x27;</span><br><span class="line">            &#125;<span class="comment">// 第二个热区宽度为按钮的一半，点击button2左半边，点击事件生效</span></span><br><span class="line">          ])</span><br><span class="line">          .onClick(() <span class="operator">=&gt;</span> &#123;</span><br><span class="line">            this.text <span class="operator">=</span> &#x27;button2 clicked&#x27;</span><br><span class="line">          &#125;)</span><br><span class="line">        <span class="comment">// 热区大小为整个按钮，且下移一个按钮高度，点击button3下方按钮大小区域，点击事件生效</span></span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;&#123;x:0,y:&#x27;100%&#x27;,width:&#x27;100%&#x27;,height:&#x27;100%&#x27;&#125;&quot;</span>)</span><br><span class="line">        <span class="type">Button</span>(<span class="string">&quot;button3&quot;</span>)</span><br><span class="line">          .responseRegion(&#123;</span><br><span class="line">            x: <span class="number">0</span>,</span><br><span class="line">            y: &#x27;<span class="number">100</span><span class="operator">%</span>&#x27;,</span><br><span class="line">            width: &#x27;<span class="number">100</span><span class="operator">%</span>&#x27;,</span><br><span class="line">            height: &#x27;<span class="number">100</span><span class="operator">%</span>&#x27;</span><br><span class="line">          &#125;)</span><br><span class="line">          .onClick(() <span class="operator">=&gt;</span> &#123;</span><br><span class="line">            this.text <span class="operator">=</span> &#x27;button3 clicked&#x27;</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="type">Text</span>(this.text).margin(&#123; top: <span class="number">50</span> &#125;)</span><br><span class="line">      &#125;.width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;).margin(&#123; top: <span class="number">10</span> &#125;)</span><br><span class="line">    &#125;.width(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .height(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line">export function <span class="type">TouchTargetExampleBuilder</span>() &#123;</span><br><span class="line">  <span class="type">TouchTargetExample</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="触摸测试控制"><a href="#触摸测试控制" class="headerlink" title="触摸测试控制"></a>触摸测试控制</h3><p>设置组件的触摸测试类型。ArkUI开发框架在处理触屏事件时，会在触屏事件触发前，进行按压点和组件区域的触摸测试来收集需要响应触屏事件的组件，然后基于触摸测试结果分发相应的触屏事件。hitTestBehavior属性可以设置不同的触摸测试响应模式，影响组件的触摸测试收集结果，最终影响后续的触屏事件分发，具体影响参考<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-attributes-hit-test-behavior-V13#hittestmode%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E">HitTestMode</a>枚举说明。</p>
<p><strong>说明</strong></p>
<ul>
<li>从API Version 9开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</li>
<li>当Stack组件中有多个节点触摸区域重叠时，如两个节点，默认只会对显示在最上层的节点做触摸测试，若需要显示在下层的节点触发触摸测试，请给显示在上层的节点设置hitTestBehavior为HitTestMode.Transparent。</li>
</ul>
<p><strong>hitTestBehavior</strong></p>
<p>hitTestBehavior(value: HitTestMode)</p>
<p>设置组件的触摸测试类型。</p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>value</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-attributes-hit-test-behavior-V13#hittestmode%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E">HitTestMode</a></td>
<td>是</td>
<td>设置当前组件的触摸测试类型。默认值： HitTestMode.Default</td>
</tr>
</tbody></table>
<p><strong>HitTestMode枚举说明</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>枚举值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Default</td>
<td>0</td>
<td>默认触摸测试效果，自身和子节点都响应触摸测试，但会阻塞兄弟节点的触摸测试。不会影响祖先节点的触摸测试。</td>
</tr>
<tr>
<td>Block</td>
<td>1</td>
<td>自身响应触摸测试，阻塞子节点和兄弟节点的触摸测试。会阻塞祖先节点的触摸测试。</td>
</tr>
<tr>
<td>Transparent</td>
<td>2</td>
<td>自身和子节点都响应触摸测试，不会阻塞兄弟节点的触摸测试。不会影响祖先节点的触摸测试。</td>
</tr>
<tr>
<td>None</td>
<td>3</td>
<td>自身不响应触摸测试，不会阻塞子节点和兄弟节点的触摸测试。不会影响祖先节点的触摸测试。</td>
</tr>
</tbody></table>
<p><strong>示例</strong></p>
<p>该示例通过设置不同的HitTestMode值演示了Block和Transparent的触摸类型效果。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 触摸测试控制</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">HitTestBehaviorExample</span> &#123;</span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">NavDestination</span>() &#123;</span><br><span class="line">      <span class="comment">// outer stack</span></span><br><span class="line">      <span class="type">Stack</span>() &#123;</span><br><span class="line">        <span class="type">Button</span>(&#x27;outer button&#x27;)</span><br><span class="line">          .onTouch((event) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">            console.info(&#x27;outer button touched type: &#x27; <span class="operator">+</span> (event <span class="keyword">as</span> <span class="type">TouchEvent</span>).type)</span><br><span class="line">          &#125;)</span><br><span class="line">        <span class="comment">// inner stack</span></span><br><span class="line">        <span class="type">Stack</span>() &#123;</span><br><span class="line">          <span class="type">Button</span>(&#x27;inner button&#x27;)</span><br><span class="line">            .onTouch((event) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">              console.info(&#x27;inner button touched type: &#x27; <span class="operator">+</span> (event <span class="keyword">as</span> <span class="type">TouchEvent</span>).type)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        .width(<span class="string">&quot;100%&quot;</span>).height(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">        .hitTestBehavior(<span class="type">HitTestMode</span>.<span class="type">Block</span>)</span><br><span class="line">        .onTouch((event) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">          console.info(&#x27;stack touched type: &#x27; <span class="operator">+</span> (event <span class="keyword">as</span> <span class="type">TouchEvent</span>).type)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="type">Text</span>(&#x27;<span class="type">Transparent</span>&#x27;)</span><br><span class="line">          .hitTestBehavior(<span class="type">HitTestMode</span>.<span class="type">Transparent</span>)</span><br><span class="line">          .width(<span class="string">&quot;100%&quot;</span>).height(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">          .onTouch((event) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">            console.info(&#x27;text touched type: &#x27; <span class="operator">+</span> (event <span class="keyword">as</span> <span class="type">TouchEvent</span>).type)</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;.width(<span class="number">300</span>).height(<span class="number">300</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .width(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .height(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line">export function <span class="type">HitTestBehaviorExampleBuilder</span>() &#123;</span><br><span class="line">  <span class="type">HitTestBehaviorExample</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="三、手势处理"><a href="#三、手势处理" class="headerlink" title="三、手势处理"></a>三、手势处理</h1><p>onClick &gt; Gesture 触发，onClick 会先吞噬所有触摸的事件 </p>
<h3 id="绑定手势方法"><a href="#绑定手势方法" class="headerlink" title="绑定手势方法"></a>绑定手势方法</h3><p>通过如下属性给组件绑定手势识别，手势识别成功后可以通过事件回调通知组件。</p>
<p>可以通过<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-attributes-touch-target-V13">触摸热区</a>指定可识别手势的区域。</p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>参数类型</th>
<th>默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>gesture</td>
<td>gesture: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gesturetype">GestureType</a>,mask?: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gesturemask%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E">GestureMask</a></td>
<td>gesture: -，mask: GestureMask.Normal</td>
<td>绑定手势。- gesture: 绑定的手势类型。- mask: 事件响应设置。</td>
</tr>
<tr>
<td>priorityGesture</td>
<td>gesture: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gesturetype">GestureType</a>,mask?: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gesturemask%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E">GestureMask</a></td>
<td>gesture: -，mask: GestureMask.Normal</td>
<td>绑定优先识别手势。- gesture: 绑定的手势类型。- mask: 事件响应设置。1、默认情况下，子组件优先识别通过gesture绑定的手势，当父组件配置priorityGesture时，父组件优先识别priorityGesture绑定的手势。2、长按手势时，设置触发长按的最短时间小的组件会优先响应，会忽略priorityGesture设置。</td>
</tr>
<tr>
<td>parallelGesture</td>
<td>gesture: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gesturetype">GestureType</a>,mask?: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gesturemask%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E">GestureMask</a></td>
<td>gesture: -，mask: GestureMask.Normal</td>
<td>绑定可与子组件手势同时触发的手势。- gesture: 绑定的手势类型。- mask: 事件响应设置。手势事件为非冒泡事件。父组件设置parallelGesture时，父子组件相同的手势事件都可以触发，实现类似冒泡效果。</td>
</tr>
</tbody></table>
<p><strong>GestureType</strong></p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-tapgesture-V13">TapGesture</a></td>
<td>点击手势，支持单次点击、多次点击识别。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-longpressgesture-V13">LongPressGesture</a></td>
<td>长按手势。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-pangesture-V13">PanGesture</a></td>
<td>平移手势，滑动最小距离为5vp时识别成功。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-pinchgesture-V13">PinchGesture</a></td>
<td>捏合手势。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-rotationgesture-V13">RotationGesture</a></td>
<td>旋转手势。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-swipegesture-V13">SwipeGesture</a></td>
<td>滑动手势，滑动最小速度为100vp&#x2F;s时识别成功。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-combined-gestures-V13">GestureGroup</a></td>
<td>手势识别组，多种手势组合为复合手势，支持连续识别、并行识别和互斥识别。</td>
</tr>
</tbody></table>
<p><strong>GestureMask枚举说明</strong></p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Normal</td>
<td>不屏蔽子组件的手势，按照默认手势识别顺序进行识别。</td>
</tr>
<tr>
<td>IgnoreInternal</td>
<td>屏蔽子组件的手势，包括子组件上系统内置的手势，如子组件为List组件时，内置的滑动手势同样会被屏蔽。 若父子组件区域存在部分重叠，则只会屏蔽父子组件重叠的部分。</td>
</tr>
</tbody></table>
<p><strong>响应手势事件</strong></p>
<p>组件通过手势事件绑定不同GestureType的手势对象，各手势对象在响应手势操作的事件回调中提供手势相关信息。下面通过TapGesture手势对象的onAction事件响应点击事件，获取事件相关信息。其余手势对象的事件定义见各个手势对象章节。 若需绑定多种手势请使用 <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-combined-gestures-V13">组合手势</a>。</p>
<p><strong>TapGesture事件说明</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td>onAction((event:GestureEvent) &#x3D;&gt; void)</td>
<td>Tap手势识别成功回调。</td>
</tr>
</tbody></table>
<p><strong>GestureEvent对象说明</strong></p>
<p>继承于<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#baseevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">BaseEvent</a>。</p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>repeat</td>
<td>boolean</td>
<td>是否为重复触发事件，用于LongPressGesture手势触发场景。</td>
</tr>
<tr>
<td>offsetX</td>
<td>number</td>
<td>手势事件偏移量X，单位为vp，用于PanGesture手势触发场景，从左向右滑动offsetX为正，反之为负。</td>
</tr>
<tr>
<td>offsetY</td>
<td>number</td>
<td>手势事件偏移量Y，单位为vp，用于PanGesture手势触发场景，从上向下滑动offsetY为正，反之为负。</td>
</tr>
<tr>
<td>angle</td>
<td>number</td>
<td>用于RotationGesture手势触发场景时，表示旋转角度。用于SwipeGesture手势触发场景时，表示滑动手势的角度，即两根手指间的线段与水平方向的夹角变化的度数。说明：角度计算方式：滑动手势被识别到后，连接两根手指之间的线被识别为起始线条，随着手指的滑动，手指之间的线条会发生旋转，根据起始线条两端点和当前线条两端点的坐标，使用反正切函数分别计算其相对于水平方向的夹角，最后arctan2(cy2-cy1,cx2-cx1)-arctan2(y2-y1,x2-x1)为旋转的角度。以起始线条为坐标系，顺时针旋转为0到180度，逆时针旋转为-180到0度。</td>
</tr>
<tr>
<td>scale</td>
<td>number</td>
<td>缩放比例，用于PinchGesture手势触发场景。</td>
</tr>
<tr>
<td>pinchCenterX</td>
<td>number</td>
<td>捏合手势中心点的x轴坐标，单位为vp，用于PinchGesture手势触发场景。</td>
</tr>
<tr>
<td>pinchCenterY</td>
<td>number</td>
<td>捏合手势中心点的y轴坐标，单位为vp，用于PinchGesture手势触发场景。</td>
</tr>
<tr>
<td>speed8+</td>
<td>number</td>
<td>滑动手势速度，即所有手指相对当前组件元素原始区域滑动的平均速度，单位为vp&#x2F;秒，用于SwipeGesture手势触发场景。</td>
</tr>
<tr>
<td>fingerList8+</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#fingerinfo%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E8">FingerInfo</a>[]</td>
<td>输入源为触屏产生的手势，fingerList中会包含触发事件的所有触点信息；由鼠标发起的手势，fingerList中只会有一条记录；触摸板的事件大类与鼠标一致，所以由触摸板发起的手势，fingerList只会携带一条记录。说明：手指索引编号与位置对应，即fingerList[index]的id为index。先按下且未参与当前手势触发的手指在fingerList中对应位置为空。</td>
</tr>
<tr>
<td>velocityX10+</td>
<td>number</td>
<td>用于<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-pangesture-V13">PanGesture</a>手势中，获取当前手势的x轴方向速度。坐标轴原点为屏幕左上角，分正负方向速度，从左往右为正，反之为负。单位为vp&#x2F;s。</td>
</tr>
<tr>
<td>velocityY10+</td>
<td>number</td>
<td>用于<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-pangesture-V13">PanGesture</a>手势中，获取当前手势的y轴方向速度。坐标轴原点为屏幕左上角，分正负方向速度，从上往下为正，反之为负。单位为vp&#x2F;s。</td>
</tr>
<tr>
<td>velocity10+</td>
<td>number</td>
<td>用于<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-pangesture-V13">PanGesture</a>手势中，获取当前手势的主方向速度。为xy轴方向速度的平方和的算术平方根。单位为vp&#x2F;s。</td>
</tr>
</tbody></table>
<p><strong>SourceType枚举说明</strong></p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Unknown</td>
<td>未知设备。</td>
</tr>
<tr>
<td>Mouse</td>
<td>鼠标。</td>
</tr>
<tr>
<td>TouchScreen</td>
<td>触摸屏。</td>
</tr>
</tbody></table>
<p><strong>FingerInfo对象说明(8+)</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>number</td>
<td>手指的索引编号。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>globalX</td>
<td>number</td>
<td>相对于应用窗口左上角的x轴坐标，单位为vp。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>globalY</td>
<td>number</td>
<td>相对于应用窗口左上角的y轴坐标，单位为vp。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>localX</td>
<td>number</td>
<td>相对于当前组件元素原始区域左上角的x轴坐标，单位为vp。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>localY</td>
<td>number</td>
<td>相对于当前组件元素原始区域左上角的y轴坐标，单位为vp。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>displayX12+</td>
<td>number</td>
<td>相对于屏幕左上角的x轴坐标，单位为vp。元服务API： 从API version 12开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>displayY12+</td>
<td>number</td>
<td>相对于屏幕左上角的y轴坐标，单位为vp。元服务API： 从API version 12开始，该接口支持在元服务中使用。</td>
</tr>
</tbody></table>
<p><strong>SourceTool枚举说明(9+)</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Unknown</td>
<td>未知输入源。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>Finger</td>
<td>手指输入。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>Pen</td>
<td>手写笔输入。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>Mouse12+</td>
<td>鼠标输入。元服务API： 从API version 12开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>Touchpad12+</td>
<td>触控板输入。触控板单指输入被视为鼠标输入操作。元服务API： 从API version 12开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>Joystick12+</td>
<td>手柄输入。元服务API： 从API version 12开始，该接口支持在元服务中使用。</td>
</tr>
</tbody></table>
<p><strong>示例</strong></p>
<p>该示例通过配置priorityGesture和parallelGesture分别实现了父组件优先识别手势和父子组件同时触发手势。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 绑定手势方法</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">GestureSettingsExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> priorityTestValue: string <span class="operator">=</span> &#x27;&#x27;</span><br><span class="line">  <span class="meta">@State</span> parallelTestValue: string <span class="operator">=</span> &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">NavDestination</span>() &#123;</span><br><span class="line">      <span class="type">Column</span>() &#123;</span><br><span class="line">        <span class="type">Column</span>() &#123;</span><br><span class="line">          <span class="type">Text</span>(&#x27;TapGesture:&#x27; <span class="operator">+</span> this.priorityTestValue).fontSize(<span class="number">28</span>)</span><br><span class="line">            .gesture(</span><br><span class="line">              <span class="type">TapGesture</span>()</span><br><span class="line">                .onAction((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">                  this.priorityTestValue <span class="operator">+=</span> &#x27;\nText&#x27;</span><br><span class="line">                &#125;))</span><br><span class="line">        &#125;</span><br><span class="line">        .height(<span class="number">200</span>)</span><br><span class="line">        .width(<span class="number">250</span>)</span><br><span class="line">        .padding(<span class="number">20</span>)</span><br><span class="line">        .margin(<span class="number">20</span>)</span><br><span class="line">        .border(&#123; width: <span class="number">3</span> &#125;)</span><br><span class="line">        <span class="comment">// 设置为priorityGesture时，点击文本会忽略Text组件的TapGesture手势事件，优先识别父组件Column的TapGesture手势事件</span></span><br><span class="line">        .priorityGesture(</span><br><span class="line">          <span class="type">TapGesture</span>()</span><br><span class="line">            .onAction((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">              this.priorityTestValue <span class="operator">+=</span> &#x27;\nColumn1&#x27;</span><br><span class="line">            &#125;), <span class="type">GestureMask</span>.<span class="type">IgnoreInternal</span>)</span><br><span class="line"></span><br><span class="line">        <span class="type">Column</span>() &#123;</span><br><span class="line">          <span class="type">Text</span>(&#x27;TapGesture:&#x27; <span class="operator">+</span> this.parallelTestValue).fontSize(<span class="number">28</span>)</span><br><span class="line">            .gesture(</span><br><span class="line">              <span class="type">TapGesture</span>()</span><br><span class="line">                .onAction((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">                  this.parallelTestValue <span class="operator">+=</span> &#x27;\nText&#x27;</span><br><span class="line">                &#125;))</span><br><span class="line">        &#125;</span><br><span class="line">        .height(<span class="number">200</span>)</span><br><span class="line">        .width(<span class="number">250</span>)</span><br><span class="line">        .padding(<span class="number">20</span>)</span><br><span class="line">        .margin(<span class="number">20</span>)</span><br><span class="line">        .border(&#123; width: <span class="number">3</span> &#125;)</span><br><span class="line">        <span class="comment">// 设置为parallelGesture时，点击文本会同时触发子组件Text与父组件Column的TapGesture手势事件</span></span><br><span class="line">        .parallelGesture(</span><br><span class="line">          <span class="type">TapGesture</span>()</span><br><span class="line">            .onAction((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">              this.parallelTestValue <span class="operator">+=</span> &#x27;\nColumn2&#x27;</span><br><span class="line">            &#125;), <span class="type">GestureMask</span>.<span class="type">Normal</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.width(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .height(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line">export function <span class="type">GestureSettingsExampleBuilder</span>() &#123;</span><br><span class="line">  <span class="type">GestureSettingsExample</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="TapGesture"><a href="#TapGesture" class="headerlink" title="TapGesture"></a>TapGesture</h3><p>支持单击、双击和多次点击事件的识别。</p>
<p><strong>说明</strong></p>
<p>从API Version 7开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>
<p><strong>接口</strong></p>
<p>TapGesture(value?: TapGestureParameters)</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数类型</th>
<th>必填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>value</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-tapgesture-V13#tapgestureparameters12%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">TapGestureParameters</a></td>
<td>否</td>
<td>点击手势的相关参数。</td>
</tr>
</tbody></table>
<p><strong>TapGestureParameters(12+)对象说明</strong></p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>必填</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>count</td>
<td>number</td>
<td>否</td>
<td>识别的连续点击次数。当设置的值小于1或不设置时，会被转化为默认值。默认值：1说明：1. 当配置多击时，上一次的最后一根手指抬起和下一次的第一根手指按下的超时时间为300毫秒。2. 当上次点击的位置与当前点击的位置距离超过60vp时，手势识别失败。在多指情况下，点击的位置为所有参与手势响应手指的平均位置。</td>
</tr>
<tr>
<td>fingers</td>
<td>number</td>
<td>否</td>
<td>触发点击的手指数，最小为1指， 最大为10指。当设置小于1的值或不设置时，会被转化为默认值。默认值：1说明：1. 当配置多指时，第一根手指按下后300毫秒内未有足够的手指数按下，手势识别失败；手指抬起时，抬起后剩余的手指数小于阈值时开始计时，如300ms内未全部抬起则手势识别失败。2. 实际点击手指数超过配置值，手势识别成功。</td>
</tr>
<tr>
<td>distanceThreshold</td>
<td>number</td>
<td>否</td>
<td>点击手势移动阈值。当设置的值小于等于0或不设置时，会被转化为默认值。默认值：2^31-1说明：当手指的移动距离超出开发者预设的移动阈值时，点击识别失败。如果初始化为默认阈值时，手指移动超过组件热区范围，点击识别失败。</td>
</tr>
</tbody></table>
<p><strong>事件</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td>onAction(event: (event: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">GestureEvent</a>) &#x3D;&gt; void)</td>
<td>Tap手势识别成功回调。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
</tbody></table>
<p><strong>属性</strong></p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>tag11+</td>
<td>string</td>
<td>设置Tap手势标志，用于自定义手势判定时区分绑定的手势。</td>
</tr>
</tbody></table>
<p><strong>示例</strong></p>
<p>该示例通过TapGesture实现了双击手势的识别。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">TapGestureExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> value: string <span class="operator">=</span> &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">Column</span>() &#123;</span><br><span class="line">      <span class="comment">// 单指双击文本触发手势事件</span></span><br><span class="line">      <span class="type">Text</span>(&#x27;<span class="type">Click</span> twice&#x27;).fontSize(<span class="number">28</span>)</span><br><span class="line">        .gesture(</span><br><span class="line">        <span class="type">TapGesture</span>(&#123; count: <span class="number">2</span> &#125;)</span><br><span class="line">          .onAction((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (event) &#123;</span><br><span class="line">              this.value <span class="operator">=</span> <span class="type">JSON</span>.stringify(event.fingerList[<span class="number">0</span>])</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        )</span><br><span class="line">      <span class="type">Text</span>(this.value)</span><br><span class="line">    &#125;</span><br><span class="line">    .height(<span class="number">200</span>)</span><br><span class="line">    .width(<span class="number">300</span>)</span><br><span class="line">    .padding(<span class="number">20</span>)</span><br><span class="line">    .border(&#123; width: <span class="number">3</span> &#125;)</span><br><span class="line">    .margin(<span class="number">30</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=OTBiYmIyMDJjNDNlN2Y1YTM0NjQ2MWZkMzgwMDg1NTFfUkwzYUdueFZKaTh2dHJOQU85eEROSG9tUHBSV2xsS3BfVG9rZW46R2g0WWJNQ2ZBb0ZUQ0d4dElKZmNhcTA1bjBWXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<h3 id="LongPressGesture"><a href="#LongPressGesture" class="headerlink" title="LongPressGesture"></a>LongPressGesture</h3><p>用于触发长按手势事件，触发长按手势的最少手指数为1，最短长按时间为500毫秒。</p>
<p><strong>说明</strong></p>
<p>从API Version 7开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>
<p><strong>接口</strong></p>
<p>LongPressGesture(value?: { fingers?: number, repeat?: boolean, duration?: number })</p>
<p>当组件默认支持可拖拽时，如Text、TextInput、TextArea、HyperLink、Image和RichEditor等组件。长按手势与拖拽会出现冲突，事件优先级如下：</p>
<p>长按触发时间 &lt; 500ms，长按事件优先拖拽事件响应。</p>
<p>长按触发时间 &gt;&#x3D; 500ms，拖拽事件优先长按事件响应。</p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数类型</th>
<th>必填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>fingers</td>
<td>number</td>
<td>否</td>
<td>触发长按的最少手指数，最小为1指， 最大取值为10指。默认值：1说明：手指按下后若发生超过15px的移动，则判定当前长按手势识别失败。</td>
</tr>
<tr>
<td>repeat</td>
<td>boolean</td>
<td>否</td>
<td>是否连续触发事件回调。默认值：false</td>
</tr>
<tr>
<td>duration</td>
<td>number</td>
<td>否</td>
<td>触发长按的最短时间，单位为毫秒（ms）。默认值：500说明：设置小于等于0时，按照默认值500处理。</td>
</tr>
</tbody></table>
<p><strong>事件</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td>onAction(event:(event: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">GestureEvent</a>) &#x3D;&gt; void)</td>
<td>LongPress手势识别成功回调。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>onActionEnd(event:(event: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">GestureEvent</a>) &#x3D;&gt; void)</td>
<td>LongPress手势识别成功，最后一根手指抬起后触发回调。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>onActionCancel(event: () &#x3D;&gt; void)</td>
<td>LongPress手势识别成功，接收到触摸取消事件触发回调。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
</tbody></table>
<p><strong>属性</strong></p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>tag11+</td>
<td>string</td>
<td>设置LongPress手势标志，用于自定义手势判定时区分绑定的手势。</td>
</tr>
</tbody></table>
<p><strong>示例</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 长按手势</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">LongPressGestureExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> count: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">NavDestination</span>() &#123;</span><br><span class="line">      <span class="type">Column</span>() &#123;</span><br><span class="line">        <span class="type">Text</span>(&#x27;<span class="type">LongPress</span> onAction:&#x27; <span class="operator">+</span> this.count).fontSize(<span class="number">28</span>)<span class="comment">// 单指长按文本触发该手势事件</span></span><br><span class="line">          .gesture(</span><br><span class="line">            <span class="type">LongPressGesture</span>(&#123; repeat: <span class="literal">true</span> &#125;)<span class="comment">// 由于repeat设置为true，长按动作存在时会连续触发，触发间隔为duration（默认值500ms）</span></span><br><span class="line">              .onAction((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (event <span class="operator">&amp;&amp;</span> event.repeat) &#123;</span><br><span class="line">                  this.count<span class="operator">++</span></span><br><span class="line">                &#125;</span><br><span class="line">              &#125;)<span class="comment">// 长按动作一结束触发</span></span><br><span class="line">              .onActionEnd((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">                this.count <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">              &#125;)</span><br><span class="line">          )</span><br><span class="line">      &#125;</span><br><span class="line">      .height(<span class="number">200</span>)</span><br><span class="line">      .width(<span class="number">300</span>)</span><br><span class="line">      .padding(<span class="number">20</span>)</span><br><span class="line">      .border(&#123; width: <span class="number">3</span> &#125;)</span><br><span class="line">      .margin(<span class="number">30</span>)</span><br><span class="line">    &#125;.width(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .height(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line">export function <span class="type">LongPressGestureExampleBuilder</span>() &#123;</span><br><span class="line">  <span class="type">LongPressGestureExample</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTUyODMzZmE4NDdlNjYyZjk5NTUwNDI1NjEwOTkxYmZfUGFHYklFMWxxOXRqZ000N0xmUm01bzFRNE1RUHlXcGZfVG9rZW46WnhrUWJkOXN1bzJPQXV4cFU1a2N3cG5xbkhkXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<h3 id="PanGesture"><a href="#PanGesture" class="headerlink" title="PanGesture"></a>PanGesture</h3><p>滑动手势事件，当滑动的最小距离达到设定的最小值时触发滑动手势事件。</p>
<p><strong>说明</strong></p>
<p>从API Version 7开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>
<p><strong>接口</strong></p>
<p>PanGesture(value?: { fingers?: number, direction?: PanDirection, distance?: number } | <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-pangesture-V13#pangestureoptions">PanGestureOptions</a>)</p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数类型</th>
<th>必填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>fingers</td>
<td>number</td>
<td>否</td>
<td>用于指定触发拖动的最少手指数，最小为1指， 最大取值为10指。默认值：1取值范围：[1,10]说明：当设置的值小于1或不设置时，会被转化为默认值。</td>
</tr>
<tr>
<td>direction</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-pangesture-V13#pandirection%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E">PanDirection</a></td>
<td>否</td>
<td>用于指定触发拖动的手势方向，此枚举值支持逻辑与(&amp;)和逻辑或（|）运算。默认值：PanDirection.All</td>
</tr>
<tr>
<td>distance</td>
<td>number</td>
<td>否</td>
<td>用于指定触发拖动手势事件的最小拖动距离，单位为vp。默认值：5说明：<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-container-tabs-V13">Tabs组件</a>滑动与该拖动手势事件同时存在时，可将distance值设为1，使拖动更灵敏，避免造成事件错乱。当设定的值小于0时，按默认值5处理。</td>
</tr>
</tbody></table>
<p><strong>PanDirection枚举说明</strong></p>
<p>与SwipeDirection不同，PanDirection没有角度限制。</p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>All</td>
<td>所有方向。</td>
</tr>
<tr>
<td>Horizontal</td>
<td>水平方向。</td>
</tr>
<tr>
<td>Vertical</td>
<td>竖直方向。</td>
</tr>
<tr>
<td>Left</td>
<td>向左拖动。</td>
</tr>
<tr>
<td>Right</td>
<td>向右拖动。</td>
</tr>
<tr>
<td>Up</td>
<td>向上拖动。</td>
</tr>
<tr>
<td>Down</td>
<td>向下拖动。</td>
</tr>
<tr>
<td>None</td>
<td>任何方向都不可触发拖动手势事件。</td>
</tr>
</tbody></table>
<p><strong>PanGestureOptions</strong></p>
<p>通过PanGestureOptions对象接口可以动态修改平移手势识别器的属性，从而避免通过状态变量修改属性（状态变量修改会导致UI刷新）。</p>
<p>PanGestureOptions(value?: { fingers?: number, direction?: PanDirection, distance?: number })</p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数类型</th>
<th>必填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>fingers</td>
<td>number</td>
<td>否</td>
<td>用于指定触发滑动的最少手指数，最小为1指， 最大取值为10指。默认值：1</td>
</tr>
<tr>
<td>direction</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-pangesture-V13#pandirection%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E">PanDirection</a></td>
<td>否</td>
<td>用于指定设置滑动方向，此枚举值支持逻辑与(&amp;)和逻辑或（|）运算。默认值：PanDirection.All</td>
</tr>
<tr>
<td>distance</td>
<td>number</td>
<td>否</td>
<td>用于指定触发拖动手势事件的最小拖动距离，单位为vp。默认值：5说明：<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-container-tabs-V13">Tabs组件</a>滑动与该拖动手势事件同时存在时，可将distance值设为1，使拖动更灵敏，避免造成事件错乱。当设定的值小于0时，按默认值5处理。建议设置合理的拖动距离，拖动距离设置过大时会导致滑动不跟手（响应时延慢）的问题。</td>
</tr>
</tbody></table>
<p><strong>接口</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td>setDirection(value: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-pangesture-V13#pandirection%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E">PanDirection</a>)</td>
<td>设置direction属性。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>setDistance(value: number)</td>
<td>设置distance属性。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>setFingers(value: number)</td>
<td>设置fingers属性。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>getDirection()12+: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-pangesture-V13#pandirection%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E">PanDirection</a></td>
<td>获取direction属性。元服务API： 从API version 12开始，该接口支持在元服务中使用。</td>
</tr>
</tbody></table>
<p><strong>事件</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td>onActionStart(event: (event: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">GestureEvent</a>) &#x3D;&gt; void)</td>
<td>Pan手势识别成功回调。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>onActionUpdate(event: (event: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">GestureEvent</a>) &#x3D;&gt; void)</td>
<td>Pan手势移动过程中回调。fingerList为多根手指时，该回调监听每次只会更新一根手指的位置信息。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>onActionEnd(event: (event: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">GestureEvent</a>) &#x3D;&gt; void)</td>
<td>Pan手势识别成功，手指抬起后触发回调。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>onActionCancel(event: () &#x3D;&gt; void)</td>
<td>Pan手势识别成功，接收到触摸取消事件触发回调。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
</tbody></table>
<p><strong>属性</strong></p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>tag11+</td>
<td>string</td>
<td>设置Pan手势标志，用于自定义手势判定时区分绑定的手势。</td>
</tr>
</tbody></table>
<p><strong>示例</strong></p>
<p>该示例通过PanGesture实现了单指&#x2F;双指滑动手势的识别。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">PanGestureExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> offsetX: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> offsetY: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> positionX: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> positionY: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">  <span class="keyword">private</span> panOption: <span class="type">PanGestureOptions</span> <span class="operator">=</span> new <span class="type">PanGestureOptions</span>(&#123; direction: <span class="type">PanDirection</span>.<span class="type">Left</span> <span class="operator">|</span> <span class="type">PanDirection</span>.<span class="type">Right</span> &#125;)</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">Column</span>() &#123;</span><br><span class="line">      <span class="type">Column</span>() &#123;</span><br><span class="line">        <span class="type">Text</span>(&#x27;<span class="type">PanGesture</span> offset:\nX: &#x27; <span class="operator">+</span> this.offsetX <span class="operator">+</span> &#x27;\n&#x27; <span class="operator">+</span> &#x27;Y: &#x27; <span class="operator">+</span> this.offsetY)</span><br><span class="line">      &#125;</span><br><span class="line">      .height(<span class="number">200</span>)</span><br><span class="line">      .width(<span class="number">300</span>)</span><br><span class="line">      .padding(<span class="number">20</span>)</span><br><span class="line">      .border(&#123; width: <span class="number">3</span> &#125;)</span><br><span class="line">      .margin(<span class="number">50</span>)</span><br><span class="line">      .translate(&#123; x: this.offsetX, y: this.offsetY, z: <span class="number">0</span> &#125;) <span class="comment">// 以组件左上角为坐标原点进行移动</span></span><br><span class="line">      <span class="comment">// 左右滑动触发该手势事件</span></span><br><span class="line">      .gesture(</span><br><span class="line">      <span class="type">PanGesture</span>(this.panOption)</span><br><span class="line">        .onActionStart((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">          console.info(&#x27;<span class="type">Pan</span> start&#x27;)</span><br><span class="line">        &#125;)</span><br><span class="line">        .onActionUpdate((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (event) &#123;</span><br><span class="line">            this.offsetX <span class="operator">=</span> this.positionX <span class="operator">+</span> event.offsetX</span><br><span class="line">            this.offsetY <span class="operator">=</span> this.positionY <span class="operator">+</span> event.offsetY</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .onActionEnd((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">          this.positionX <span class="operator">=</span> this.offsetX</span><br><span class="line">          this.positionY <span class="operator">=</span> this.offsetY</span><br><span class="line">          console.info(&#x27;<span class="type">Pan</span> end&#x27;)</span><br><span class="line">        &#125;)</span><br><span class="line">      )</span><br><span class="line"></span><br><span class="line">      <span class="type">Button</span>(&#x27;修改<span class="type">PanGesture触发条件</span>&#x27;)</span><br><span class="line">        .onClick(() <span class="operator">=&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// 将PanGesture手势事件触发条件改为双指以任意方向滑动</span></span><br><span class="line">          this.panOption.setDirection(<span class="type">PanDirection</span>.<span class="type">All</span>)</span><br><span class="line">          this.panOption.setFingers(<span class="number">2</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>示意图：</p>
<p>向左滑动：</p>
<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=YzUwYjFiZWVjZWNiZjJjYmYyZmE0NTRhMzMyODIxZDFfdUdlQlo3bDlvMndpSjNkQkg4ejZ0akdPdzNZaENpc3lfVG9rZW46RHAyNWJuRXdTb1Q5RXJ4RHpoVWNDbUhObkdnXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<p>点击按钮修改PanGesture触发条件，双指向左下方滑动：</p>
<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MjI3ZDVjM2Y3ZmE1YTIxZDY4NjAyYjJhNjViMzU0MThfNGZ4UUZ0ajZuS2ZnR1ZMN09jT2V2OUdpcklwZGliMkJfVG9rZW46Wm9DamJ6eGwxb0JFZ1l4Q0xCYmNtUkFJbk9oXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<h3 id="PinchGesture"><a href="#PinchGesture" class="headerlink" title="PinchGesture"></a>PinchGesture</h3><p>用于触发捏合手势，触发捏合手势的最少手指为2指，最大为5指，最小识别距离为5vp。</p>
<p><strong>说明</strong></p>
<p>从API Version 7开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>
<p><strong>接口</strong></p>
<p>PinchGesture(value?: { fingers?: number, distance?: number })</p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数类型</th>
<th>必填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>fingers</td>
<td>number</td>
<td>否</td>
<td>触发捏合的最少手指数, 最小为2指，最大为5指。默认值：2触发手势手指可以多于fingers数目，但只有先落下的与fingers相同数目的手指参与手势计算。</td>
</tr>
<tr>
<td>distance</td>
<td>number</td>
<td>否</td>
<td>最小识别距离，单位为vp。默认值：5说明：当识别距离的值小于等于0时，会被转化为默认值。</td>
</tr>
</tbody></table>
<p><strong>事件</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td>onActionStart(event:(event: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">GestureEvent</a>) &#x3D;&gt; void)</td>
<td>Pinch手势识别成功回调。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>onActionUpdate(event:(event: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">GestureEvent</a>) &#x3D;&gt; void)</td>
<td>Pinch手势移动过程中回调。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>onActionEnd(event:(event: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">GestureEvent</a>) &#x3D;&gt; void)</td>
<td>Pinch手势识别成功，手指抬起后触发回调。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>onActionCancel(event: () &#x3D;&gt; void)</td>
<td>Pinch手势识别成功，接收到触摸取消事件触发回调。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
</tbody></table>
<p><strong>属性</strong></p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>tag11+</td>
<td>string</td>
<td>设置Pinch手势标志，用于自定义手势判定时区分绑定的手势。</td>
</tr>
</tbody></table>
<p><strong>示例</strong></p>
<p>该示例通过配置PinchGesture实现了三指捏合手势的识别。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 三指捏合手势</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">PinchGestureExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> scaleValue: number <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">  <span class="meta">@State</span> pinchValue: number <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">  <span class="meta">@State</span> pinchX: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> pinchY: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">NavDestination</span>() &#123;</span><br><span class="line">      <span class="type">Column</span>() &#123;</span><br><span class="line">        <span class="type">Column</span>() &#123;</span><br><span class="line">          <span class="type">Text</span>(&#x27;<span class="type">PinchGesture</span> scale:\n&#x27; <span class="operator">+</span> this.scaleValue)</span><br><span class="line">          <span class="type">Text</span>(&#x27;<span class="type">PinchGesture</span> center:\n(&#x27; <span class="operator">+</span> this.pinchX <span class="operator">+</span> &#x27;,&#x27; <span class="operator">+</span> this.pinchY <span class="operator">+</span> &#x27;)&#x27;)</span><br><span class="line">        &#125;</span><br><span class="line">        .height(<span class="number">200</span>)</span><br><span class="line">        .width(<span class="number">300</span>)</span><br><span class="line">        .padding(<span class="number">20</span>)</span><br><span class="line">        .border(&#123; width: <span class="number">3</span> &#125;)</span><br><span class="line">        .margin(&#123; top: <span class="number">100</span> &#125;)</span><br><span class="line">        .scale(&#123; x: this.scaleValue, y: this.scaleValue, z: <span class="number">1</span> &#125;)</span><br><span class="line">        <span class="comment">// 三指捏合触发该手势事件</span></span><br><span class="line">        .gesture(</span><br><span class="line">          <span class="type">PinchGesture</span>(&#123; fingers: <span class="number">3</span> &#125;)</span><br><span class="line">            .onActionStart((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">              console.info(&#x27;<span class="type">Pinch</span> start&#x27;)</span><br><span class="line">            &#125;)</span><br><span class="line">            .onActionUpdate((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (event) &#123;</span><br><span class="line">                this.scaleValue <span class="operator">=</span> this.pinchValue <span class="operator">*</span> event.scale</span><br><span class="line">                this.pinchX <span class="operator">=</span> event.pinchCenterX</span><br><span class="line">                this.pinchY <span class="operator">=</span> event.pinchCenterY</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .onActionEnd((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">              this.pinchValue <span class="operator">=</span> this.scaleValue</span><br><span class="line">              console.info(&#x27;<span class="type">Pinch</span> end&#x27;)</span><br><span class="line">            &#125;)</span><br><span class="line">        )</span><br><span class="line">      &#125;.width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    .width(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .height(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line">export function <span class="type">PinchGestureExampleBuilder</span>() &#123;</span><br><span class="line">  <span class="type">PinchGestureExample</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NWQ4ZTVhZjdiN2MwNmQ0MTllNjg1ZmE2ZTgwZjBjYTlfa2YwWEdQaE1IekZOQzN6S0ZjblRIckZiblBCUUw1MkNfVG9rZW46QUc4YWI2dmx2bzExd3l4VEJaemM4UXo4bkxjXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<h3 id="RotationGesture"><a href="#RotationGesture" class="headerlink" title="RotationGesture"></a>RotationGesture</h3><p>用于触发旋转手势事件，触发旋转手势的最少手指为2指，最大为5指，最小改变度数为1度。</p>
<p><strong>说明</strong></p>
<p>从API Version 7开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>
<p><strong>接口</strong></p>
<p>RotationGesture(value?: { fingers?: number, angle?: number })</p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数类型</th>
<th>必填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>fingers</td>
<td>number</td>
<td>否</td>
<td>触发旋转的最少手指数, 最小为2指，最大为5指。默认值：2触发手势手指可以多于fingers数目，但只有先落下的两指参与手势计算。</td>
</tr>
<tr>
<td>angle</td>
<td>number</td>
<td>否</td>
<td>触发旋转手势的最小改变度数，单位为deg。默认值：1说明：当改变度数的值小于等于0或大于360时，会被转化为默认值。</td>
</tr>
</tbody></table>
<p><strong>事件</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td>onActionStart(event:(event: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">GestureEvent</a>) &#x3D;&gt; void)</td>
<td>Rotation手势识别成功回调。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>onActionUpdate(event:(event: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">GestureEvent</a>) &#x3D;&gt; void)</td>
<td>Rotation手势移动过程中回调。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>onActionEnd(event:(event: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">GestureEvent</a>) &#x3D;&gt; void)</td>
<td>Rotation手势识别成功，手指抬起后触发回调。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>onActionCancel(event: () &#x3D;&gt; void)</td>
<td>Rotation手势识别成功，接收到触摸取消事件触发回调。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
</tbody></table>
<p><strong>属性</strong></p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>tag11+</td>
<td>string</td>
<td>设置Rotation手势标志，用于自定义手势判定时区分绑定的手势。</td>
</tr>
</tbody></table>
<p><strong>示例</strong></p>
<p>该示例通过配置RotationGesture实现了双指旋转手势的识别。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 旋转手势</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">RotationGestureExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> angle: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> rotateValue: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">NavDestination</span>() &#123;</span><br><span class="line">      <span class="type">Column</span>() &#123;</span><br><span class="line">        <span class="type">Column</span>() &#123;</span><br><span class="line">          <span class="type">Text</span>(&#x27;<span class="type">RotationGesture</span> angle:&#x27; <span class="operator">+</span> this.angle)</span><br><span class="line">        &#125;</span><br><span class="line">        .height(<span class="number">200</span>)</span><br><span class="line">        .width(<span class="number">300</span>)</span><br><span class="line">        .padding(<span class="number">20</span>)</span><br><span class="line">        .border(&#123; width: <span class="number">3</span> &#125;)</span><br><span class="line">        .margin(<span class="number">80</span>)</span><br><span class="line">        .rotate(&#123; angle: this.angle &#125;)</span><br><span class="line">        <span class="comment">// 双指旋转触发该手势事件</span></span><br><span class="line">        .gesture(</span><br><span class="line">          <span class="type">RotationGesture</span>()</span><br><span class="line">            .onActionStart((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">              console.info(&#x27;<span class="type">Rotation</span> start&#x27;)</span><br><span class="line">            &#125;)</span><br><span class="line">            .onActionUpdate((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (event) &#123;</span><br><span class="line">                this.angle <span class="operator">=</span> this.rotateValue <span class="operator">+</span> event.angle</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .onActionEnd((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">              this.rotateValue <span class="operator">=</span> this.angle</span><br><span class="line">              console.info(&#x27;<span class="type">Rotation</span> end&#x27;)</span><br><span class="line">            &#125;)</span><br><span class="line">        )</span><br><span class="line">      &#125;.width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    .width(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .height(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line">export function <span class="type">RotationGestureExampleBuilder</span>() &#123;</span><br><span class="line">  <span class="type">RotationGestureExample</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MzI4ZTM0MTJiMWIwM2Y3MThkNTYwODkwZTM1NGE5NzhfMG9lbzgwUGpBSDFXOGdkRnVZeWVuNnJxZDg5STVydTNfVG9rZW46SEo0amJ2VG5ub2QwZFR4b0NZNGNycTMybmRiXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<h3 id="SwipeGesture"><a href="#SwipeGesture" class="headerlink" title="SwipeGesture"></a>SwipeGesture</h3><p>用于触发滑动事件，滑动速度大于100vp&#x2F;s时可识别成功。</p>
<p><strong>说明</strong></p>
<p>从API Version 8开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>
<p><strong>接口</strong></p>
<p>SwipeGesture(value?: { fingers?: number, direction?: SwipeDirection, speed?: number })</p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数类型</th>
<th>必填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>fingers</td>
<td>number</td>
<td>否</td>
<td>触发滑动的最少手指数，默认为1，最小为1指，最大为10指。默认值：1</td>
</tr>
<tr>
<td>direction</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-swipegesture-V13#swipedirection%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E">SwipeDirection</a></td>
<td>否</td>
<td>触发滑动手势的滑动方向。默认值：SwipeDirection.All</td>
</tr>
<tr>
<td>speed</td>
<td>number</td>
<td>否</td>
<td>识别滑动的最小速度。默认值：100VP&#x2F;s说明：当滑动速度的值小于等于0时，会被转化为默认值。</td>
</tr>
</tbody></table>
<p><strong>SwipeDirection枚举说明</strong></p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>All</td>
<td>所有方向。</td>
</tr>
<tr>
<td>Horizontal</td>
<td>水平方向，手指滑动方向与x轴夹角小于45度时触发。</td>
</tr>
<tr>
<td>Vertical</td>
<td>竖直方向，手指滑动方向与y轴夹角小于45度时触发。</td>
</tr>
<tr>
<td>None</td>
<td>任何方向均不可触发。</td>
</tr>
</tbody></table>
<p><strong>事件</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td>onAction(event:(event: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#gestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">GestureEvent</a>) &#x3D;&gt; void)</td>
<td>Swipe手势识别成功回调。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
</tbody></table>
<p><strong>属性</strong></p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>tag11+</td>
<td>string</td>
<td>设置Swipe手势标志，用于自定义手势判定时区分绑定的手势。</td>
</tr>
</tbody></table>
<p><strong>示例</strong></p>
<p>该示例通过配置SwipeGesture实现了滑动手势的识别。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 清扫手势</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SwipeGestureExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> rotateAngle: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> speed: number <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">NavDestination</span>() &#123;</span><br><span class="line">      <span class="type">Column</span>() &#123;</span><br><span class="line">        <span class="type">Column</span>() &#123;</span><br><span class="line">          <span class="type">Text</span>(<span class="string">&quot;SwipeGesture speed<span class="subst">\n</span>&quot;</span> <span class="operator">+</span> this.speed)</span><br><span class="line">          <span class="type">Text</span>(<span class="string">&quot;SwipeGesture angle<span class="subst">\n</span>&quot;</span> <span class="operator">+</span> this.rotateAngle)</span><br><span class="line">        &#125;</span><br><span class="line">        .border(&#123; width: <span class="number">3</span> &#125;)</span><br><span class="line">        .width(<span class="number">300</span>)</span><br><span class="line">        .height(<span class="number">200</span>)</span><br><span class="line">        .margin(<span class="number">100</span>)</span><br><span class="line">        .rotate(&#123; angle: this.rotateAngle &#125;)</span><br><span class="line">        <span class="comment">// 单指竖直方向滑动时触发该事件</span></span><br><span class="line">        .gesture(</span><br><span class="line">          <span class="type">SwipeGesture</span>(&#123; direction: <span class="type">SwipeDirection</span>.<span class="type">Vertical</span> &#125;)</span><br><span class="line">            .onAction((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (event) &#123;</span><br><span class="line">                this.speed <span class="operator">=</span> event.speed</span><br><span class="line">                this.rotateAngle <span class="operator">=</span> event.angle</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        )</span><br><span class="line">      &#125;.width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">    &#125;.width(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .height(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line">export function <span class="type">SwipeGestureExampleBuilder</span>() &#123;</span><br><span class="line">  <span class="type">SwipeGestureExample</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=YjE1ZDIyZDA2NDA4NzhjNTAzMWZkMjk3MjY5ZTBlOWJfbXRvaVo5dlpiaFZXQmJ6c0hKc1FFSE53ZFlma0laTWdfVG9rZW46RmhQcGJGSkNpb0l6SlV4YVczQmNmeGJKbjJmXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<h3 id="组合手势"><a href="#组合手势" class="headerlink" title="组合手势"></a>组合手势</h3><p>手势识别组合，即多种手势组合为复合手势，支持连续识别、并行识别和互斥识别。</p>
<p><strong>说明</strong></p>
<p>从API Version 7开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>
<p><strong>接口</strong></p>
<p>GestureGroup(mode: GestureMode, …gesture: GestureType[])</p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>必填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>mode</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-combined-gestures-V13#gesturemode%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E">GestureMode</a></td>
<td>是</td>
<td>设置组合手势识别模式。默认值：GestureMode.Sequence</td>
</tr>
<tr>
<td>gesture</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-tapgesture-V13">TapGesture</a>| <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-longpressgesture-V13">LongPressGesture</a>| <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-pangesture-V13">PanGesture</a>| <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-pinchgesture-V13">PinchGesture</a>| <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-rotationgesture-V13">RotationGesture</a>| <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-swipegesture-V13">SwipeGesture</a>| <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-combined-gestures-V13#%E7%BB%84%E5%90%88%E6%89%8B%E5%8A%BF">GestureGroup</a></td>
<td>否</td>
<td>设置1个或者多个基础手势类型时，这些手势会被识别为组合手势。若此参数不填则组合手势识别功能不生效。说明：当需要为一个组件同时添加单击和双击手势时，可在组合手势中添加两个TapGesture，需要双击手势在前，单击手势在后，否则不生效。</td>
</tr>
</tbody></table>
<p><strong>GestureMode枚举说明</strong></p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Sequence</td>
<td>顺序识别，按照手势的注册顺序识别手势，直到所有手势识别成功。若有一个手势识别失败，后续手势识别均失败。顺序识别手势组仅有最后一个手势可以响应onActionEnd。</td>
</tr>
<tr>
<td>Parallel</td>
<td>并发识别，注册的手势同时识别，直到所有手势识别结束，手势识别互相不影响。</td>
</tr>
<tr>
<td>Exclusive</td>
<td>互斥识别，注册的手势同时识别，若有一个手势识别成功，则结束手势识别。</td>
</tr>
</tbody></table>
<p><strong>事件</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td>onCancel(event: () &#x3D;&gt; void)</td>
<td>顺序组合手势（GestureMode.Sequence）取消后触发回调。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
</tbody></table>
<p><strong>示例</strong></p>
<p>该示例通过配置GestureGroup实现了长按和拖动的组合手势顺序识别。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">GestureGroupExample</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> count: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> offsetX: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> offsetY: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> positionX: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> positionY: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> borderStyles: <span class="type">BorderStyle</span> <span class="operator">=</span> <span class="type">BorderStyle</span>.<span class="type">Solid</span></span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">Column</span>() &#123;</span><br><span class="line">      <span class="type">Text</span>(&#x27;sequence gesture\n&#x27; <span class="operator">+</span> &#x27;<span class="type">LongPress</span> onAction:&#x27; <span class="operator">+</span> this.count <span class="operator">+</span> &#x27;\nPanGesture offset:\nX: &#x27; <span class="operator">+</span> this.offsetX <span class="operator">+</span> &#x27;\n&#x27; <span class="operator">+</span> &#x27;Y: &#x27; <span class="operator">+</span> this.offsetY)</span><br><span class="line">        .fontSize(<span class="number">15</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .translate(&#123; x: this.offsetX, y: this.offsetY, z: <span class="number">0</span> &#125;)</span><br><span class="line">    .height(<span class="number">150</span>)</span><br><span class="line">    .width(<span class="number">200</span>)</span><br><span class="line">    .padding(<span class="number">20</span>)</span><br><span class="line">    .margin(<span class="number">20</span>)</span><br><span class="line">    .border(&#123; width: <span class="number">3</span>, style: this.borderStyles &#125;)</span><br><span class="line">    .gesture(</span><br><span class="line">      <span class="comment">// 以下组合手势为顺序识别，当长按手势事件未正常触发时则不会触发拖动手势事件</span></span><br><span class="line">      <span class="type">GestureGroup</span>(<span class="type">GestureMode</span>.<span class="type">Sequence</span>,</span><br><span class="line">        <span class="type">LongPressGesture</span>(&#123; repeat: <span class="literal">true</span> &#125;)</span><br><span class="line">          .onAction((event<span class="operator">?</span>: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (event <span class="operator">&amp;&amp;</span> event.repeat) &#123;</span><br><span class="line">              this.count<span class="operator">++</span></span><br><span class="line">            &#125;</span><br><span class="line">            console.info(&#x27;<span class="type">LongPress</span> onAction&#x27;)</span><br><span class="line">          &#125;),</span><br><span class="line">        <span class="type">PanGesture</span>()</span><br><span class="line">          .onActionStart(() <span class="operator">=&gt;</span> &#123;</span><br><span class="line">            this.borderStyles <span class="operator">=</span> <span class="type">BorderStyle</span>.<span class="type">Dashed</span></span><br><span class="line">            console.info(&#x27;pan start&#x27;)</span><br><span class="line">          &#125;)</span><br><span class="line">          .onActionUpdate((event<span class="operator">?</span>: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (event) &#123;</span><br><span class="line">              this.offsetX <span class="operator">=</span> this.positionX <span class="operator">+</span> event.offsetX</span><br><span class="line">              this.offsetY <span class="operator">=</span> this.positionY <span class="operator">+</span> event.offsetY</span><br><span class="line">            &#125;</span><br><span class="line">            console.info(&#x27;pan update&#x27;)</span><br><span class="line">          &#125;)</span><br><span class="line">          .onActionEnd(() <span class="operator">=&gt;</span> &#123;</span><br><span class="line">            this.positionX <span class="operator">=</span> this.offsetX</span><br><span class="line">            this.positionY <span class="operator">=</span> this.offsetY</span><br><span class="line">            this.borderStyles <span class="operator">=</span> <span class="type">BorderStyle</span>.<span class="type">Solid</span></span><br><span class="line">            console.info(&#x27;pan end&#x27;)</span><br><span class="line">          &#125;)</span><br><span class="line">      )</span><br><span class="line">        .onCancel(() <span class="operator">=&gt;</span> &#123;</span><br><span class="line">          console.info(&#x27;sequence gesture canceled&#x27;)</span><br><span class="line">        &#125;)</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>示意图：</p>
<p>按顺序首先触发长按事件：</p>
<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MWMxNGY2ZDgwNTIwZjYwYWE5ZTJmNzIxZjYzZjViMjlfWnFDbmlEWDN2M3cxOFJHTTNzZkNObmd2SFlEV3NXeWNfVG9rZW46QTdMR2JacmVab1pZRHh4ZmlZT2N1VWlobjdjXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<p>按顺序首先触发长按事件，长按事件识别结束之后，其次触发拖动事件，向右下方拖动：</p>
<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MzY0N2U4ZWVkNjdiNzBiYTY4YjUzYzUxMjE0NjYyZjJfZDg5Z0hMVUhQWHVtZlNNUkx2aWN5VWM3ZWxSbGtHd0lfVG9rZW46VG9XbmJVZTZzb1p0TXZ4bXFmR2MxUHNMblhmXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<h3 id="自定义手势判定"><a href="#自定义手势判定" class="headerlink" title="自定义手势判定"></a>自定义手势判定</h3><p>为组件提供自定义手势判定能力。开发者可根据需要，在手势识别期间，决定是否响应手势。</p>
<p><strong>说明</strong></p>
<p>从API Version 11开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>
<p><strong>onGestureJudgeBegin</strong></p>
<p>onGestureJudgeBegin(callback: (gestureInfo: GestureInfo, event: BaseGestureEvent) &#x3D;&gt; GestureJudgeResult): T</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>必填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>callback</td>
<td>(gestureInfo: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#gestureinfo%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">GestureInfo</a>, event: <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#basegestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">BaseGestureEvent</a>) &#x3D;&gt; <a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#gesturejudgeresult11">GestureJudgeResult</a></td>
<td>是</td>
<td>给组件绑定自定义手势判定回调，当绑定到该组件的手势被接受时，会触发用户定义的回调来获取结果。</td>
</tr>
</tbody></table>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>T</td>
<td>返回当前组件。</td>
</tr>
</tbody></table>
<p><strong>GestureJudgeResult(11+)</strong></p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>CONTINUE</td>
<td>不影响系统手势判定流程。</td>
</tr>
<tr>
<td>REJECT</td>
<td>对于用户自定义的手势判定结果为失败。</td>
</tr>
</tbody></table>
<p><strong>GestureInfo对象说明</strong></p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>tag</td>
<td>string</td>
<td>手势标记。说明：如果未设置事件标识tag属性的情况下，此处tag不返回或者返回undefined。</td>
</tr>
<tr>
<td>type</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#gesturetype11">GestureControl.GestureType</a></td>
<td>手势类型。说明：当手势为未暴露类型的系统内置手势事件时，type的值为-1。</td>
</tr>
<tr>
<td>isSystemGesture</td>
<td>boolean</td>
<td>判断当前手势是否是组件自带的手势。默认值：false</td>
</tr>
</tbody></table>
<p><strong>GestureType(11+)</strong></p>
<p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>TAP_GESTURE</td>
<td>0</td>
<td>点击手势</td>
</tr>
<tr>
<td>LONG_PRESS_GESTURE</td>
<td>1</td>
<td>长按手势</td>
</tr>
<tr>
<td>PAN_GESTURE</td>
<td>2</td>
<td>拖动手势</td>
</tr>
<tr>
<td>PINCH_GESTURE</td>
<td>3</td>
<td>捏合手势</td>
</tr>
<tr>
<td>SWIPE_GESTURE</td>
<td>4</td>
<td>滑动手势</td>
</tr>
<tr>
<td>ROTATION_GESTURE</td>
<td>5</td>
<td>旋转手势</td>
</tr>
<tr>
<td>DRAG</td>
<td>6</td>
<td>拖拽</td>
</tr>
<tr>
<td>CLICK</td>
<td>7</td>
<td>点击</td>
</tr>
</tbody></table>
<p><strong>BaseEvent对象说明</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>target</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-events-click-V13#eventtarget8%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">EventTarget</a></td>
<td>触发手势事件的元素对象显示区域。卡片能力： 从API version 9开始，该接口支持在ArkTS卡片中使用。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>timestamp</td>
<td>number</td>
<td>事件时间戳，触发事件时距离系统启动的时间间隔。单位：ns卡片能力： 从API version 9开始，该接口支持在ArkTS卡片中使用。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>source</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#sourcetype%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E">SourceType</a></td>
<td>事件输入设备。卡片能力： 从API version 9开始，该接口支持在ArkTS卡片中使用。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>pressure</td>
<td>number</td>
<td>按压的压力大小。默认值：0取值范围：[0,1]，典型值0.913168，压感大小与数值正相关。卡片能力： 从API version 9开始，该接口支持在ArkTS卡片中使用。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>tiltX</td>
<td>number</td>
<td>手写笔在设备平面上的投影与设备平面X轴的夹角。卡片能力： 从API version 9开始，该接口支持在ArkTS卡片中使用。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>tiltY</td>
<td>number</td>
<td>手写笔在设备平面上的投影与设备平面Y轴的夹角。卡片能力： 从API version 9开始，该接口支持在ArkTS卡片中使用。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>sourceTool</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#sourcetool%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E9">SourceTool</a></td>
<td>事件输入源。卡片能力： 从API version 9开始，该接口支持在ArkTS卡片中使用。元服务API： 从API version 11开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>axisHorizontal12+</td>
<td>number</td>
<td>水平轴值。说明：当前仅在由鼠标滚轮或者触控板双指滑动场景下触发的Pan手势中可以获取。卡片能力： 从API version 12开始，该接口支持在ArkTS卡片中使用。元服务API： 从API version 12开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>axisVertical12+</td>
<td>number</td>
<td>垂直轴值。说明：当前仅在由鼠标滚轮或者触控板双指滑动场景下触发的Pan手势中可以获取。卡片能力： 从API version 12开始，该接口支持在ArkTS卡片中使用。元服务API： 从API version 12开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>getModifierKeyState12+</td>
<td>(Array<string>) &#x3D;&gt; bool</td>
<td>获取功能键按压状态。报错信息请参考以下错误码。支持功能键 ‘Ctrl’|’Alt’|’Shift’|’Fn’，设备外接带Fn键的键盘不支持Fn键查询。元服务API： 从API version 12开始，该接口支持在元服务中使用。</td>
</tr>
<tr>
<td>deviceId12+</td>
<td>number</td>
<td>触发当前事件的输入设备ID。卡片能力： 从API version 12开始，该接口支持在ArkTS卡片中使用。元服务API： 从API version 12开始，该接口支持在元服务中使用。</td>
</tr>
</tbody></table>
<p><strong>错误码</strong>：</p>
<p>以下错误码详细介绍请参考<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/errorcode-universal-V13">通用错误码</a>。</p>
<table>
<thead>
<tr>
<th>错误码ID</th>
<th>错误信息</th>
</tr>
</thead>
<tbody><tr>
<td>401</td>
<td>Parameter error. Possible causes: 1. Incorrect parameter types. 2. Parameter verification failed.</td>
</tr>
</tbody></table>
<p><strong>BaseGestureEvent对象说明</strong></p>
<p>继承于<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#baseevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">BaseEvent</a>。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>fingerList</td>
<td>[FingerInfo<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-settings-V13#fingerinfo%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E8">]</a></td>
<td>触发事件的所有手指信息。</td>
</tr>
</tbody></table>
<p><strong>TapGestureEvent对象说明</strong></p>
<p>继承于<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#basegestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">BaseGestureEvent</a>。可将该对象作为<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#ongesturejudgebegin">onGestureJudgeBegin</a>的event参数来传递。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>LongPressGestureEvent对象说明</strong></p>
<p>继承于<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#basegestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">BaseGestureEvent</a>。可将该对象作为<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#ongesturejudgebegin">onGestureJudgeBegin</a>的event参数来传递。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>repeat</td>
<td>boolean</td>
<td>是否为重复触发事件。</td>
</tr>
</tbody></table>
<p><strong>PanGestureEvent对象说明</strong></p>
<p>继承于<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#basegestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">BaseGestureEvent</a>。可将该对象作为<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#ongesturejudgebegin">onGestureJudgeBegin</a>的event参数来传递。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>offsetX</td>
<td>number</td>
<td>手势事件x轴相对当前组件元素原始区域的偏移量，单位为vp，从左向右滑动offsetX为正，反之为负。</td>
</tr>
<tr>
<td>offsetY</td>
<td>number</td>
<td>手势事件y轴相对当前组件元素原始区域的偏移量，单位为vp，从上向下滑动offsetY为正，反之为负。</td>
</tr>
<tr>
<td>velocityX</td>
<td>number</td>
<td>获取当前手势的x轴方向速度。坐标轴原点为屏幕左上角，分正负方向速度，从左往右为正，反之为负。单位为vp&#x2F;s。</td>
</tr>
<tr>
<td>velocityY</td>
<td>number</td>
<td>获取当前手势的y轴方向速度。坐标轴原点为屏幕左上角，分正负方向速度，从上往下为正，反之为负。单位为vp&#x2F;s。</td>
</tr>
<tr>
<td>velocity</td>
<td>number</td>
<td>获取当前的主方向速度。为xy轴方向速度的平方和的算术平方根。单位为vp&#x2F;s。</td>
</tr>
</tbody></table>
<p><strong>PinchGestureEvent对象说明</strong></p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p>继承于<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#basegestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">BaseGestureEvent</a>。可将该对象作为<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#ongesturejudgebegin">onGestureJudgeBegin</a>的event参数来传递。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>scale</td>
<td>number</td>
<td>缩放比例。</td>
</tr>
<tr>
<td>pinchCenterX</td>
<td>number</td>
<td>捏合手势中心点相对于当前组件元素原始区域左上角x轴坐标，单位为vp。</td>
</tr>
<tr>
<td>pinchCenterY</td>
<td>number</td>
<td>捏合手势中心点相对于当前组件元素原始区域左上角y轴坐标，单位为vp。</td>
</tr>
</tbody></table>
<p><strong>RotationGestureEvent对象说明</strong></p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p>继承于<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#basegestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">BaseGestureEvent</a>。可将该对象作为<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#ongesturejudgebegin">onGestureJudgeBegin</a>的event参数来传递。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>angle</td>
<td>number</td>
<td>表示旋转角度，单位为deg。说明：角度计算方式：滑动手势被识别到后，连接两根手指之间的线被识别为起始线条，随着手指的滑动，手指之间的线条会发生旋转，根据起始线条两端点和当前线条两端点的坐标，使用反正切函数分别计算其相对于水平方向的夹角，最后arctan2(cy2-cy1,cx2-cx1)-arctan2(y2-y1,x2-x1)为旋转的角度。以起始线条为坐标系，顺时针旋转为0到180度，逆时针旋转为-180到0度。</td>
</tr>
</tbody></table>
<p><strong>SwipeGestureEvent对象说明</strong></p>
<p>继承于<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#basegestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">BaseGestureEvent</a>。可将该对象作为<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#ongesturejudgebegin">onGestureJudgeBegin</a>的event参数来传递。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>angle</td>
<td>number</td>
<td>表示滑动手势的角度，即两根手指间的线段与水平方向的夹角变化的度数，单位为deg。说明：角度计算方式：滑动手势被识别到后，连接两根手指之间的线被识别为起始线条，随着手指的滑动，手指之间的线条会发生旋转，根据起始线条两端点和当前线条两端点的坐标，使用反正切函数分别计算其相对于水平方向的夹角，最后arctan2(cy2-cy1,cx2-cx1)-arctan2(y2-y1,x2-x1)为旋转的角度。以起始线条为坐标系，顺时针旋转为0到180度，逆时针旋转为-180到0度。</td>
</tr>
<tr>
<td>speed</td>
<td>number</td>
<td>滑动手势速度，即所有手指相对当前组件元素原始区域滑动的平均速度，单位为vp&#x2F;s。</td>
</tr>
</tbody></table>
<p><strong>示例</strong></p>
<p><strong>示例1（自定义手势判定）</strong></p>
<p>该示例通过配置onGestureJudgeBegin实现了对长按、滑动和拖动手势的自定义判定。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; promptAction &#125; from &#x27;@kit.ArkUI&#x27;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 手势判定 demo</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">GestureJudgeExample</span> &#123;</span><br><span class="line">  scroller: <span class="type">Scroller</span> <span class="operator">=</span> new <span class="type">Scroller</span>()</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">NavDestination</span>() &#123;</span><br><span class="line">      <span class="type">Scroll</span>(this.scroller) &#123;</span><br><span class="line">        <span class="type">Column</span>(&#123; space: <span class="number">8</span> &#125;) &#123;</span><br><span class="line">          <span class="type">Text</span>(<span class="string">&quot;Drag 上下两层 上层绑定长按，下层绑定拖拽。先长按后平移上半区红色区域只会响应长按，先长按后平移下半区蓝色区域只会响应拖拽&quot;</span>)</span><br><span class="line">            .width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">            .fontSize(<span class="number">20</span>)</span><br><span class="line">            .fontColor(&#x27;<span class="number">0xffdd00</span>&#x27;)</span><br><span class="line">            .backgroundColor(<span class="number">0xeeddaa00</span>)</span><br><span class="line">          <span class="type">Stack</span>(&#123; alignContent: <span class="type">Alignment</span>.<span class="type">Center</span> &#125;) &#123;</span><br><span class="line">            <span class="type">Column</span>() &#123;</span><br><span class="line">              <span class="comment">// 模拟上半区和下半区</span></span><br><span class="line">              <span class="type">Stack</span>().width(&#x27;200vp&#x27;).height(&#x27;100vp&#x27;).backgroundColor(<span class="type">Color</span>.<span class="type">Red</span>)</span><br><span class="line">              <span class="type">Stack</span>().width(&#x27;200vp&#x27;).height(&#x27;100vp&#x27;).backgroundColor(<span class="type">Color</span>.<span class="type">Blue</span>)</span><br><span class="line">            &#125;.width(&#x27;200vp&#x27;).height(&#x27;200vp&#x27;)</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Stack的下半区是绑定了拖动手势的图像区域。</span></span><br><span class="line">            <span class="type">Image</span>(<span class="variable">$r</span>(&#x27;sys.media.ohos_app_icon&#x27;))</span><br><span class="line">              .draggable(<span class="literal">true</span>)</span><br><span class="line">              .onDragStart(() <span class="operator">=&gt;</span> &#123;</span><br><span class="line">                promptAction.showToast(&#123; message: <span class="string">&quot;Drag 下半区蓝色区域，Image响应&quot;</span> &#125;)</span><br><span class="line">              &#125;)</span><br><span class="line">              .width(&#x27;200vp&#x27;).height(&#x27;200vp&#x27;)</span><br><span class="line">            <span class="comment">// Stack的上半区是绑定了长按手势的浮动区域。</span></span><br><span class="line">            <span class="type">Stack</span>() &#123;</span><br><span class="line">            &#125;</span><br><span class="line">            .width(&#x27;200vp&#x27;)</span><br><span class="line">            .height(&#x27;200vp&#x27;)</span><br><span class="line">            .hitTestBehavior(<span class="type">HitTestMode</span>.<span class="type">Transparent</span>)</span><br><span class="line">            .onGestureJudgeBegin((gestureInfo: <span class="type">GestureInfo</span>, event: <span class="type">BaseGestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">              <span class="comment">// 确定tag标志是否有值</span></span><br><span class="line">              <span class="keyword">if</span> (gestureInfo.tag) &#123;</span><br><span class="line">                console.log(<span class="string">&quot;gestureInfo tag&quot;</span> <span class="operator">+</span> gestureInfo.tag.toString())</span><br><span class="line">              &#125;</span><br><span class="line">              console.log(<span class="string">&quot;gestureInfo Type &quot;</span> <span class="operator">+</span> gestureInfo.type.toString() <span class="operator">+</span> <span class="string">&quot; isSystemGesture &quot;</span> <span class="operator">+</span></span><br><span class="line">              gestureInfo.isSystemGesture);</span><br><span class="line">              console.log(<span class="string">&quot;pressure &quot;</span> <span class="operator">+</span> event.pressure <span class="operator">+</span> <span class="string">&quot; fingerList.length &quot;</span> <span class="operator">+</span> event.fingerList.length</span><br><span class="line">                <span class="operator">+</span> <span class="string">&quot; timeStamp &quot;</span> <span class="operator">+</span> event.timestamp <span class="operator">+</span> <span class="string">&quot; sourceType &quot;</span> <span class="operator">+</span> event.source.toString() <span class="operator">+</span> <span class="string">&quot; titleX &quot;</span> <span class="operator">+</span></span><br><span class="line">              event.tiltX <span class="operator">+</span> <span class="string">&quot; titleY &quot;</span> <span class="operator">+</span> event.tiltY <span class="operator">+</span> <span class="string">&quot; sourcePool &quot;</span> <span class="operator">+</span> event.sourceTool.toString());</span><br><span class="line">              <span class="comment">// 如果是长按类型手势，判断点击的位置是否在上半区</span></span><br><span class="line">              <span class="keyword">if</span> (gestureInfo.type <span class="operator">==</span> <span class="type">GestureControl</span>.<span class="type">GestureType</span>.<span class="type">LONG_PRESS_GESTURE</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (event.fingerList.length <span class="operator">&gt;</span> <span class="number">0</span> <span class="operator">&amp;&amp;</span> event.fingerList[<span class="number">0</span>].localY <span class="operator">&lt;</span> <span class="number">100</span>) &#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="type">GestureJudgeResult</span>.<span class="type">CONTINUE</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="type">GestureJudgeResult</span>.<span class="type">REJECT</span></span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">return</span> <span class="type">GestureJudgeResult</span>.<span class="type">CONTINUE</span></span><br><span class="line">            &#125;)</span><br><span class="line">            .gesture(<span class="type">GestureGroup</span>(<span class="type">GestureMode</span>.<span class="type">Parallel</span>,</span><br><span class="line">              <span class="type">LongPressGesture</span>()</span><br><span class="line">                .onAction((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">                  promptAction.showToast(&#123; message: <span class="string">&quot;LongPressGesture 长按上半区 红色区域，红色区域响应&quot;</span> &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">                .tag(<span class="string">&quot;tap111&quot;</span>)</span><br><span class="line">            ))</span><br><span class="line"></span><br><span class="line">          &#125;.width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">        &#125;.width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.width(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .height(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line">export function <span class="type">GestureJudgeExampleBuilder</span>() &#123;</span><br><span class="line">  <span class="type">GestureJudgeExample</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NDkyODJlNTE3Yjc0ZDViYzRlMmJiZjU3YjY5ZDY1YWFfazgxZEhCbWJSNnpuazVXRmVhQ0FlYVVZS3V0OEhzaURfVG9rZW46TXVVTGJHN1VIb3VQcDl4bnVySmNMYVlKbjdlXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<p><strong>示例2（自定义区域手势判定）</strong></p>
<p>该示例通过配置onGestureJudgeBegin判定区域决定长按手势和拖拽是否响应。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; promptAction &#125; from &#x27;@kit.ArkUI&#x27;;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">GestureJudgeExample2</span> &#123;</span><br><span class="line">  scroller: <span class="type">Scroller</span> <span class="operator">=</span> new <span class="type">Scroller</span>()</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">NavDestination</span>() &#123;</span><br><span class="line">      <span class="type">Scroll</span>(this.scroller) &#123;</span><br><span class="line">        <span class="type">Column</span>(&#123; space: <span class="number">8</span> &#125;) &#123;</span><br><span class="line">          <span class="type">Text</span>(<span class="string">&quot;Drag 上下两层 上层绑定长按，下层绑定拖拽。先长按后平移上半区红色区域只会响应长按，先长按后平移下半区蓝色区域只会响应拖拽&quot;</span>)</span><br><span class="line">            .width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">            .fontSize(<span class="number">20</span>)</span><br><span class="line">            .fontColor(&#x27;<span class="number">0xffdd00</span>&#x27;)</span><br><span class="line">            .backgroundColor(<span class="number">0xeeddaa00</span>)</span><br><span class="line">          <span class="type">Stack</span>(&#123; alignContent: <span class="type">Alignment</span>.<span class="type">Center</span> &#125;) &#123;</span><br><span class="line">            <span class="type">Column</span>() &#123;</span><br><span class="line">              <span class="comment">// 模拟上半区和下半区</span></span><br><span class="line">              <span class="type">Stack</span>().width(&#x27;200vp&#x27;).height(&#x27;100vp&#x27;).backgroundColor(<span class="type">Color</span>.<span class="type">Red</span>)</span><br><span class="line">              <span class="type">Stack</span>().width(&#x27;200vp&#x27;).height(&#x27;100vp&#x27;).backgroundColor(<span class="type">Color</span>.<span class="type">Blue</span>)</span><br><span class="line">            &#125;.width(&#x27;200vp&#x27;).height(&#x27;200vp&#x27;)</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Stack的下半区是绑定了拖动手势的图像区域。</span></span><br><span class="line">            <span class="type">Image</span>(<span class="variable">$r</span>(&#x27;sys.media.ohos_app_icon&#x27;))</span><br><span class="line">              .draggable(<span class="literal">true</span>)</span><br><span class="line">              .onDragStart(() <span class="operator">=&gt;</span> &#123;</span><br><span class="line">                promptAction.showToast(&#123; message: <span class="string">&quot;Drag 下半区蓝色区域，Image响应&quot;</span> &#125;)</span><br><span class="line">              &#125;)</span><br><span class="line">              .width(&#x27;200vp&#x27;).height(&#x27;200vp&#x27;)</span><br><span class="line">            <span class="comment">// Stack的上半区是绑定了长按手势的浮动区域。</span></span><br><span class="line">            <span class="type">Stack</span>() &#123;</span><br><span class="line">            &#125;</span><br><span class="line">            .width(&#x27;200vp&#x27;)</span><br><span class="line">            .height(&#x27;200vp&#x27;)</span><br><span class="line">            .hitTestBehavior(<span class="type">HitTestMode</span>.<span class="type">Transparent</span>)</span><br><span class="line">            .onGestureJudgeBegin((gestureInfo: <span class="type">GestureInfo</span>, event: <span class="type">BaseGestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">              <span class="comment">// 确定tag标志是否有值</span></span><br><span class="line">              <span class="keyword">if</span> (gestureInfo.tag) &#123;</span><br><span class="line">                console.log(<span class="string">&quot;gestureInfo tag&quot;</span> <span class="operator">+</span> gestureInfo.tag.toString())</span><br><span class="line">              &#125;</span><br><span class="line">              console.log(<span class="string">&quot;gestureInfo Type &quot;</span> <span class="operator">+</span> gestureInfo.type.toString() <span class="operator">+</span> <span class="string">&quot; isSystemGesture &quot;</span> <span class="operator">+</span></span><br><span class="line">              gestureInfo.isSystemGesture);</span><br><span class="line">              console.log(<span class="string">&quot;pressure &quot;</span> <span class="operator">+</span> event.pressure <span class="operator">+</span> <span class="string">&quot; fingerList.length &quot;</span> <span class="operator">+</span> event.fingerList.length</span><br><span class="line">                <span class="operator">+</span> <span class="string">&quot; timeStamp &quot;</span> <span class="operator">+</span> event.timestamp <span class="operator">+</span> <span class="string">&quot; sourceType &quot;</span> <span class="operator">+</span> event.source.toString() <span class="operator">+</span> <span class="string">&quot; titleX &quot;</span> <span class="operator">+</span></span><br><span class="line">              event.tiltX <span class="operator">+</span> <span class="string">&quot; titleY &quot;</span> <span class="operator">+</span> event.tiltY <span class="operator">+</span> <span class="string">&quot; sourcePool &quot;</span> <span class="operator">+</span> event.sourceTool.toString());</span><br><span class="line">              <span class="comment">// 如果是长按类型手势，判断点击的位置是否在上半区</span></span><br><span class="line">              <span class="keyword">if</span> (gestureInfo.type <span class="operator">==</span> <span class="type">GestureControl</span>.<span class="type">GestureType</span>.<span class="type">LONG_PRESS_GESTURE</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (event.fingerList.length <span class="operator">&gt;</span> <span class="number">0</span> <span class="operator">&amp;&amp;</span> event.fingerList[<span class="number">0</span>].localY <span class="operator">&lt;</span> <span class="number">100</span>) &#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="type">GestureJudgeResult</span>.<span class="type">CONTINUE</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="type">GestureJudgeResult</span>.<span class="type">REJECT</span></span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">return</span> <span class="type">GestureJudgeResult</span>.<span class="type">CONTINUE</span></span><br><span class="line">            &#125;)</span><br><span class="line">            .gesture(<span class="type">GestureGroup</span>(<span class="type">GestureMode</span>.<span class="type">Parallel</span>,</span><br><span class="line">              <span class="type">LongPressGesture</span>()</span><br><span class="line">                .onAction((event: <span class="type">GestureEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">                  promptAction.showToast(&#123; message: <span class="string">&quot;LongPressGesture 长按上半区 红色区域，红色区域响应&quot;</span> &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">                .tag(<span class="string">&quot;tap111&quot;</span>)</span><br><span class="line">            ))</span><br><span class="line"></span><br><span class="line">          &#125;.width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">        &#125;.width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.width(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">    .height(<span class="string">&quot;100%&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line">export function <span class="type">GestureJudgeExample2Builder</span>() &#123;</span><br><span class="line">  <span class="type">GestureJudgeExample2</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=YjJiMjY1NzU0MTJkMDFhMTVhYTE2NWJlOTJkNDhjOTdfeTd2VmFVRTRkaDcwa24wQWtIVmNzQ05GdElCU2dMQmFfVG9rZW46VFdYZGIzSnhObzFMckV4SWNZdmNlRXhpbmdoXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<h3 id="手势拦截增强"><a href="#手势拦截增强" class="headerlink" title="手势拦截增强"></a>手势拦截增强</h3><p>为组件提供手势拦截能力。开发者可根据需要，将系统内置手势和比其优先级高的手势做并行化处理，并可以动态控制手势事件的触发。</p>
<p><strong>说明</strong></p>
<p>从API Version 12开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>
<p><strong>shouldBuiltInRecognizerParallelWith</strong></p>
<p>shouldBuiltInRecognizerParallelWith(callback: ShouldBuiltInRecognizerParallelWithCallback): T</p>
<p>提供系统内置手势与响应链上其他组件的手势设置并行关系的回调事件。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>必填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>callback</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-blocking-enhancement-V13#shouldbuiltinrecognizerparallelwithcallback">ShouldBuiltInRecognizerParallelWithCallback</a></td>
<td>是</td>
<td>提供系统内置手势与响应链上其他组件的手势设置并行关系的回调事件，当该组件做触摸碰撞测试时，会触发用户定义的回调来形成手势并行关系。</td>
</tr>
</tbody></table>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>T</td>
<td>返回当前组件。</td>
</tr>
</tbody></table>
<p><strong>ShouldBuiltInRecognizerParallelWithCallback</strong></p>
<p>type ShouldBuiltInRecognizerParallelWithCallback &#x3D; (current: GestureRecognizer, others: Array<GestureRecognizer>) &#x3D;&gt; GestureRecognizer</p>
<p>提供系统内置手势与响应链上其他组件的手势设置并行关系的回调事件类型。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>current</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-blocking-enhancement-V13#gesturerecognizer">GestureRecognizer</a></td>
<td>是</td>
<td>当前组件的系统内置手势识别器，当前版本只提供内置的<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#gesturejudgeresult11">PAN_GESTURE</a>类型的手势识别器。</td>
</tr>
<tr>
<td>others</td>
<td>Array&lt;<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-blocking-enhancement-V13#gesturerecognizer">GestureRecognizer</a>&gt;</td>
<td>是</td>
<td>响应链上更高优先级的其他组件相同类别的手势识别器。</td>
</tr>
</tbody></table>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-blocking-enhancement-V13#gesturerecognizer">GestureRecognizer</a></td>
<td>与current识别器绑定并行关系的某个手势识别器。</td>
</tr>
</tbody></table>
<p><strong>GestureRecognizer</strong></p>
<p>手势识别器对象。</p>
<p><strong>getTag</strong></p>
<p>getTag(): string</p>
<p>返回当前手势识别器的tag。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>string</td>
<td>当前手势识别器的tag。</td>
</tr>
</tbody></table>
<p><strong>getType</strong></p>
<p>getType(): GestureControl.GestureType</p>
<p>返回当前手势识别器的类型。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#gesturetype11">GestureControl.GestureType</a></td>
<td>当前手势识别器的类型。</td>
</tr>
</tbody></table>
<p><strong>isBuiltIn</strong></p>
<p>isBuiltIn(): boolean</p>
<p>返回当前手势识别器是否为系统内置手势。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>boolean</td>
<td>当前手势识别器是否为系统内置手势。</td>
</tr>
</tbody></table>
<p><strong>setEnabled</strong></p>
<p>setEnabled(isEnabled: boolean): void</p>
<p>设置当前手势识别器的使能状态。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>isEnabled</td>
<td>boolean</td>
<td>是</td>
<td>手势识别器的使能状态。</td>
</tr>
</tbody></table>
<p><strong>isEnabled</strong></p>
<p>isEnabled(): boolean</p>
<p>返回当前手势识别器的使能状态。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>boolean</td>
<td>当前手势识别器的使能状态。</td>
</tr>
</tbody></table>
<p><strong>getState</strong></p>
<p>getState(): GestureRecognizerState</p>
<p>返回当前手势识别器的状态。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-blocking-enhancement-V13#gesturerecognizerstate">GestureRecognizerState</a></td>
<td>当前手势识别器的状态。</td>
</tr>
</tbody></table>
<p><strong>getEventTargetInfo</strong></p>
<p>getEventTargetInfo(): EventTargetInfo</p>
<p>返回当前手势识别器对应组件的信息。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-blocking-enhancement-V13#eventtargetinfo">EventTargetInfo</a></td>
<td>当前手势识别器对应组件的信息。</td>
</tr>
</tbody></table>
<p><strong>isValid</strong></p>
<p>isValid(): boolean;</p>
<p>返回当前手势识别器是否有效。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>boolean</td>
<td>当前手势识别器是否有效。当该识别器绑定的组件被析构或者该识别器不在响应链上时返回false。</td>
</tr>
</tbody></table>
<p><strong>GestureRecognizerState</strong></p>
<p>定义手势识别器状态。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>READY</td>
<td>0</td>
<td>准备状态。</td>
</tr>
<tr>
<td>DETECTING</td>
<td>1</td>
<td>检测状态。</td>
</tr>
<tr>
<td>PENDING</td>
<td>2</td>
<td>等待状态。</td>
</tr>
<tr>
<td>BLOCKED</td>
<td>3</td>
<td>阻塞状态。</td>
</tr>
<tr>
<td>SUCCESSFUL</td>
<td>4</td>
<td>成功状态。</td>
</tr>
<tr>
<td>FAILED</td>
<td>5</td>
<td>失败状态。</td>
</tr>
</tbody></table>
<p><strong>EventTargetInfo</strong></p>
<p>手势识别器对应组件的信息。</p>
<p><strong>getId</strong></p>
<p>getId(): string</p>
<p>返回当前组件的组件标识。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>string</td>
<td>当前组件的<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-universal-attributes-component-id-V13#id">组件标识</a>。</td>
</tr>
</tbody></table>
<p><strong>ScrollableTargetInfo</strong></p>
<p>手势识别器对应的滚动类容器组件的信息，继承于<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-blocking-enhancement-V13#eventtargetinfo">EventTargetInfo</a>。</p>
<p><strong>isBegin</strong></p>
<p>isBegin(): boolean</p>
<p>返回当前滚动类容器组件是否在顶部，如果为Swiper组件且在循环模式下返回false。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>boolean</td>
<td>当前滚动类容器组件是否在顶部。</td>
</tr>
</tbody></table>
<p><strong>isEnd</strong></p>
<p>isEnd(): boolean</p>
<p>返回当前滚动类容器组件是否在底部，如果为Swiper组件且在循环模式下返回false。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>boolean</td>
<td>当前滚动类容器组件是否在底部。</td>
</tr>
</tbody></table>
<p><strong>PanRecognizer</strong></p>
<p>拖动手势识别器对象，继承于<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-blocking-enhancement-V13#gesturerecognizer">GestureRecognizer</a>。</p>
<p><strong>getPanGestureOptions</strong></p>
<p>getPanGestureOptions(): PanGestureOptions</p>
<p>返回当前拖动手势识别器的属性。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-basic-gestures-pangesture-V13#pangestureoptions">PanGestureOptions</a></td>
<td>当前拖动手势识别器的属性。</td>
</tr>
</tbody></table>
<p><strong>onGestureRecognizerJudgeBegin(13+)</strong></p>
<p>onGestureRecognizerJudgeBegin(callback: GestureRecognizerJudgeBeginCallback, exposeInnerGesture: boolean): T</p>
<p>给组件绑定自定义手势识别器判定回调。</p>
<p>新增exposeInnerGesture参数作为是否将回调暴露给ArkUI原生组合组件的内置组件的标识，当该标识置为true时，将回调暴露给ArkUI原生组合组件的内置组件。</p>
<p>对于不需要将回调暴露给ArkUI原生组合组件内置组件的场景，建议采用原有<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-blocking-enhancement-V13#ongesturerecognizerjudgebegin">onGestureRecognizerJudgeBegin</a>接口。若要求将回调暴露给ArkUI原生组合组件的内置组件，建议使用该接口并将exposeInnerGesture设置为true。</p>
<p><strong>元服务API：</strong> 从API version 13开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>必填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>callback</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-blocking-enhancement-V13#gesturerecognizerjudgebegincallback">GestureRecognizerJudgeBeginCallback</a></td>
<td>是</td>
<td>给组件绑定自定义手势识别器判定回调，当绑定到该组件的手势被接受时，会触发用户定义的回调来获取结果。</td>
</tr>
<tr>
<td>exposeInnerGesture</td>
<td>boolean</td>
<td>是</td>
<td>暴露内部手势标识。默认值：false说明:如果是组合组件，此参数设置true，则会在current参数回调出组合组件内部的手势识别器。当前仅支持<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-container-tabs-V13">Tabs</a>，其他组件请不要设置此参数。设置为false时，功能与原接口<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-blocking-enhancement-V13#ongesturerecognizerjudgebegin">onGestureRecognizerJudgeBegin</a>相同。</td>
</tr>
</tbody></table>
<p><strong>onGestureRecognizerJudgeBegin</strong></p>
<p>onGestureRecognizerJudgeBegin(callback: GestureRecognizerJudgeBeginCallback): T</p>
<p>给组件绑定自定义手势识别器判定回调。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>必填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>callback</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-blocking-enhancement-V13#gesturerecognizerjudgebegincallback">GestureRecognizerJudgeBeginCallback</a></td>
<td>是</td>
<td>给组件绑定自定义手势识别器判定回调，当绑定到该组件的手势被接受时，会触发用户定义的回调来获取结果。</td>
</tr>
</tbody></table>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>T</td>
<td>返回当前组件。</td>
</tr>
</tbody></table>
<p><strong>GestureRecognizerJudgeBeginCallback</strong></p>
<p>type GestureRecognizerJudgeBeginCallback &#x3D; (event: BaseGestureEvent, current: GestureRecognizer, recognizers: Array<GestureRecognizer>) &#x3D;&gt; GestureJudgeResult</p>
<p>自定义手势识别器判定回调类型。</p>
<p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>
<p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>
<p><strong>参数：</strong></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>event</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#basegestureevent%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E">BaseGestureEvent</a></td>
<td>是</td>
<td>当前基础手势事件信息。</td>
</tr>
<tr>
<td>current</td>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-blocking-enhancement-V13#gesturerecognizer">GestureRecognizer</a></td>
<td>是</td>
<td>当前即将要响应的识别器对象。</td>
</tr>
<tr>
<td>others</td>
<td>Array&lt;<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-blocking-enhancement-V13#gesturerecognizer">GestureRecognizer</a>&gt;</td>
<td>是</td>
<td>响应链上的其他手势识别器对象。</td>
</tr>
</tbody></table>
<p><strong>返回值：</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V13/ts-gesture-customize-judge-V13#gesturejudgeresult11">GestureJudgeResult</a></td>
<td>手势是否裁决成功的判定结果。</td>
</tr>
</tbody></table>
<p><strong>示例</strong></p>
<p><strong>示例1（嵌套滚动）</strong></p>
<p>该示例通过shouldBuiltInrecognizerParallelWith和onGestureRecognizerJudgeBegin实现了嵌套滚动的功能。内部组件优先响应滑动手势，当内部组件滑动至顶部或底部时，外部组件能够接替滑动。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FatherControlChild</span> &#123;</span><br><span class="line">  scroller: <span class="type">Scroller</span> <span class="operator">=</span> new <span class="type">Scroller</span>()</span><br><span class="line">  scroller2: <span class="type">Scroller</span> <span class="operator">=</span> new <span class="type">Scroller</span>()</span><br><span class="line">  <span class="keyword">private</span> arr: number[] <span class="operator">=</span> [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line">  <span class="keyword">private</span> childRecognizer: <span class="type">GestureRecognizer</span> <span class="operator">=</span> new <span class="type">GestureRecognizer</span>()</span><br><span class="line">  <span class="keyword">private</span> currentRecognizer: <span class="type">GestureRecognizer</span> <span class="operator">=</span> new <span class="type">GestureRecognizer</span>()</span><br><span class="line">  <span class="keyword">private</span> lastOffset: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">Stack</span>(&#123; alignContent: <span class="type">Alignment</span>.<span class="type">TopStart</span> &#125;) &#123;</span><br><span class="line">      <span class="type">Scroll</span>(this.scroller) &#123; <span class="comment">// 外部滚动容器</span></span><br><span class="line">        <span class="type">Column</span>() &#123;</span><br><span class="line">          <span class="type">Text</span>(<span class="string">&quot;Scroll Area&quot;</span>)</span><br><span class="line">            .width(&#x27;<span class="number">90</span><span class="operator">%</span>&#x27;)</span><br><span class="line">            .height(<span class="number">150</span>)</span><br><span class="line">            .backgroundColor(<span class="number">0xFFFFFF</span>)</span><br><span class="line">            .borderRadius(<span class="number">15</span>)</span><br><span class="line">            .fontSize(<span class="number">16</span>)</span><br><span class="line">            .textAlign(<span class="type">TextAlign</span>.<span class="type">Center</span>)</span><br><span class="line">            .margin(&#123; top: <span class="number">10</span> &#125;)</span><br><span class="line">          <span class="type">Scroll</span>(this.scroller2) &#123; <span class="comment">// 内部滚动容器</span></span><br><span class="line">            <span class="type">Column</span>() &#123;</span><br><span class="line">              <span class="type">Text</span>(<span class="string">&quot;Scroll Area2&quot;</span>)</span><br><span class="line">                .width(&#x27;<span class="number">90</span><span class="operator">%</span>&#x27;)</span><br><span class="line">                .height(<span class="number">150</span>)</span><br><span class="line">                .backgroundColor(<span class="number">0xFFFFFF</span>)</span><br><span class="line">                .borderRadius(<span class="number">15</span>)</span><br><span class="line">                .fontSize(<span class="number">16</span>)</span><br><span class="line">                .textAlign(<span class="type">TextAlign</span>.<span class="type">Center</span>)</span><br><span class="line">                .margin(&#123; top: <span class="number">10</span> &#125;)</span><br><span class="line">              <span class="type">Column</span>() &#123;</span><br><span class="line">                <span class="type">ForEach</span>(this.arr, (item: number) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">                  <span class="type">Text</span>(item.toString())</span><br><span class="line">                    .width(&#x27;<span class="number">90</span><span class="operator">%</span>&#x27;)</span><br><span class="line">                    .height(<span class="number">150</span>)</span><br><span class="line">                    .backgroundColor(<span class="number">0xFFFFFF</span>)</span><br><span class="line">                    .borderRadius(<span class="number">15</span>)</span><br><span class="line">                    .fontSize(<span class="number">16</span>)</span><br><span class="line">                    .textAlign(<span class="type">TextAlign</span>.<span class="type">Center</span>)</span><br><span class="line">                    .margin(&#123; top: <span class="number">10</span> &#125;)</span><br><span class="line">                &#125;, (item: string) <span class="operator">=&gt;</span> item)</span><br><span class="line">              &#125;.width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          .id(<span class="string">&quot;inner&quot;</span>)</span><br><span class="line">          .width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">          .height(<span class="number">800</span>)</span><br><span class="line">        &#125;.width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">      .id(<span class="string">&quot;outer&quot;</span>)</span><br><span class="line">      .height(<span class="number">600</span>)</span><br><span class="line">      .scrollable(<span class="type">ScrollDirection</span>.<span class="type">Vertical</span>) <span class="comment">// 滚动方向纵向</span></span><br><span class="line">      .scrollBar(<span class="type">BarState</span>.<span class="type">On</span>) <span class="comment">// 滚动条常驻显示</span></span><br><span class="line">      .scrollBarColor(<span class="type">Color</span>.<span class="type">Gray</span>) <span class="comment">// 滚动条颜色</span></span><br><span class="line">      .scrollBarWidth(<span class="number">10</span>) <span class="comment">// 滚动条宽度</span></span><br><span class="line">      .edgeEffect(<span class="type">EdgeEffect</span>.<span class="type">None</span>)</span><br><span class="line">      .shouldBuiltInRecognizerParallelWith((current: <span class="type">GestureRecognizer</span>, others: <span class="type">Array</span>&lt;<span class="type">GestureRecognizer</span>&gt;) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="operator">=</span> <span class="number">0</span>; i <span class="operator">&lt;</span> others.length; i<span class="operator">++</span>) &#123;</span><br><span class="line">          <span class="keyword">let</span> target <span class="operator">=</span> others[i].getEventTargetInfo();</span><br><span class="line">          <span class="keyword">if</span> (target) &#123;</span><br><span class="line">            <span class="keyword">if</span> (target.getId() <span class="operator">==</span> <span class="string">&quot;inner&quot;</span> <span class="operator">&amp;&amp;</span> others[i].isBuiltIn() <span class="operator">&amp;&amp;</span> others[i].getType() <span class="operator">==</span> <span class="type">GestureControl</span>.<span class="type">GestureType</span>.<span class="type">PAN_GESTURE</span>) &#123; <span class="comment">// 找到将要组成并行手势的识别器</span></span><br><span class="line">              this.currentRecognizer <span class="operator">=</span> current; <span class="comment">// 保存当前组件的识别器</span></span><br><span class="line">              this.childRecognizer <span class="operator">=</span> others[i]; <span class="comment">// 保存将要组成并行手势的识别器</span></span><br><span class="line">              <span class="keyword">return</span> others[i]; <span class="comment">// 返回将要组成并行手势的识别器</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> undefined;</span><br><span class="line">      &#125;)</span><br><span class="line">      .onGestureRecognizerJudgeBegin((event: <span class="type">BaseGestureEvent</span>, current: <span class="type">GestureRecognizer</span>, others: <span class="type">Array</span>&lt;<span class="type">GestureRecognizer</span>&gt;) <span class="operator">=&gt;</span> &#123; <span class="comment">// 在识别器即将要成功时，根据当前组件状态，设置识别器使能状态</span></span><br><span class="line">        <span class="keyword">if</span> (current) &#123;</span><br><span class="line">          <span class="keyword">let</span> target <span class="operator">=</span> current.getEventTargetInfo();</span><br><span class="line">          <span class="keyword">if</span> (target) &#123;</span><br><span class="line">            <span class="keyword">if</span> (target.getId() <span class="operator">==</span> <span class="string">&quot;outer&quot;</span> <span class="operator">&amp;&amp;</span> current.isBuiltIn() <span class="operator">&amp;&amp;</span> current.getType() <span class="operator">==</span> <span class="type">GestureControl</span>.<span class="type">GestureType</span>.<span class="type">PAN_GESTURE</span>) &#123;</span><br><span class="line">              <span class="keyword">if</span> (others) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="operator">=</span> <span class="number">0</span>; i <span class="operator">&lt;</span> others.length; i<span class="operator">++</span>) &#123;</span><br><span class="line">                  <span class="keyword">let</span> target <span class="operator">=</span> others[i].getEventTargetInfo() <span class="keyword">as</span> <span class="type">ScrollableTargetInfo</span>;</span><br><span class="line">                  <span class="keyword">if</span> (target instanceof <span class="type">ScrollableTargetInfo</span> <span class="operator">&amp;&amp;</span> target.getId() <span class="operator">==</span> <span class="string">&quot;inner&quot;</span>) &#123; <span class="comment">// 找到响应链上对应并行的识别器</span></span><br><span class="line">                    <span class="keyword">let</span> panEvent <span class="operator">=</span> event <span class="keyword">as</span> <span class="type">PanGestureEvent</span>;</span><br><span class="line">                    <span class="keyword">if</span> (target.isEnd()) &#123; <span class="comment">// 根据当前组件状态以及移动方向动态控制识别器使能状态</span></span><br><span class="line">                      <span class="keyword">if</span> (panEvent <span class="operator">&amp;&amp;</span> panEvent.offsetY <span class="operator">&lt;</span> <span class="number">0</span>) &#123;</span><br><span class="line">                        this.childRecognizer.setEnabled(<span class="literal">false</span>)</span><br><span class="line">                        this.currentRecognizer.setEnabled(<span class="literal">true</span>)</span><br><span class="line">                      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        this.childRecognizer.setEnabled(<span class="literal">true</span>)</span><br><span class="line">                        this.currentRecognizer.setEnabled(<span class="literal">false</span>)</span><br><span class="line">                      &#125;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target.isBegin()) &#123;</span><br><span class="line">                      <span class="keyword">if</span> (panEvent.offsetY <span class="operator">&gt;</span> <span class="number">0</span>) &#123;</span><br><span class="line">                        this.childRecognizer.setEnabled(<span class="literal">false</span>)</span><br><span class="line">                        this.currentRecognizer.setEnabled(<span class="literal">true</span>)</span><br><span class="line">                      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        this.childRecognizer.setEnabled(<span class="literal">true</span>)</span><br><span class="line">                        this.currentRecognizer.setEnabled(<span class="literal">false</span>)</span><br><span class="line">                      &#125;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                      this.childRecognizer.setEnabled(<span class="literal">true</span>)</span><br><span class="line">                      this.currentRecognizer.setEnabled(<span class="literal">false</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">GestureJudgeResult</span>.<span class="type">CONTINUE</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">      .parallelGesture( <span class="comment">// 绑定一个Pan手势作为动态控制器</span></span><br><span class="line">        <span class="type">PanGesture</span>()</span><br><span class="line">          .onActionUpdate((event: <span class="type">GestureEvent</span>)<span class="operator">=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (this.childRecognizer.getState() <span class="operator">!=</span> <span class="type">GestureRecognizerState</span>.<span class="type">SUCCESSFUL</span> <span class="operator">||</span> this.currentRecognizer.getState() <span class="operator">!=</span> <span class="type">GestureRecognizerState</span>.<span class="type">SUCCESSFUL</span>) &#123; <span class="comment">// 如果识别器状态不是SUCCESSFUL，则不做控制</span></span><br><span class="line">              <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">let</span> target <span class="operator">=</span> this.childRecognizer.getEventTargetInfo() <span class="keyword">as</span> <span class="type">ScrollableTargetInfo</span>;</span><br><span class="line">            <span class="keyword">let</span> currentTarget <span class="operator">=</span> this.currentRecognizer.getEventTargetInfo() <span class="keyword">as</span> <span class="type">ScrollableTargetInfo</span>;</span><br><span class="line">            <span class="keyword">if</span> (target instanceof <span class="type">ScrollableTargetInfo</span> <span class="operator">&amp;&amp;</span> currentTarget instanceof <span class="type">ScrollableTargetInfo</span>) &#123;</span><br><span class="line">              <span class="keyword">if</span> (target.isEnd()) &#123; <span class="comment">// 在移动过程中实时根据当前组件状态，控制识别器的开闭状态</span></span><br><span class="line">                <span class="keyword">if</span> ((event.offsetY <span class="operator">-</span> this.lastOffset) <span class="operator">&lt;</span> <span class="number">0</span>) &#123;</span><br><span class="line">                  this.childRecognizer.setEnabled(<span class="literal">false</span>)</span><br><span class="line">                  <span class="keyword">if</span> (currentTarget.isEnd()) &#123;</span><br><span class="line">                    this.currentRecognizer.setEnabled(<span class="literal">false</span>)</span><br><span class="line">                  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    this.currentRecognizer.setEnabled(<span class="literal">true</span>)</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  this.childRecognizer.setEnabled(<span class="literal">true</span>)</span><br><span class="line">                  this.currentRecognizer.setEnabled(<span class="literal">false</span>)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target.isBegin()) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((event.offsetY <span class="operator">-</span> this.lastOffset) <span class="operator">&gt;</span> <span class="number">0</span>) &#123;</span><br><span class="line">                  this.childRecognizer.setEnabled(<span class="literal">false</span>)</span><br><span class="line">                  <span class="keyword">if</span> (currentTarget.isBegin()) &#123;</span><br><span class="line">                    this.currentRecognizer.setEnabled(<span class="literal">false</span>)</span><br><span class="line">                  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    this.currentRecognizer.setEnabled(<span class="literal">true</span>)</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  this.childRecognizer.setEnabled(<span class="literal">true</span>)</span><br><span class="line">                  this.currentRecognizer.setEnabled(<span class="literal">false</span>)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                this.childRecognizer.setEnabled(<span class="literal">true</span>)</span><br><span class="line">                this.currentRecognizer.setEnabled(<span class="literal">false</span>)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            this.lastOffset <span class="operator">=</span> event.offsetY</span><br><span class="line">          &#125;)</span><br><span class="line">      )</span><br><span class="line">    &#125;.width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;).height(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;).backgroundColor(<span class="number">0xDCDCDC</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>示例2（嵌套场景下拦截内部容器手势）</strong></p>
<p>本示例通过将参数exposeInnerGesture设置为true，实现了一级Tabs容器在嵌套二级Tabs的场景下，能够屏蔽二级Tabs内置Swiper的滑动手势，从而触发一级Tabs内置Swiper滑动手势的功能。</p>
<p>开发者自行定义变量来记录内层Tabs的索引值，通过该索引值判断当滑动达到内层Tabs的边界处时，触发回调返回屏蔽使外层Tabs产生滑动手势。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 手势拦截 Demo2</span></span><br><span class="line"><span class="comment">// 本示例通过将参数exposeInnerGesture设置为true，实现了一级Tabs容器在嵌套二级Tabs的场景下，能够屏蔽二级Tabs内置Swiper的滑动手势，从而触发一级Tabs内置Swiper滑动手势的功能。</span></span><br><span class="line"><span class="comment">// 开发者自行定义变量来记录内层Tabs的索引值，通过该索引值判断当滑动达到内层Tabs的边界处时，触发回调返回屏蔽使外层Tabs产生滑动手势。</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">GestureInterceptExample2</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> currentIndex: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> selectedIndex: number <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> fontColor: string <span class="operator">=</span> &#x27;#<span class="number">182431</span>&#x27;</span><br><span class="line">  <span class="meta">@State</span> selectedFontColor: string <span class="operator">=</span> &#x27;#007DFF&#x27;</span><br><span class="line">  innerSelectedIndex: number <span class="operator">=</span> <span class="number">0</span> <span class="comment">// 记录内层Tabs的索引</span></span><br><span class="line">  controller<span class="operator">?</span>: <span class="type">TabsController</span> <span class="operator">=</span> new <span class="type">TabsController</span>();</span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  tabBuilder(index: number, name: string) &#123;</span><br><span class="line">    <span class="type">Column</span>() &#123;</span><br><span class="line">      <span class="type">Text</span>(name)</span><br><span class="line">        .fontColor(this.selectedIndex <span class="operator">===</span> index <span class="operator">?</span> this.selectedFontColor : this.fontColor)</span><br><span class="line">        .fontSize(<span class="number">16</span>)</span><br><span class="line">        .fontWeight(this.selectedIndex <span class="operator">===</span> index <span class="operator">?</span> <span class="number">500</span> : <span class="number">400</span>)</span><br><span class="line">        .lineHeight(<span class="number">22</span>)</span><br><span class="line">        .margin(&#123; top: <span class="number">17</span>, bottom: <span class="number">7</span> &#125;)</span><br><span class="line">      <span class="type">Divider</span>()</span><br><span class="line">        .strokeWidth(<span class="number">2</span>)</span><br><span class="line">        .color(&#x27;#007DFF&#x27;)</span><br><span class="line">        .opacity(this.selectedIndex <span class="operator">===</span> index <span class="operator">?</span> <span class="number">1</span> : <span class="number">0</span>)</span><br><span class="line">    &#125;.width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">  build() &#123;</span><br><span class="line">    <span class="type">NavDestination</span>() &#123;</span><br><span class="line">      <span class="type">Column</span>() &#123;</span><br><span class="line">        <span class="type">Tabs</span>(&#123; barPosition: <span class="type">BarPosition</span>.<span class="type">Start</span>, index: this.currentIndex, controller: this.controller &#125;) &#123;</span><br><span class="line">          <span class="type">TabContent</span>() &#123;</span><br><span class="line">            <span class="type">Column</span>().width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;).height(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;).backgroundColor(<span class="type">Color</span>.<span class="type">Green</span>)</span><br><span class="line">          &#125;.tabBar(this.tabBuilder(<span class="number">0</span>, &#x27;green&#x27;))</span><br><span class="line"></span><br><span class="line">          <span class="type">TabContent</span>() &#123;</span><br><span class="line">            <span class="type">Tabs</span>() &#123;</span><br><span class="line">              <span class="type">TabContent</span>() &#123;</span><br><span class="line">                <span class="type">Column</span>().width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;).height(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;).backgroundColor(<span class="type">Color</span>.<span class="type">Blue</span>)</span><br><span class="line">              &#125;.tabBar(new <span class="type">SubTabBarStyle</span>(&#x27;blue&#x27;))</span><br><span class="line"></span><br><span class="line">              <span class="type">TabContent</span>() &#123;</span><br><span class="line">                <span class="type">Column</span>().width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;).height(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;).backgroundColor(<span class="type">Color</span>.<span class="type">Pink</span>)</span><br><span class="line">              &#125;.tabBar(new <span class="type">SubTabBarStyle</span>(&#x27;pink&#x27;))</span><br><span class="line">            &#125;</span><br><span class="line">            .onAnimationStart((index: number, targetIndex: number) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">              console.info(&#x27;ets onGestureRecognizerJudgeBegin child:&#x27; <span class="operator">+</span> targetIndex)</span><br><span class="line">              this.innerSelectedIndex <span class="operator">=</span> targetIndex</span><br><span class="line">            &#125;)</span><br><span class="line">            .onGestureRecognizerJudgeBegin((event: <span class="type">BaseGestureEvent</span>, current: <span class="type">GestureRecognizer</span>,</span><br><span class="line">              others: <span class="type">Array</span>&lt;<span class="type">GestureRecognizer</span>&gt;): <span class="type">GestureJudgeResult</span> <span class="operator">=&gt;</span> &#123; <span class="comment">// 在识别器即将要成功时，根据当前组件状态，设置识别器使能状态</span></span><br><span class="line">              console.info(&#x27;ets onGestureRecognizerJudgeBegin child&#x27;)</span><br><span class="line">              <span class="keyword">if</span> (current) &#123;</span><br><span class="line">                <span class="keyword">let</span> target <span class="operator">=</span> current.getEventTargetInfo();</span><br><span class="line">                <span class="keyword">if</span> (target <span class="operator">&amp;&amp;</span> current.isBuiltIn() <span class="operator">&amp;&amp;</span> current.getType() <span class="operator">==</span> <span class="type">GestureControl</span>.<span class="type">GestureType</span>.<span class="type">PAN_GESTURE</span>) &#123;</span><br><span class="line">                  console.info(&#x27;ets onGestureRecognizerJudgeBegin child <span class="type">PAN_GESTURE</span>&#x27;)</span><br><span class="line">                  <span class="keyword">let</span> swiperTaget <span class="operator">=</span> target <span class="keyword">as</span> <span class="type">ScrollableTargetInfo</span></span><br><span class="line">                  <span class="keyword">if</span> (swiperTaget instanceof <span class="type">ScrollableTargetInfo</span>) &#123;</span><br><span class="line">                    console.info(&#x27;ets onGestureRecognizerJudgeBegin child <span class="type">PAN_GESTURE</span> isEnd: &#x27; <span class="operator">+</span> swiperTaget.isEnd() <span class="operator">+</span></span><br><span class="line">                      &#x27; isBegin: &#x27; <span class="operator">+</span> swiperTaget.isBegin())</span><br><span class="line">                  &#125;</span><br><span class="line">                  <span class="keyword">if</span> (swiperTaget instanceof <span class="type">ScrollableTargetInfo</span> <span class="operator">&amp;&amp;</span></span><br><span class="line">                    ((swiperTaget.isEnd() <span class="operator">||</span> this.innerSelectedIndex <span class="operator">===</span></span><br><span class="line">                      <span class="number">1</span>) <span class="operator">||</span> <span class="comment">// 此处判断swiperTaget.isEnd()或innerSelectedIndex === 内层Tabs的总数 - 1，表明内层Tabs滑动到尽头</span></span><br><span class="line">                      (swiperTaget.isBegin() <span class="operator">||</span> this.innerSelectedIndex <span class="operator">===</span></span><br><span class="line">                        <span class="number">0</span>))) &#123; <span class="comment">// 此处判断swiperTaget.isBegin()或innerSelectedIndex === 0，表明内层Tabs滑动到开头</span></span><br><span class="line">                    <span class="keyword">let</span> panEvent <span class="operator">=</span> event <span class="keyword">as</span> <span class="type">PanGestureEvent</span>;</span><br><span class="line">                    console.log(&#x27;pan direction:&#x27; <span class="operator">+</span> panEvent.offsetX <span class="operator">+</span> &#x27; begin:&#x27; <span class="operator">+</span> swiperTaget.isBegin() <span class="operator">+</span> &#x27; end:&#x27; <span class="operator">+</span></span><br><span class="line">                    swiperTaget.isEnd() <span class="operator">+</span> &#x27; index:&#x27; <span class="operator">+</span> this.innerSelectedIndex)</span><br><span class="line">                    <span class="keyword">if</span> (panEvent <span class="operator">&amp;&amp;</span> panEvent.offsetX <span class="operator">&lt;</span> <span class="number">0</span> <span class="operator">&amp;&amp;</span> (swiperTaget.isEnd() <span class="operator">||</span> this.innerSelectedIndex <span class="operator">===</span> <span class="number">1</span>)) &#123;</span><br><span class="line">                      console.info(&#x27;ets onGestureRecognizerJudgeBegin child reject end&#x27;)</span><br><span class="line">                      <span class="keyword">return</span> <span class="type">GestureJudgeResult</span>.<span class="type">REJECT</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (panEvent <span class="operator">&amp;&amp;</span> panEvent.offsetX <span class="operator">&gt;</span> <span class="number">0</span> <span class="operator">&amp;&amp;</span> (swiperTaget.isBegin() <span class="operator">||</span> this.innerSelectedIndex <span class="operator">===</span> <span class="number">0</span>)) &#123;</span><br><span class="line">                      console.info(&#x27;ets onGestureRecognizerJudgeBegin child reject begin&#x27;)</span><br><span class="line">                      <span class="keyword">return</span> <span class="type">GestureJudgeResult</span>.<span class="type">REJECT</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">return</span> <span class="type">GestureJudgeResult</span>.<span class="type">CONTINUE</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;.tabBar(this.tabBuilder(<span class="number">1</span>, &#x27;blue and pink&#x27;))</span><br><span class="line"></span><br><span class="line">          <span class="type">TabContent</span>() &#123;</span><br><span class="line">            <span class="type">Column</span>().width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;).height(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;).backgroundColor(<span class="type">Color</span>.<span class="type">Brown</span>)</span><br><span class="line">          &#125;.tabBar(this.tabBuilder(<span class="number">2</span>, &#x27;brown&#x27;))</span><br><span class="line">        &#125;</span><br><span class="line">        .onAnimationStart((index: number, targetIndex: number, event: <span class="type">TabsAnimationEvent</span>) <span class="operator">=&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// 切换动画开始时触发该回调。目标页签显示下划线。</span></span><br><span class="line">          this.selectedIndex <span class="operator">=</span> targetIndex</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.width(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">    .height(&#x27;<span class="number">100</span><span class="operator">%</span>&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line">export function <span class="type">GestureInterceptExample2Builder</span>() &#123;</span><br><span class="line">  <span class="type">GestureInterceptExample2</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MGI4ODQxNGIyNWVkMTg2ODQyOWQxZDUyOTMyYzhiYjdfajJESXBWcnBlMUYwM0JtSXM5NkJUWmt3Q1N5U3BndFhfVG9rZW46S0Z4TGIzSTBpb2hiV0h4QU1xRmN1Wnl2bklkXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<h1 id="四、触摸事件原理"><a href="#四、触摸事件原理" class="headerlink" title="四、触摸事件原理"></a>四、触摸事件原理</h1><h3 id="Harmony触摸事件捕获和事件冒泡"><a href="#Harmony触摸事件捕获和事件冒泡" class="headerlink" title="Harmony触摸事件捕获和事件冒泡"></a><strong>Harmony触摸事件捕获和事件冒泡</strong></h3><p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=N2M4OGFiZjhkYzY1YjNiNzRmNTFhYWZiYjRmYTRhMDVfSmoyOVlQenVFV0RrODlZTWpNb3RCUmROejBTblpBT2RfVG9rZW46TzdxTWJKZkxub1JyV2J4c3c2SWNmWXIxbk5jXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<p><strong>事件处理原理</strong></p>
<ul>
<li>事件监听： 在 ArkUI 中，事件监听是通过在组件上指定事件属性来实现的。例如，你可以为按钮组件添加一个 onClick 属性来监听点击事件。</li>
<li>事件对象： 当事件被触发时，一个事件对象会被传递给事件处理函数。这个对象包含了事件的详细信息，如事件类型、触发事件的元素、事件坐标等。</li>
<li>事件传播： 事件传播包括捕获阶段和冒泡阶段。在捕获阶段，事件从根元素向下传播到目标元素；在冒泡阶段，事件从目标元素向上传播回根元素。</li>
<li>事件处理函数： 事件处理函数可以是内联函数，也可以是组件方法中的一个函数。在函数内部，你可以执行任何逻辑来响应事件。</li>
</ul>
<p>暂时无法在飞书文档外展示此内容</p>
<h3 id="iOS触摸事件捕获"><a href="#iOS触摸事件捕获" class="headerlink" title="iOS触摸事件捕获"></a>iOS触摸事件捕获</h3><p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=NTgxODYwNWY0YjFiZGVkMzJlMzg1MjU0ZGIzZDUwYTdfak5NTThsbWt1YkdQV3FFUEJJSnJ1U1NNOG1Pc3A3T1lfVG9rZW46RWxzRGJobUJWb3M5S2x4ajJ6YWNKc0NlbmJlXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGY0NjZjYmZlOGY0Y2YyZTFjMzQ4YjU0NTlhYzFiOWJfOEMxV3N5c3R5eTZJblY2ekdqb1hPY2N1UmZMWW5mRnBfVG9rZW46SExUZ2JiVWdjb3BSU1h4VmtMWWNJYm51bllnXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<h3 id="H5-触摸事件捕获和事件冒泡"><a href="#H5-触摸事件捕获和事件冒泡" class="headerlink" title="H5 触摸事件捕获和事件冒泡"></a><strong>H5 触摸事件捕获和事件冒泡</strong></h3><p><a target="_blank" rel="noopener" href="http://www.w3.org/TR/DOM-Level-3-Events/">DOM 事件</a>标准描述了事件传播的 3 个阶段：</p>
<ol>
<li>捕获阶段（Capturing phase）—— 事件（从 Window）向下走近元素。</li>
<li>目标阶段（Target phase）—— 事件到达目标元素。</li>
<li>冒泡阶段（Bubbling phase）—— 事件从元素上开始冒泡。</li>
</ol>
<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=N2JlOTVhZmZlNGY0OTU2MjgzNmI0ODUzYjc5ZTM4NzFfRUhVaDV5VDlqd0M5a2RxWExKNVdzQWtXT3RkeElTSmxfVG9rZW46UjlCVGJEdzBTb3N2TUd4Zkp3VmNzSjQ0bnNkXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<h3 id="Android触摸事件分发"><a href="#Android触摸事件分发" class="headerlink" title="Android触摸事件分发"></a>Android触摸事件分发</h3><p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=OGFiYmI3NDBmMzVjYmYzYTE4NWZkMTNlYWFlNmRlMzdfTUk2WW1rSGJYUUFTM0dWZXMwUXMzVkxDNjNzNmZNdlhfVG9rZW46RU0wZ2J5ZVJMb0M4Y2Z4ZkZPTGN1OEY3blFoXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<p><img src="https://tjny2v67lw.feishu.cn/space/api/box/stream/download/asynccode/?code=MGQzZjcwMGYyNjA5M2Y0NTc4YTdhZmIzMTMyM2E1ZDNfUHhub0hpa1VQMFppOHhabkNCUTN6dFM2TGVzR3FsT2VfVG9rZW46QnVydmJrWjdOb01Jb2h4V201OWNhMFlNbmNnXzE3NDIxODk5NTc6MTc0MjE5MzU1N19WNA" alt="img"></p>
<h1 id="五、参考"><a href="#五、参考" class="headerlink" title="五、参考"></a>五、参考</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/maniuT/article/details/136532792">HarmonyOS NEXT应用开发案例——阻塞事件冒泡</a></p>
<p><a target="_blank" rel="noopener" href="http://bbs.itying.com/topic/675c2fd8ad669d01bf73257d">HarmonyOS 鸿蒙Next 组件的触摸事件分发机制到底是怎么样的</a></p>
<p><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/tsaszckyxsufpksbdrll">HarmonyOS ArkUI 框架的实现原理和落地实践</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7243087523755933733">深入理解DOM事件流：事件捕获与事件冒泡</a></p>
<p><a target="_blank" rel="noopener" href="https://zh.javascript.info/bubbling-and-capturing">冒泡和捕获</a></p>

  </section>

</article>

<section class="read-more">
           
    
               
            <div class="read-more-item">
                <span class="read-more-item-dim">最近的文章</span>
                <h2 class="post-list__post-title post-title"><a href="/ios-wkwebview-cache-test/" title="WKWebView缓存协议验证">WKWebView缓存协议验证</a></h2>
                <p class="excerpt">
                
                

前言本次我们基于 URLRequest.CachePolicy 协议进行 WKWebView 缓存能力的验证，主要验证方向为网页页面及相应资源的内容缓存。
API 如下
1234567891011public struct URLRequest : ReferenceConvertible, E
                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2024-08-24T06:34:35.000Z" class="post-list__meta--date date">2024-08-24</time> &#8226; <span class="post-list__meta--tags tags">于 
  <a class="-none-link" href="/tags/WKWebview/" rel="tag">WKWebview</a>, <a class="-none-link" href="/tags/iOS/" rel="tag">iOS</a>, <a class="-none-link" href="/tags/%E7%BC%93%E5%AD%98/" rel="tag">缓存</a>
</span><a class="btn-border-small" href="/ios-wkwebview-cache-test/">开始阅读</a></div>
                           
            </div>
        
        
               
            <div class="read-more-item">
                <span class="read-more-item-dim">更早的文章</span>
                <h2 class="post-list__post-title post-title"><a href="/ios-npl-ocr-demo/" title="iOS 端基于 NLP/CoreML + Vision 实现「图像文字识别&amp;提取」">iOS 端基于 NLP/CoreML + Vision 实现「图像文字识别&amp;提取」</a></h2>
                <p class="excerpt">
                
                

前言
阅读本文内容前，你可能需要了解的基础知识「端智能」基于自然语言处理 (NLP) 的光学字符识别 (OCR)

在最近的技术分享中，我们已经知道了实现「图像文字识别&amp;amp;提取」这个功能所需的基本技术方案和原理 ，这解决了我们实现这一功能当中 Why 和 What 的问题。但光知道 Why
                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2024-03-02T13:29:45.000Z" class="post-list__meta--date date">2024-03-02</time> &#8226; <span class="post-list__meta--tags tags">于 
  <a class="-none-link" href="/tags/AI/" rel="tag">AI</a>, <a class="-none-link" href="/tags/NLP/" rel="tag">NLP</a>, <a class="-none-link" href="/tags/OCR/" rel="tag">OCR</a>, <a class="-none-link" href="/tags/Vision/" rel="tag">Vision</a>, <a class="-none-link" href="/tags/iOS/" rel="tag">iOS</a>, <a class="-none-link" href="/tags/%E7%AB%AF%E6%99%BA%E8%83%BD/" rel="tag">端智能</a>
</span><a class="btn-border-small" href="/ios-npl-ocr-demo/">开始阅读</a></div>
                       
            </div>
        
     
   
   
  
</section>

  
<section class="post-comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      var disqus_shortname = 'warpdrive'; 
      
  var disqus_identifier = '/hm-gesture/';
  var disqus_title = 'HarmonyOS - 鸿蒙手势处理及实现原理';
  var disqus_url = 'http://shevakuilin.com/hm-gesture/';
  

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          //dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
          dsq.src = 'https://a.disquscdn.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a target="_blank" rel="noopener" href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


            <footer class="footer">
    <span class="footer__copyright">
        &copy; 2025 ShevaKuilin - 跃迁引擎 <a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/"> 渝ICP备 19012091</a>, 本站点采用 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>
       
    </span>
    <span class="footer__copyright">
             - 基于 <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a> 搭建，使用 <a target="_blank" rel="noopener" href="https://github.com/monniya/hexo-theme-new-vno ">new-vno</a> 主题，由<a target="_blank" rel="noopener" href="https://monniya.com ">@Monniya</a> 修改自 <a href="https://github.com/lenbo-ma/hexo-theme-vno" target="_blank">Vno</a>, 原创出自<a href="http://github.com/onevcat/vno" target="_blank">onevcat</a>
         </span>
       
    
    
</footer>


        </div>
    </div>

     
    


    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    
</body>
</html>
